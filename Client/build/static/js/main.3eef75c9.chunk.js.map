{"version":3,"sources":["services/httpService.js","redux/errors.js","redux/auth.js","redux/messages.js","redux/users.js","redux/books.js","redux/comments.js","redux/orders.js","redux/rootReducer.js","store.js","common/navbar.jsx","common/footer.jsx","common/pagination.jsx","components/booksCarouselComponent.jsx","components/booksCards.jsx","common/sortSelector.jsx","common/GenreSelector.jsx","common/search.jsx","components/booksMainComponent.jsx","services/comments-utils.js","components/bookComment.jsx","components/bookInfo.jsx","components/bookInfoPage.jsx","components/searchPage.jsx","components/orders.jsx","services/validation.js","common/login.jsx","common/register.jsx","components/home.jsx","images/Home/page_not_found.jpg","common/notFound.jsx","common/alerts.jsx","components/adminHome.jsx","App.js","index.js"],"names":["axios","defaults","baseURL","process","interceptors","response","use","error","status","Promise","reject","get","post","put","patch","delete","setJwt","jwt","headers","common","slice","createSlice","name","initialState","msg","reducers","errorsReturned","errors","action","payload","console","log","actions","returnErrors","type","token","localStorage","getItem","isAdmin","isAuthenticated","isLoading","user","username","userLoading","auth","userLoaded","setItem","authError","removeItem","loginSuccess","loginFail","logoutSuccess","registerSuccess","registerFail","loadUser","dispatch","getState","http","tokenConfig","then","res","data","catch","err","config","messagesCreated","messages","createMessage","apiEndpoint","users","currentUser","userAdded","push","usersLoaded","userObjectUpdated","index","findIndex","_id","id","userUpdated","keys","Object","$set","forEach","key","userRemoved","splice","loadUsers","a","updateUser","errorObject","isError","errorMessage","email","password","ordered_books","liked_books","age","country","books","currentBook","bookAdded","booksloaded","bookloaded","bookRemoved","book","loadBooks","comments","commentsloaded","commentAdded","commentUpdated","comment","like_counter","like_submitter","dislike_counter","dislike_submitter","comment_replies","commentloaded","commentRemoved","loadComments","addComment","orders","orderAdded","ordersloaded","orderloaded","order","orderRemoved","loadOrders","removeOrder","combineReducers","admin","middleware","thunk","store","createStore","rootReducer","composeWithDevTools","applyMiddleware","connect","state","logout","NavBar","props","prototype","PropTypes","bool","isRequired","string","array","func","useState","searchQuery","setSearchQuery","display","setDisplay","phoneDisplay","setPhoneDisplay","wrapperRef","useRef","searchList","filter","toLowerCase","includes","history","useHistory","useEffect","window","addEventListener","handleClickOutside","removeEventListener","event","wrap","current","contains","target","truncate","str","n","length","substr","handleLogin","handleSearch","e","currentTarget","value","onSubmit","preventDefault","alert","Fragment","className","style","width","to","textDecoration","color","Form","margin","Group","InputGroup","ref","onClick","FormControl","placeholder","aria-label","aria-describedby","onChange","Append","map","location","href","src","image","alt","author","flexDirection","marginTop","cursor","fontSize","Footer","fluid","md","Date","getFullYear","Paginate","itemsCounts","pageSize","currentPage","onPageChange","pagesCount","Math","ceil","items","number","Pagination","Item","BooksCarouselComponent","booksList","getBestBooks","bestBooks","_","orderBy","swipeable","draggable","showDots","responsive","desktop","breakpoint","max","min","mobile","focusOnSelect","ssr","infinite","containerClass","dotListClass","itemClass","goToBookPage","booksCards","Card","Img","variant","Body","Title","Text","rate","price","CheckBookIsLiked","handleFavouriteIcon","SortSelector","Dropdown","Toggle","size","Menu","onSort","GenreSelector","genre","getGenresList","filterByGenre","Search","Button","BooksComponentPage","setUser","setGenre","sortBy","setSortBy","setCurrentPage","isLiked","setIsLiked","sleep","ms","resolve","setTimeout","getUser","profile","fetchData","sortType","result","startsWith","pageNumber","startIndex","take","paginate","count","getBookData","genres","currentProfile","arrayLiked","found","toast","info","warn","toastId","page","resizeCommentText","screenWidth","lineSize","commentWord","replace","split","commentParts","resizedComment","i","part","j","getCommentDate","commentDate","passdTime","now","parse","secondes","trunc","minutes","hours","days","weeks","months","years","userId","updateCommentCounter","updateCommentReplies","BookComment","newComment","setNewComment","showReplies","setShowReplies","reply","setReply","isReply","setIsReply","innerWidth","setInnerWidth","bookId","tx","document","getElementsByTagName","setAttribute","scrollHeight","OnInput","this","height","getBookComments","mapToUserName","handleCounter","tempComment","submitter_like_list","submitter_dislike_list","likeIndex","element","dislikeIndex","reload","handleSendButton","submitter","replyObject","body","replies","onChangeReply","handleCounterButtonColor","list","as","rows","commentObject","getElementById","handleSendCommentButton","created_at","whiteSpace","handleReplyButton","handleCancelButton","handleShowReplies","addOrder","isExpand","setIsExpand","isOrdered","setIsOrdered","handleTextExpand","CheckBookIsOrdered_Liked","found_ordered","found_liked","handleCartButton","orderObject","orderId","arrayOrders","handleFavouriteButton","publisher","summary","about_author","loadBook","match","params","SearchPage","query","titleHover","transform","titleLeave","transition","onMouseEnter","onMouseLeave","orderedBooks","setOrderedBooks","getOrderedBooks","validate","formSchema","formData","Joi","abortEarly","details","item","path","message","validateProperty","obj","schema","login","JSON","stringify","setUsername","setPassword","setErrors","required","label","errorsObject","Label","Control","disabled","register","setEmail","setCountry","setAge","password2","setPassword2","newUser","Home","marginBottom","NotFound","page_not_found","Alerts","prevProps","join","title","non_field_errors","addedToLiked","success","removedFromLiked","addedToCart","removedFromCart","passwordNotMatch","Component","withAlert","addBook","deleteBook","addUser","updateAllUser","deleteUser","AdminHome","imagesUrl","table","icon","tableAttributes","format","validation_type","search","filters","elementAdd","elementDelete","elementUpdate","urlForm","tableName","relatedProperty","related_id","property","alertOptions","timeout","position","App","template","AlertTemplate","autoClose","hideProgressBar","newestOnTop","closeOnClick","rtl","pauseOnFocusLoss","pauseOnHover","component","BookInfoPage","BooksMainComponent","Orders","Login","Register","AdminUpdateRoutes","AdminCreateRoutes","from","exact","ReactDOM","render","StrictMode"],"mappings":"saAIAA,IAAMC,SAASC,QAAUC,iDAEzBH,IAAMI,aAAaC,SAASC,IAAI,MAAQ,SAACC,GAErCA,EAAMF,UACNE,EAAMF,SAASG,QAAU,KACzBD,EAAMF,SAASG,OAOjB,OAAOC,QAAQC,OAAOH,MAQT,OACbI,IAAKX,IAAMW,IACXC,KAAMZ,IAAMY,KACZC,IAAKb,IAAMa,IACXC,MAAOd,IAAMc,MACbC,OAAQf,IAAMe,OACdC,OAXF,SAAgBC,GACdjB,IAAMC,SAASiB,QAAQC,OAAO,gBAAkBF,ICnB5CG,EAAQC,sBAAY,CACxBC,KAAM,SACNC,aAAc,CAAEC,IAAK,GAAIhB,OAAQ,MACjCiB,SAAU,CACRC,eAAgB,SAACC,EAAQC,GACvBD,EAAOH,IAAMI,EAAOC,QAAQL,IAC5BG,EAAOnB,OAASoB,EAAOC,QAAQrB,WAKrCsB,QAAQC,IAAIX,GAEsBA,EAAMY,QAAzBN,eAAR,IACQN,IAAf,QAGaa,EAAe,SAACT,EAAKhB,GAChC,MAAO,CACL0B,KAAMd,EAAMY,QAAQN,eAAeQ,KACnCL,QAAS,CAAEL,MAAKhB,YChBdY,EAAQC,sBAAY,CACxBC,KAAM,OACNC,aAAc,CACZY,MAAOC,aAAaC,QAAQ,SAC5BC,QAAS,KACTC,gBAAiB,KACjBC,WAAW,EACXC,KAAM,KACNC,SAAUN,aAAaC,QAAQ,aAEjCZ,SAAU,CACRkB,YAAa,SAACC,EAAMhB,GAClBgB,EAAKJ,WAAY,GAEnBK,WAAY,SAACD,EAAMhB,GACjBQ,aAAaU,QAAQ,WAAYlB,EAAOc,UACxCE,EAAKN,QAAUV,EAAOC,QAAQS,QAC9BM,EAAKL,iBAAkB,EACvBK,EAAKJ,WAAY,EACjBI,EAAKH,KAAOb,EAAOC,QACnBe,EAAKF,SAAWd,EAAOc,UAEzBK,UAAW,SAACH,EAAMhB,GAChBQ,aAAaY,WAAW,SACxBZ,aAAaY,WAAW,YACxBJ,EAAKT,MAAQ,KACbS,EAAKH,KAAO,KACZG,EAAKN,SAAU,EACfM,EAAKL,iBAAkB,EACvBK,EAAKJ,WAAY,GAEnBS,aAAc,SAACL,EAAMhB,GACnBQ,aAAaU,QAAQ,QAASlB,EAAOC,SAErCe,EAAKT,MAAQP,EAAOC,QACpBe,EAAKN,QAAUV,EAAOC,QAAQS,QAC9BM,EAAKL,iBAAkB,EACvBK,EAAKJ,WAAY,EACjBI,EAAKH,KAAOb,EAAOC,QAAQY,MAG7BS,UAAW,SAACN,EAAMhB,GAChBQ,aAAaY,WAAW,SACxBZ,aAAaY,WAAW,YACxBJ,EAAKT,MAAQ,KACbS,EAAKH,KAAO,KACZG,EAAKN,SAAU,EACfM,EAAKL,iBAAkB,EACvBK,EAAKJ,WAAY,GAEnBW,cAAe,SAACP,EAAMhB,GACpBQ,aAAaY,WAAW,SACxBZ,aAAaY,WAAW,YACxBJ,EAAKT,MAAQ,KACbS,EAAKH,KAAO,KACZG,EAAKN,SAAU,EACfM,EAAKL,iBAAkB,EACvBK,EAAKJ,WAAY,GAEnBY,gBAAiB,SAACR,EAAMhB,GACtBQ,aAAaU,QAAQ,QAASlB,EAAOC,QAAQM,OAC7CC,aAAaU,QAAQ,WAAYlB,EAAOC,QAAQa,UAChDE,EAAKN,SAAU,EACfM,EAAKL,iBAAkB,EACvBK,EAAKJ,WAAY,GAEnBa,aAAc,SAACT,EAAMhB,GACnBQ,aAAaY,WAAW,SACxBZ,aAAaY,WAAW,YACxBJ,EAAKT,MAAQ,KACbS,EAAKH,KAAO,KACZG,EAAKN,SAAU,EACfM,EAAKL,iBAAkB,EACvBK,EAAKJ,WAAY,MAKvBV,QAAQC,IAAIX,GAEL,MASHA,EAAMY,QACKZ,GAVR,EACLuB,YADK,EAELE,WAFK,EAGLE,UAHK,EAILE,aAJK,EAKLC,UALK,EAMLC,cANK,EAOLC,gBAPK,EAQLC,aAEajC,EAAf,SAGakC,EAAW,kBAAM,SAACC,EAAUC,GAEvCD,EAAS,CACPrB,KAAMd,EAAMY,QAAQW,YAAYT,OAGlCuB,EACG9C,IAAI,YAAa+C,EAAYF,IAC7BG,MAAK,SAACC,GAAD,OACJL,EAAS,CACPrB,KAAMd,EAAMY,QAAQa,WAAWX,KAC/BL,QAAS+B,EAAIC,KACbnB,SAAUkB,EAAIC,KAAKnB,cAGtBoB,OAAM,SAACC,GAAS,IAAD,IACdR,EAAStB,EAAY,UAAC8B,EAAI1D,gBAAL,aAAC,EAAcwD,KAAf,UAAqBE,EAAI1D,gBAAzB,aAAqB,EAAcG,SACxD+C,EAAS,CAAErB,KAAMd,EAAMY,QAAQe,UAAUb,YAkFlCwB,EAAc,SAACF,GAE1B,IAAMrB,EAAQqB,IAAWZ,KAAKT,MAGxB6B,EAAS,CACb9C,QAAS,CACP,eAAgB,qBAUpB,OALIiB,IACF6B,EAAO9C,QAAP,8BAA2CiB,GAC3C6B,EAAO9C,QAAQ,gBAAf,UAAoCiB,IAG/B6B,GCrNH5C,EAAQC,sBAAY,CACxBC,KAAM,WACNC,aAAc,GACdE,SAAU,CACRwC,gBAAiB,SAACC,EAAUtC,GAC1BsC,EAASA,SAAWtC,EAAOC,YAKjCC,QAAQC,IAAIX,GAEuBA,EAAMY,QAA1BiC,gBAAR,IACQ7C,IAAf,QAGa+C,EAAgB,SAAC3C,GAC7B,MAAM,CACHU,KAAMd,EAAMY,QAAQiC,gBAAgB/B,KACpCL,QAASL,I,iBChBP4C,EAAc,SAEdhD,EAAQC,sBAAY,CACxBC,KAAM,QACNC,aAAc,CAAE8C,MAAO,GAAIC,YAAa,IACxC7C,SAAU,CACR8C,UAAW,SAACF,EAAOzC,GACjByC,EAAMA,MAAMG,KAAK5C,EAAOC,UAE1B4C,YAAa,SAACJ,EAAOzC,GACnByC,EAAMA,MAAQzC,EAAOC,SAEvBgB,WAAY,SAACwB,EAAOzC,GAClByC,EAAMC,YAAc1C,EAAOC,SAE7B6C,kBAAmB,SAACL,EAAOzC,GACzB,IAAM+C,EAAQN,EAAMA,MAAMO,WAAU,SAACnC,GAAD,OAAUA,EAAKoC,MAAQjD,EAAOkD,MAClET,EAAMA,MAAMM,GAAS/C,EAAOC,SAE9BkD,YAAa,SAACV,EAAOzC,GACnB,IAAM+C,EAAQN,EAAMA,MAAMO,WAAU,SAACnC,GAAD,OAAUA,EAAKoC,MAAQjD,EAAOkD,MAC5DE,EAAOC,OAAOD,KAAKpD,EAAOC,QAAQqD,MACpCzC,EAAI,eAAQ4B,EAAMA,MAAMM,IAE5BK,EAAKG,SAAQ,SAACC,GACZ3C,EAAK,GAAD,OAAI2C,IAASxD,EAAOC,QAAQqD,KAAf,UAAuBE,OAG1Cf,EAAMA,MAAMM,GAASlC,GAEvB4C,YAAa,SAAChB,EAAOzC,GACnB,IAAM+C,EAAQN,EAAMA,MAAMO,WAAU,SAACnC,GAAD,OAAUA,EAAKqC,KAAOlD,EAAOkD,MACjET,EAAMA,MAAMiB,OAAOX,EAAO,OAKhC7C,QAAQC,IAAIX,GAEL,MAOHA,EAAMY,QACKZ,GARR,EACLmD,UADK,EAELE,YAFK,EAGL5B,WAHK,EAIL6B,kBAJK,EAKLK,YALK,EAMLM,YAEajE,EAAf,SAGamE,EAAY,yDAAM,WAAOhC,EAAUC,GAAjB,SAAAgC,EAAA,sEACvB/B,EACH9C,IAAIyD,EAAaV,EAAYF,IAC7BG,MAAK,SAACC,GACLL,EAAS,CACPrB,KAAMd,EAAMY,QAAQyC,YAAYvC,KAChCL,QAAS+B,EAAIC,UAGhBC,OAAM,SAACC,GAAD,aAASjC,QAAQC,IAAR,UAAYgC,EAAI1D,gBAAhB,aAAY,EAAcwD,SATf,2CAAN,yDAuEZ4B,EAAa,SAAChD,EAAMqC,GAAP,8CAAc,WAAOvB,EAAUC,GAAjB,+BAAAgC,EAAA,6DAClCE,EAAc,CAChBC,SAAS,EACTC,aAAc,IAIdlD,EAQED,EARFC,SACAmD,EAOEpD,EAPFoD,MACAC,EAMErD,EANFqD,SACAxD,EAKEG,EALFH,QACAyD,EAIEtD,EAJFsD,cACAC,EAGEvD,EAHFuD,YACAC,EAEExD,EAFFwD,IACAC,EACEzD,EADFyD,QAdoC,SAgBhCzC,EACH3C,MADG,UAECsD,EAFD,YAEgBU,EAFhB,KAGF,CACEpC,WACAmD,QACAC,WACAxD,UACAyD,gBACAC,cACAC,MACAC,WAEFxC,EAAYF,IAEbG,MAAK,SAACC,GACLL,EAAS,CACPrB,KAAMd,EAAMY,QAAQ+C,YAAY7C,KAChCL,QAAS+B,EAAIC,KACbiB,UAGHhB,OAAM,SAACC,GAAS,IAAD,IACdjC,QAAQC,IAAR,UAAYgC,EAAI1D,gBAAhB,aAAY,EAAcwD,MAC1B6B,EAAYC,SAAU,EACtBD,EAAYE,aAAZ,UAA2B7B,EAAI1D,gBAA/B,aAA2B,EAAcwD,QAzCP,gCA4C/B6B,GA5C+B,2CAAd,yDCzHpBtB,EAAc,SAEdhD,EAAQC,sBAAY,CACxBC,KAAM,QACNC,aAAc,CAAE4E,MAAO,GAAIC,YAAa,IACxC3E,SAAU,CACR4E,UAAW,SAACF,EAAOvE,GACjBuE,EAAM3B,KAAK5C,EAAOC,UAEpByE,YAAa,SAACH,EAAOvE,GACnBuE,EAAMA,MAAQvE,EAAOC,SAEvB0E,WAAY,SAACJ,EAAOvE,GAClBuE,EAAMC,YAAcxE,EAAOC,SAE7B2E,YAAa,SAACL,EAAOvE,GACnB,IAAM+C,EAAQwB,EAAMA,MAAMvB,WAAU,SAAC6B,GAAD,OAAUA,EAAK3B,KAAOlD,EAAOkD,MACjEqB,EAAMb,OAAOX,EAAO,OAK1B7C,QAAQC,IAAIX,GAEL,MAA+CA,EAAMY,QAC7CZ,GADR,EAAQiF,UAAR,EAAmBE,WAAnB,EAA+BC,YACvBpF,EAAf,SAGasF,EAAY,yDAAM,WAAOnD,GAAP,SAAAiC,EAAA,sEACvB/B,EACH9C,IAAIyD,GACJT,MAAK,SAACC,GACLL,EAAS,CACPrB,KAAMd,EAAMY,QAAQsE,YAAYpE,KAChCL,QAAS+B,EAAIC,UAGhBC,OAAM,SAACC,GAAD,OAASjC,QAAQC,IAAIgC,MATD,2CAAN,uDC7BnBK,EAAc,YAEdhD,EAAQC,sBAAY,CACxBC,KAAM,WACNC,aAAc,CAAEoF,SAAU,IAC1BlF,SAAU,CACRmF,eAAgB,SAACD,EAAU/E,GACzB+E,EAASA,SAAW/E,EAAOC,SAM7BgF,aAAc,SAACF,EAAU/E,GACvB+E,EAASA,SAASnC,KAAK5C,EAAOC,UAMhCiF,eAAgB,SAACH,EAAU/E,GACzB,IAAM+C,EAAQgC,EAASA,SAAS/B,WAC9B,SAACmC,GAAD,OAAaA,EAAQlC,MAAQjD,EAAOkD,MAElCiC,EAAO,eAAQJ,EAASA,SAAShC,IAErCoC,EAAQC,aAAepF,EAAOC,QAAQqD,KAAK8B,aACvCpF,EAAOC,QAAQqD,KAAK8B,aACpBD,EAAQC,aAEZD,EAAQE,eAAiBrF,EAAOC,QAAQqD,KAAK+B,eACzCrF,EAAOC,QAAQqD,KAAK+B,eACpBF,EAAQE,eAEZF,EAAQG,gBAAkBtF,EAAOC,QAAQqD,KAAKgC,gBAC1CtF,EAAOC,QAAQqD,KAAKgC,gBACpBH,EAAQG,gBAEZH,EAAQI,kBAAoBvF,EAAOC,QAAQqD,KAAKiC,kBAC5CvF,EAAOC,QAAQqD,KAAKiC,kBACpBJ,EAAQI,kBAEZJ,EAAQK,gBAAkBxF,EAAOC,QAAQqD,KAAKkC,gBAC1CxF,EAAOC,QAAQqD,KAAKkC,gBACpBL,EAAQK,gBAEZT,EAASA,SAAShC,GAASoC,MAKjCjF,QAAQC,IAAIX,GAEL,MAAwDA,EAAMY,QACtDZ,GADR,EAAQyF,aAAR,EAAsBQ,cAAtB,EAAqCC,eAC7BlG,EAAf,SAGamG,EAAe,kBAAM,SAAChE,GACjCE,EACG9C,IAAIyD,GACJT,MAAK,SAACC,GACLL,EAAS,CACPrB,KAAMd,EAAMY,QAAQ4E,eAAe1E,KACnCL,QAAS+B,EAAIC,UAGhBC,OAAM,SAACC,GAAD,OAASjC,QAAQC,IAAIgC,QAGnByD,EAAa,SAACT,GAAD,OAAa,SAACxD,EAAUC,GAChDC,EACG7C,KAAKwD,EAAa2C,EAASrD,EAAYF,IACvCG,MAAK,SAACC,GACLL,EAAS,CACPrB,KAAMd,EAAMY,QAAQ6E,aAAa3E,KACjCL,QAAS+B,EAAIC,UAGhBC,OAAM,SAACC,GAAD,OAASjC,QAAQC,IAAIgC,QC9E1BK,EAAc,UAEdhD,EAAQC,sBAAY,CACxBC,KAAM,SACNC,aAAc,CAAEkG,OAAQ,IACxBhG,SAAU,CACRiG,WAAY,SAACD,EAAQ7F,GACnB6F,EAAOA,OAAOjD,KAAK5C,EAAOC,UAE5B8F,aAAc,SAACF,EAAQ7F,GACrB6F,EAAOA,OAAS7F,EAAOC,SAEzB+F,YAAa,SAACH,EAAQ7F,GACpB,IAAM+C,EAAQ8C,EAAO7C,WAAU,SAACiD,GAAD,OAAWA,EAAMhD,MAAQjD,EAAOkD,MAC/D2C,EAAO9C,GAAS/C,EAAOC,SAEzBiG,aAAc,SAACL,EAAQ7F,GACrB,IAAM+C,EAAQ8C,EAAOA,OAAO7C,WAAU,SAACiD,GAAD,OAAWA,EAAMhD,MAAQjD,EAAOkD,MACtE2C,EAAOA,OAAOnC,OAAOX,EAAO,OAKlC7C,QAAQC,IAAIX,GAEL,OAAkDA,EAAMY,QAChDZ,IADR,GAAQsG,WAAR,GAAoBE,YAApB,GAAiCE,aACzB1G,EAAf,SAGa2G,GAAa,kBAAM,SAACxE,GAC/BE,EACG9C,IAAIyD,GACJT,MAAK,SAACC,GACLL,EAAS,CACPrB,KAAMd,EAAMY,QAAQ2F,aAAazF,KACjCL,QAAS+B,EAAIC,UAGhBC,OAAM,SAACC,GAAD,OAASjC,QAAQC,IAAIgC,QAenBiE,GAAc,SAAClD,GAAD,OAAQ,SAACvB,EAAUC,GAC5CC,EACG1C,OADH,UACaqD,EADb,YAC4BU,GAAMpB,EAAYF,IAC3CG,MAAK,SAACC,GACLL,EAAS,CACPrB,KAAMd,EAAMY,QAAQ8F,aAAa5F,KACjCL,QAAS+B,EAAIC,UAGhBC,OAAM,SAACC,GAAD,OAASjC,QAAQC,IAAIgC,Q,oBCxDjBkE,6BAAgB,CAC7BC,WACAtF,OACAyB,QACA8B,QACAQ,WACAc,UACA9F,SACAuC,aCXIiE,GAAa,CAACC,KAQLC,GANDC,sBACZC,GALmB,GAOnBC,8BAAoBC,kBAAe,WAAf,EAAmBN,M,0FCiVzC,IAOeO,uBAPS,SAACC,GAAD,MAAY,CAClCrG,QAASqG,EAAM/F,KAAKN,QACpBC,gBAAiBoG,EAAM/F,KAAKL,gBAC5BG,SAAUiG,EAAM/F,KAAKF,SACrByD,MAAOwC,EAAMxC,MAAMA,SAGmB,CAAEyC,ORrMpB,kBAAM,SAACrF,EAAUC,GACrC,IACED,EAAS,CAAErB,KAAMd,EAAMY,QAAQmB,cAAcjB,OAC7C,MAAO6B,GAAM,IAAD,IACZjC,QAAQC,IAAIgC,GACZR,EAAStB,EAAY,UAAC8B,EAAI1D,gBAAL,aAAC,EAAcwD,KAAf,UAAqBE,EAAI1D,gBAAzB,aAAqB,EAAcG,aQgM7CkI,EA1Vf,SAASG,EAAOC,GAAQ,IAAD,IACrBD,EAAOE,UAAY,CACjBzG,QAAS0G,KAAUC,KAAKC,WACxB3G,gBAAiByG,KAAUC,KAAKC,WAChCxG,SAAUsG,KAAUG,OAAOD,WAC3B/C,MAAO6C,KAAUI,MAAMF,WACvBN,OAAQI,KAAUK,KAAKH,YAGzB,MAAsCI,mBAAS,IAA/C,oBAAOC,EAAP,KAAoBC,EAApB,KACA,EAA8BF,oBAAS,GAAvC,oBAAOG,EAAP,KAAgBC,EAAhB,KACA,EAAwCJ,oBAAS,GAAjD,oBAAOK,EAAP,KAAqBC,EAArB,KAEMC,EAAaC,iBAAO,MAElBxH,EAA8CwG,EAA9CxG,QAASC,EAAqCuG,EAArCvG,gBAAiBG,EAAoBoG,EAApBpG,SAC9BqH,EADkDjB,EAAV3C,MACrB6D,QAAO,SAACvD,GAAD,OAC5BA,EAAKnF,KAAK2I,cAAcC,SAASX,EAAYU,kBAE/CF,EAAaA,EAAW3I,MAAM,EAAG,GAEjC,IAAI+I,EAAUC,cAEdtI,QAAQC,IAAIO,GAEZ+H,qBAAU,WAGR,OAFAC,OAAOC,iBAAiB,YAAaC,GAE9B,WACLF,OAAOG,oBAAoB,YAAaD,OAI5C,IAAMA,EAAqB,SAACE,GAC1B,IAAiBC,EAASd,EAAlBe,QACJD,IAASA,EAAKE,SAASH,EAAMI,SAC/BlB,GAAgB,IAIpB,SAASmB,EAASC,EAAKC,GACrB,OAAU,OAAHD,QAAG,IAAHA,OAAA,EAAAA,EAAKE,QAASD,EAAID,EAAIG,OAAO,EAAGF,EAAI,GAAK,MAAQD,EAG1D,IAAMI,EAAc,WAClB7I,EAAkBuG,EAAMF,SAAWuB,EAAQ3F,KAAK,WAG5C6G,EAAe,SAACC,GACpB9B,EAAe8B,EAAEC,cAAcC,QAG3BC,EAAW,SAACH,GACX/B,GAEH+B,EAAEI,iBACFvB,EAAQ3F,KAAR,kBAAwB+E,KAHRoC,MAAM,+BAO1B,OACE,gBAAC,IAAMC,SAAP,WACE,uBAAKC,UAAU,mBAAf,UACE,sBAAKA,UAAU,eAAeC,MAAO,CAAEC,MAAO,OAA9C,SACE,eAAC,QAAD,CAAMC,GAAG,IAAIF,MAAO,CAAEG,eAAgB,OAAQC,MAAO,QAArD,SACE,uCACO,mDAKV3J,GACC,sBAAKsJ,UAAU,cAAcC,MAAO,CAAEC,MAAO,OAA7C,SACE,qBAAGD,MAAO,CAAEI,MAAO,QAAnB,mBACQ,yBAAQJ,MAAO,CAAEI,MAAO,QAAxB,SAAmCxJ,SAK/C,eAACyJ,GAAA,EAAD,CAAMN,UAAU,cAAcC,MAAO,CAAEC,MAAO,MAAOK,OAAQ,UAAYX,SAAUA,EAAnF,SACE,eAACU,GAAA,EAAKE,MAAN,UACE,gBAACC,GAAA,EAAD,CACET,UAAU,OACVU,IAAK1C,EACL2C,QAAS,YACS,IAAZ/C,GAAmBC,GAAYD,IAJvC,UAOE,eAACgD,GAAA,EAAD,CACEC,YAAY,iBACZC,aAAW,iBACXC,mBAAiB,eACjBC,SAAUxB,IAEZ,eAACiB,GAAA,EAAWQ,OAAZ,UACE,oBACEjB,UAAU,2BACVW,QAASf,MAGZhC,GAAWF,GACV,uBAAKsC,UAAU,eAAf,oBACG9B,SADH,aACG,EAAYgD,KAAI,SAACtG,GAAD,OACf,uBACE+F,QAAS,kBACNlC,OAAO0C,SAASC,KAAhB,iBAAiCxG,EAAK5B,MAEzCgH,UAAU,wBAJZ,UAOE,sBACEqB,IAAG,UAAK/M,6CAAL,YAAuCsG,EAAK0G,OAC/CC,IAAK3G,EAAK0G,QAEZ,iCACE,6BACE,kCAASpC,EAAStE,EAAKnF,KAAM,QAE/B,qCAAOmF,EAAK4G,aAGd,0BAbK5G,EAAK5B,QAgBd,sBACE2H,QAAS,kBACNlC,OAAO0C,SAASC,KAAhB,kBAAkC1D,IAErCsC,UAAU,uBAJZ,SAME,sDAAwBtC,EAAxB,mBAQZ,sBACEsC,UAAU,cACVC,MAAO,CACLC,MAAO,OAHX,SAME,uBACEF,UAAU,aACVC,MAAO,CACLrC,QAAS,OACT6D,cAAe,MACfC,UAAW,SALf,UAQE,sBACEf,QAASpB,EACTS,UAAU,cACVC,MAAO,CAAEI,MAAO,OAAQsB,OAAQ,WAHlC,SAKGjL,EAAkB,SAAW,UAEhC,eAAC,QAAD,CAAMyJ,GAAG,SAASH,UAAU,cAAcC,MAAO,CAAEI,MAAO,QAA1D,mBAGC3J,GAAmBD,GAClB,eAAC,QAAD,CACE0J,GAAG,SACHH,UAAU,cACVC,MAAO,CAAEI,MAAO,QAHlB,mBAQD3J,GACC,eAAC,QAAD,CACEyJ,GAAG,UACHH,UAAU,cACVC,MAAO,CAAEI,MAAO,QAHlB,oBASF,uBAAML,UAAU,cAAhB,SACE,qBACEA,UAAU,wCACVoB,KAAK,4CAFP,UAIE,uBAAMpB,UAAU,OAAhB,SACE,oBAAGA,UAAU,mBAEf,0DAOV,uBAAKA,UAAU,2BAAf,UACE,uBAAKA,UAAU,YAAf,UACE,sBACEA,UAAU,eACVC,MAAO,CAAEC,MAAO,MAAO0B,SAAU,QAFnC,SAIE,eAAC,QAAD,CAAMzB,GAAG,IAAIF,MAAO,CAAEG,eAAgB,OAAQC,MAAO,QAArD,SACE,uCACO,mDAKV3J,GACC,sBACEsJ,UAAU,cACVC,MAAO,CAAEC,MAAO,MAAO0B,SAAU,QAFnC,SAIE,qBAAG3B,MAAO,CAAEI,MAAO,QAAnB,mBACQ,yBAAQJ,MAAO,CAAEI,MAAO,QAAxB,SAAmCxJ,SAK/C,sBACEmJ,UAAU,cACVC,MAAO,CACLC,MAAO,OAHX,SAME,uBACEF,UAAU,aACVC,MAAO,CACLrC,QAAS,OACT6D,cAAe,MACfC,UAAW,QACXE,SAAU,QANd,UASE,sBACEjB,QAASpB,EACTS,UAAU,cACVC,MAAO,CAAEI,MAAO,OAAQsB,OAAQ,WAHlC,SAKGjL,EAAkB,SAAW,UAEhC,eAAC,QAAD,CACEyJ,GAAG,SACHH,UAAU,cACVC,MAAO,CAAEI,MAAO,QAHlB,mBAQC3J,GAAmBD,GAClB,eAAC,QAAD,CACE0J,GAAG,SACHH,UAAU,cACVC,MAAO,CAAEI,MAAO,QAHlB,mBASD3J,GACC,eAAC,QAAD,CACEyJ,GAAG,UACHH,UAAU,cACVC,MAAO,CAAEI,MAAO,QAHlB,4BAYR,sBAAKL,UAAU,aAAf,SACE,eAACM,GAAA,EAAD,CAAML,MAAO,CAAEC,MAAO,OAASN,SAAUA,EAAzC,SACE,eAACU,GAAA,EAAKE,MAAN,UACE,gBAACC,GAAA,EAAD,CACET,UAAU,OACVU,IAAK1C,EACL2C,QAAS,YACc,IAAjB7C,GAAwBC,GAAiBD,IAJjD,UAOE,eAAC8C,GAAA,EAAD,CACEC,YAAY,iBACZC,aAAW,iBACXC,mBAAiB,eACjBC,SAAUxB,IAEZ,eAACiB,GAAA,EAAWQ,OAAZ,UACE,oBACEjB,UAAU,2BAEVW,QAASf,MAGZ9B,GAAgBJ,GACf,uBAAKsC,UAAU,eAAf,oBACG9B,SADH,aACG,EAAYgD,KAAI,SAACtG,GAAD,OACf,uBACE+F,QAAS,kBACNlC,OAAO0C,SAASC,KAAhB,iBAAiCxG,EAAK5B,MAEzCgH,UAAU,wBAJZ,UAOE,sBACEqB,IAAG,UAAK/M,6CAAL,YAAuCsG,EAAK0G,OAC/CC,IAAK3G,EAAK0G,QAEZ,iCACE,6BACE,kCAASpC,EAAStE,EAAKnF,KAAM,QAE/B,qCAAOmF,EAAK4G,aAGd,0BAbK5G,EAAK5B,QAgBd,sBACE2H,QAAS,kBACNlC,OAAO0C,SAASC,KAAhB,kBAAkC1D,IAErCsC,UAAU,uBAJZ,SAME,sDAAwBtC,EAAxB,8B,SC1PPmE,OAnFf,WACE,OACE,gBAAC,KAAD,CAAWxB,MAAM,eAAeL,UAAU,uBAA1C,UACE,eAAC,KAAD,CAAc8B,OAAK,EAAC9B,UAAU,2BAA9B,SACE,gBAAC,KAAD,WACE,gBAAC,KAAD,CAAQ+B,GAAG,IAAX,UACE,qBAAI/B,UAAU,QAAd,0BACA,yCACA,oBACEA,UAAU,qBACVoB,KAAK,sCAFP,SAIE,sBACEG,IAAI,WACJF,IAAI,gGAGR,oBACErB,UAAU,qBACVoB,KAAK,gCAFP,SAIE,sBACEG,IAAI,UACJF,IAAI,+FAGR,oBACErB,UAAU,qBACVoB,KAAK,uCAFP,SAIE,sBACEG,IAAI,YACJF,IAAI,iGAGR,oBACErB,UAAU,qBACVoB,KAAK,kDAFP,SAIE,sBACEG,IAAI,WACJF,IAAI,gGAGR,oBACErB,UAAU,qBACVoB,KAAK,8BAFP,SAIE,sBACEG,IAAI,SACJF,IAAI,iFACJpB,MAAO,CAAEC,MAAO,OAAQG,MAAO,kBAIrC,gBAAC,KAAD,CAAQ0B,GAAG,IAAX,UACE,qBAAI/B,UAAU,QAAd,mBACA,gCACE,qBAAIA,UAAU,gBAAd,SACE,oBAAGoB,KAAK,SAAR,qBAEF,qBAAIpB,UAAU,gBAAd,SACE,oBAAGoB,KAAK,0CAAR,6BAIF,qBAAIpB,UAAU,gBAAd,SACE,oBAAGoB,KAAK,oCAAR,sCAMV,sBAAKpB,UAAU,oCAAf,SACE,gBAAC,KAAD,CAAc8B,OAAK,EAAnB,mBACU,IAAIE,MAAOC,cADrB,cAC+C,IAC7C,oBAAGb,KAAK,4CAAR,oC,SCxCKc,GAjCE,SAACjF,GAQhB,IAAQkF,EAAqDlF,EAArDkF,YAAaC,EAAwCnF,EAAxCmF,SAAUC,EAA8BpF,EAA9BoF,YAAaC,EAAiBrF,EAAjBqF,aACtCC,EAAaC,KAAKC,KAAKN,EAAcC,GAC3C,GAAmB,IAAfG,EAAkB,OAAO,KAG7B,IADA,IAAIG,EAAQ,GAZc,WAajBC,GACPD,EAAM/J,KACJ,eAACiK,GAAA,QAAWC,KAAZ,CAEE7C,UAAW2C,IAAWN,EAAc,mBAAqB,YACzD1B,QAAS,kBAAM2B,EAAaK,IAH9B,SAKGA,GAJIA,KAHFA,EAAS,EAAGA,GAAUJ,EAAYI,IAAW,EAA7CA,GAYT,OACE,eAAC,IAAM5C,SAAP,UACE,eAAC6C,GAAA,QAAD,UAAaF,O,4BCyBJI,OArDf,SAAgC7F,GAAQ,IAAD,EAC7B8F,EAAc9F,EAAd8F,UAYFC,EAAe,WACnB,IAAIC,EAAYC,IAAEC,QAAQJ,EAAW,OAAQ,QAE7C,OADAE,EAAYC,IAAE3N,MAAM0N,EAAW,CAAC,GAAI,CAAC,MAMvC,OAHAD,IAIE,gBAAC,IAAMjD,SAAP,WACE,sBAAKC,UAAU,kBAAf,SACE,iDAEF,eAAC,KAAD,CACEoD,WAAW,EACXC,WAAW,EACXC,UAAU,EACVC,WA5Ba,CACjBC,QAAS,CACPC,WAAY,CAAEC,IAAK,IAAMC,IAAK,MAC9BjB,MAAO,GAETkB,OAAQ,CACNH,WAAY,CAAEC,IAAK,IAAKC,IAAK,GAC7BjB,MAAO,IAsBLmB,eAAe,EACfC,KAAK,EACLC,UAAU,EACVC,eAAe,qBACfC,aAAa,wBACbC,UAAU,8BAVZ,mBAYGlB,WAZH,aAYG,EAAgB9B,KAAI,SAACtG,GAAD,OACnB,+BACE,sBACEoF,UAAU,gBACVqB,IAAG,UAAK/M,6CAAL,YAAuCsG,EAAK0G,OAC/CC,IAAK3G,EAAKnF,KACVkL,QAAS,kBAAM1D,EAAMkH,aAAavJ,EAAK5B,SALjC4B,EAAK5B,c,SCNVoL,OAnCf,SAAoBnH,GAClB,IAAQ8F,EAAoB9F,EAApB8F,UAAWnM,EAASqG,EAATrG,KACnB,OACE,sBAAKoJ,UAAU,eAAf,gBACG+C,QADH,IACGA,OADH,EACGA,EAAW7B,KAAI,SAACtG,EAAM9B,GAAP,OACd,gBAACuL,GAAA,EAAD,CAAqBrE,UAAU,aAA/B,UACE,eAACqE,GAAA,EAAKC,IAAN,CACEC,QAAQ,MACRlD,IAAG,UAAK/M,6CAAL,YAAuCsG,EAAK0G,OAC/CC,IAAK3G,EAAKnF,KACVkL,QAAS,kBAAM1D,EAAMkH,aAAavJ,EAAK5B,QAEzC,gBAACqL,GAAA,EAAKG,KAAN,WACE,eAACH,GAAA,EAAKI,MAAN,UAAa7J,EAAKnF,OAElB,eAAC4O,GAAA,EAAKK,KAAN,UAAY9J,EAAK4G,SACjB,gBAAC6C,GAAA,EAAKK,KAAN,qBAAmB9J,EAAK+J,KAAxB,OACA,eAACN,GAAA,EAAKK,KAAN,UACE,oCAAS9J,EAAKgK,MAAd,UAEF,oBACE5E,UACE/C,EAAM4H,iBAAiBjK,GAAQ,cAAgB,gBAEjD+F,QAAS,WACP1D,EAAM6H,oBAAN,OAA0BlO,QAA1B,IAA0BA,OAA1B,EAA0BA,EAAMoC,IAAKF,EAAO8B,WApBzCA,EAAK5B,W,SCmBT+L,OAxBf,SAAsB9H,GACrB,OACE,+BACE,gBAAC+H,GAAA,EAAD,WACE,eAACA,GAAA,EAASC,OAAV,CAAiBV,QAAQ,UAAUtL,GAAG,iBAAiBiM,KAAK,KAA5D,qBAIA,gBAACF,GAAA,EAASG,KAAV,WACE,eAACH,GAAA,EAASnC,KAAV,CAAelC,QAAS,kBAAM1D,EAAMmI,OAAO,SAA3C,kBAGA,eAACJ,GAAA,EAASnC,KAAV,CAAelC,QAAS,kBAAM1D,EAAMmI,OAAO,UAA3C,mBAGA,eAACJ,GAAA,EAASnC,KAAV,CAAelC,QAAS,kBAAM1D,EAAMmI,OAAO,SAA3C,2BCOMC,OArBf,SAAuBpI,GAAQ,IAAD,EACpBqI,EAAiBrI,EAAjBqI,MAAOhL,EAAU2C,EAAV3C,MACf,OACE,+BACE,gBAAC0K,GAAA,EAAD,WACE,eAACA,GAAA,EAASC,OAAV,CAAiBV,QAAQ,SAAStL,GAAG,iBAAiBiM,KAAK,KAA3D,SACGI,IAGH,eAACN,GAAA,EAASG,KAAV,oBACGlI,EAAMsI,cAAcjL,UADvB,aACG,EAA4B4G,KAAI,SAACoE,GAAD,OAC/B,eAACN,GAAA,EAASnC,KAAV,CAA2BlC,QAAS,kBAAM1D,EAAMuI,cAAcF,IAA9D,SACGA,GADiBA,c,SCejBG,OAzBf,SAAgBxI,GACd,IAAQuC,EAAiBvC,EAAjBuC,aAER,OACE,sBAAKQ,UAAU,gBAAf,SACE,gBAACS,GAAA,EAAD,CACET,UAAU,OACVkF,KAAK,KAFP,UAIE,eAACtE,GAAA,EAAD,CACEC,YAAY,eACZC,aAAW,eACXC,mBAAiB,eACjBC,SAAUxB,IAEZ,eAACiB,GAAA,EAAWQ,OAAZ,UACE,eAACyE,GAAA,QAAD,CAAQnB,QAAQ,OAAOtE,MAAO,CAAEM,OAAQ,GAAKP,UAAU,aAAvD,4BC4LV,IAOenD,uBAPS,SAACC,GAAD,MAAY,CAClCxC,MAAOwC,EAAMxC,MAAMA,MACnB9B,MAAOsE,EAAMtE,MAAMA,MACnB3B,SAAUiG,EAAM/F,KAAKF,SACrBH,gBAAiBoG,EAAM/F,KAAKL,mBAGU,CAAEkD,aAAYtB,iBAAvCuE,EAtMf,SAAS8I,EAAmB1I,GAC1B0I,EAAmBzI,UAAY,CAC7B5C,MAAO6C,KAAUI,MAAMF,WACvB7E,MAAO2E,KAAUI,MAAMF,WACvBxG,SAAUsG,KAAUG,OAAOD,WAC3B3G,gBAAiByG,KAAUC,KAAKC,WAChCzD,WAAYuD,KAAUK,KAAKH,WAC3B/E,cAAe6E,KAAUK,KAAKH,YAGhC,IAAQ/C,EAA4C2C,EAA5C3C,MAAO9B,EAAqCyE,EAArCzE,MAAO3B,EAA8BoG,EAA9BpG,SAAUH,EAAoBuG,EAApBvG,gBAEhC,EAAwB+G,mBAAS,IAAjC,oBAAO7G,EAAP,KAAagP,EAAb,KACA,EAA0BnI,mBAAS,UAAnC,oBAAO6H,EAAP,KAAcO,EAAd,KACA,EAA4BpI,mBAAS,IAArC,oBAAOqI,EAAP,KAAeC,EAAf,KACA,EAAsCtI,mBAAS,IAA/C,oBAAOC,EAAP,KAAoBC,EAApB,KACA,EAAsCF,mBAAS,GAA/C,oBAAO4E,EAAP,KAAoB2D,EAApB,KACA,EAA8BvI,mBAAS,IAAvC,oBAAOwI,EAAP,KAAgBC,EAAhB,KAII5H,EAAUC,cAER4H,EAAQ,SAACC,GACb,OAAO,IAAIxR,SAAQ,SAACyR,GAAD,OAAaC,WAAWD,EAASD,OAGhDG,EAAU,WACd,IAAMC,EAAUhO,EAAM2F,QAAO,SAACvH,GAAD,OAAUA,EAAKC,WAAaA,KACzD+O,EAAQY,EAAQ,KAGlBhI,qBAAU,WAAM,4CACd,sBAAA7E,EAAA,sEACQwM,EAAM,KADd,OAEEI,IAFF,4CADc,uBAAC,WAAD,wBAKdE,KACC,CAACnM,EAAO9B,IAEX,IAAM2L,EAAe,SAAClL,GACpBqF,EAAQ3F,KAAR,iBAAuBM,KA4GzB,EAvEoB,SAACqM,EAAOoB,GAE1B,IAAIC,EAAS,GAab,OAXEA,EADEjJ,EACOpD,EAAM6D,QAAO,SAACvD,GAAD,OACpBA,EAAKnF,KAAK2I,cAAcwI,WAAWlJ,EAAYU,kBAEhC,WAAVkH,EAA6BhL,EACxBA,EAAM6D,QAAO,SAACvD,GAAD,OAAUA,EAAK0K,QAAUA,KAO7C,CAAEvC,UAxBM,SAACL,EAAOmE,EAAYzE,GACnC,IAAM0E,GAAcD,EAAa,GAAKzE,EACtC,OAAOc,IAAER,GAAOnN,MAAMuR,GAAYC,KAAK3E,GAAUzC,QAmB/BqH,CAFH9D,IAAEC,QAAQwD,EAAQD,EAAU,OAERrE,EAvEpB,GA0EK4E,MADR,WAAV3B,GAAuB5H,EAA6BiJ,EAAOtH,OAAtB/E,EAAM+E,QAyDlB6H,CAAY5B,EAAOQ,GAAxC/C,EAAR,EAAQA,UAAWkE,EAAnB,EAAmBA,MACnB,OACE,gBAAC,IAAMlH,SAAP,WACE,eAAC,GAAD,IACA,uBAAKC,UAAU,QAAf,UACE,eAAC,GAAD,CACEA,UAAU,kBACV+C,UAAW9F,EAAM3C,MACjB6J,aAAcA,IAGhB,uBAAKnE,UAAU,iBAAf,UACE,eAAC,GAAD,CAAcoF,OAjGP,SAACsB,GACdX,EAAUW,GACVV,EAAe,MAgGT,eAAC,GAAD,CACEV,MAAOA,EACPhL,MAAOA,EACPiL,cApHY,SAACjL,GACrB,IAAI6M,EAAS,CAAC,OAKd,OAJK,OAAL7M,QAAK,IAALA,KAAO4G,KAAI,SAACtG,IACiD,IAAvDuM,EAAOpO,WAAU,SAACuM,GAAD,OAAW1K,EAAK0K,QAAUA,MAC7C6B,EAAOxO,KAAKiC,EAAK0K,UAEd6B,GA+GC3B,cA5GY,SAACF,GACAO,EAAP,QAAVP,EAA0B,SAChBA,GACdU,EAAe,SA6GX,eAAC,GAAD,CAAQxG,aA9HO,SAACC,GACpBuG,EAAe,GACfrI,EAAe8B,EAAEC,cAAcC,UA8H3B,eAAC,GAAD,CACEoD,UAAWA,EACXnM,KAAMA,EACNuN,aAAcA,EACdU,iBAhFiB,SAACjK,GACxB,GAAIlE,EAAiB,CACnB,IACME,EADU4B,EAAM2F,QAAO,SAACvH,GAAD,OAAUA,EAAKC,WAAaA,KACpC,GAIfsD,EAHY,eACbvD,GAECuD,YAMN,OAAqB,KAJJ,OAAGA,QAAH,IAAGA,OAAH,EAAGA,EAAapB,WAC/B,SAACiD,GAAD,OAAWA,EAAMvG,OAASmF,EAAKnF,WAuE7BqP,oBA5DoB,SAAC7L,EAAIH,EAAO8B,GACtC,GAAKlE,EAIA,CACH,IAAI0Q,EAAc,eAAQxQ,GACpBuD,EAAgBiN,EAAhBjN,YACFkN,EAAU,aAAOlN,GACfmN,EAAQD,EAAWtO,WAAU,SAACiD,GAAD,OAAWA,EAAMvG,OAASmF,EAAKnF,QAClE,IAAe,IAAX6R,EAAc,CAChBD,EAAW1O,KAAKiC,GAChB,IAAI2C,EAAK,aAAO0I,GAChB1I,EAAMzE,IAAS,EACfoN,EAAW3I,GAEXgK,QAAMC,KAAK,4BAEN,CACLH,EAAW5N,OAAO6N,EAAO,GACzB,IAAI/J,EAAK,aAAO0I,GAChB1I,EAAMzE,IAAS,EACfoN,EAAW3I,GAEXgK,QAAME,KAAK,4BAGbL,EAAejN,YAAckN,EAC7BpK,EAAMrD,WAAWwN,EAAgBnO,QA1BjCsO,QAAM7S,MAAM,6CAA8C,CACxDgT,QAAS,oBA4DX,eAAC,GAAD,CACEvF,YAAa8E,EACb7E,SAnKW,EAoKXC,YAAaA,EACbC,aA9GmB,SAACqF,GACxB3B,EAAe2B,MA+Gb,eAAC,GAAD,UCxMC,SAASC,GAAkB1M,EAAS2M,GACzC,IAAIC,EAAW,EASf,GAPID,EAAc,OAAMC,EAAW,IAC/BD,EAAc,OAAMC,EAAW,IAC/BD,EAAc,OAAMC,EAAW,IAC/BD,EAAc,MAAKC,EAAW,IAC9BD,EAAc,MAAKC,EAAW,IAC9BD,EAAc,MAAKC,EAAW,GAE9BA,EAAW,EAAG,CAIhB,IAHA,IAAMC,EAAc7M,EAAQ8M,QAAQ,KAAK,IAAIC,MAAM,KAC7CC,EAAeH,EAAY1I,OAASyI,EACtCK,EAAiB,GACZC,EAAI,EAAGA,EAAIF,EAAcE,IAAK,CAErC,IADA,IAAIC,EAAO,GACFC,EAAI,EAAGA,EAAIR,EAAUQ,IACxBP,EAAYK,EAAIN,EAAWQ,KAC7BD,EAAOA,EAAON,EAAYK,EAAIN,EAAWQ,GAAK,KAIlDH,EAAiBA,EAAiBE,EAAO,KAG3C,OAAOF,EAGT,OAAOjN,EAGF,SAASqN,GAAeC,GAE7B,IAAMC,EAAYzG,KAAK0G,MAAQ1G,KAAK2G,MAAMH,GACpCI,EAAWpG,KAAKqG,MAAMJ,EAAY,KAClCK,EAAUtG,KAAKqG,MAAMJ,EAAS,KAC9BM,EAAQvG,KAAKqG,MAAMJ,EAAS,MAC5BO,EAAOxG,KAAKqG,MAAMJ,EAAS,OAC3BQ,EAAQzG,KAAKqG,MAAMJ,EAAS,QAC5BS,EAAS1G,KAAKqG,MAAMJ,EAAS,QAC7BU,EAAQ3G,KAAKqG,MAAMJ,EAAS,SAElC,OAAIG,EAAW,GAAW,MACtBE,EAAU,EAAS,GAAN,OAAUA,EAAV,eACbA,EAAU,GAAU,GAAN,OAAUA,EAAV,gBACdC,EAAQ,EAAS,GAAN,OAAUA,EAAV,aACXA,EAAQ,GAAU,GAAN,OAAUA,EAAV,cACZC,EAAO,EAAS,GAAN,OAAUA,EAAV,YACVA,EAAO,EAAS,GAAN,OAAUA,EAAV,aACVC,EAAQ,EAAS,GAAN,OAAUA,EAAV,aACXA,EAAQ,EAAS,GAAN,OAAUA,EAAV,cACXC,EAAS,EAAS,GAAN,OAAUA,EAAV,cACZA,EAAS,GAAU,GAAN,OAAUA,EAAV,eACI,GAAN,OAAUC,EAArBA,EAAQ,EAAG,YACf,cCiTF,IAQetM,uBARS,SAACC,GAAD,YAAY,CAClChC,SAAUgC,EAAMhC,SAASA,SACzBtC,MAAOsE,EAAMtE,MAAMA,MACnB9B,gBAAiBoG,EAAM/F,KAAKL,gBAC5BG,SAAUiG,EAAM/F,KAAKF,SACrBuS,OAAM,UAAEtM,EAAM/F,KAAKH,YAAb,aAAE,EAAiBoC,OAGa,CACtC2C,aACA0N,qBdhSkC,SAACnO,EAASjC,GAAV,OAAiB,SAACvB,EAAUC,GAC9D,IAAQwD,EACND,EADMC,aAAcC,EACpBF,EADoBE,eAAgBC,EACpCH,EADoCG,gBAAiBC,EACrDJ,EADqDI,kBAGvD1D,EACG3C,MADH,UAEOsD,EAFP,YAEsBU,EAFtB,KAGI,CACEkC,eACAC,iBACAC,kBACAC,qBAEFzD,EAAYF,IAEbG,MAAK,SAACC,GACLL,EAAS,CACPrB,KAAMd,EAAMY,QAAQ8E,eAAe5E,KACnCL,QAAS+B,EAAIC,KACbiB,UAGHhB,OAAM,SAACC,GAAD,OAASjC,QAAQC,IAAIgC,Qc2Q9BoR,qBdxQkC,SAACpO,EAASjC,GAAV,OAAiB,SAACvB,EAAUC,GAC9D,IAAQ4D,EAAoBL,EAApBK,gBAER3D,EACG3C,MADH,UAEOsD,EAFP,YAEsBU,EAFtB,KAGI,CACEsC,mBAEF1D,EAAYF,IAEbG,MAAK,SAACC,GACLL,EAAS,CACPrB,KAAMd,EAAMY,QAAQ8E,eAAe5E,KACnCL,QAAS+B,EAAIC,KACbiB,UAGHhB,OAAM,SAACC,GAAD,OAASjC,QAAQC,IAAIgC,ScmPjB2E,EArWf,SAAS0M,EAAYtM,GACnBsM,EAAYrM,UAAY,CACtBpC,SAAUqC,aAAUI,MAAMF,WAC1B7E,MAAO2E,aAAUI,MAAMF,WACvB3G,gBAAiByG,aAAUC,KAAKC,WAChCxG,SAAUsG,aAAUG,OAAOD,WAC3B+L,OAAQjM,aAAUwF,OAAOtF,WAEzB1B,WAAYwB,aAAUK,KAAKH,WAC3BgM,qBAAsBlM,aAAUK,KAAKH,WACrCiM,qBAAsBnM,aAAUK,KAAKH,YAGvC,MAAoCI,mBAAS,IAA7C,oBAAO+L,EAAP,KAAmBC,EAAnB,KACA,EAAwChM,mBAAS,IAAjD,oBAEA,GAFA,UAEsCA,mBAAS,KAA/C,oBAAOiM,EAAP,KAAoBC,EAApB,KACA,EAA0BlM,mBAAS,IAAnC,oBAAOmM,EAAP,KAAcC,EAAd,KACA,EAA8BpM,mBAAS,IAAvC,oBAAOqM,EAAP,KAAgBC,EAAhB,KACC,EAAoCtM,mBAClCgB,OAAOuL,YADT,oBAAOA,EAAP,KAAmBC,EAAnB,KAIOvT,EAA+DuG,EAA/DvG,gBAAiBG,EAA8CoG,EAA9CpG,SAAUqT,EAAoCjN,EAApCiN,OAAQd,EAA4BnM,EAA5BmM,OAAQtO,EAAoBmC,EAApBnC,SAAUtC,EAAUyE,EAAVzE,MAG3DiG,OAAOC,iBAAiB,UAAU,WAE9B,OADAuL,EAAcxL,OAAOuL,YACdvL,OAAOuL,cAMlB,IADA,IAAIG,EAAKC,SAASC,qBAAqB,YAC9BjC,EAAI,EAAGA,EAAI+B,EAAG9K,OAAQ+I,IAC7B+B,EAAG/B,GAAGkC,aACJ,QACA,UAAYH,EAAG/B,GAAGmC,aAAe,yBAEnCJ,EAAG/B,GAAG1J,iBAAiB,QAAS8L,GAAS,GAI7C,SAASA,EAAQ/K,GACfgL,KAAKxK,MAAMyK,OAAS,OACpBD,KAAKxK,MAAMyK,OAASD,KAAKF,aAAe,KAK1C,IAAMI,EAAkB,SAAC1R,EAAI6B,GAG3B,OAFqBA,EAASqD,QAAO,SAACjD,GAAD,aAAa,UAAAA,EAAQN,YAAR,eAAc5B,OAAQC,MAKpE2R,EAAgB,SAACxB,EAAQ5Q,GAAW,IAAD,EAEvC,iBADaA,EAAM2F,QAAO,SAACvH,GAAD,OAAUA,EAAKoC,MAAQoQ,KACrC,UAAZ,aAAO,EAASvS,UA+CZgU,EAAa,uCAAG,WAAO3P,EAASjC,EAAI5C,GAApB,uBAAAsD,EAAA,yDACfjD,EADe,gBAElB6Q,QAAM7S,MAAM,6CAA8C,CACxDgT,QAAS,cAHO,8BAOdoD,EAPc,eAOK5P,GAEnB6P,EATc,aASYD,EAAY1P,gBACtC4P,EAVc,aAUeF,EAAYxP,mBAGvC2P,EAAYF,EAAoBhS,WACpC,SAACmS,GAAD,OAAaA,IAAYrU,KAErBsU,EAAeH,EAAuBjS,WAC1C,SAACmS,GAAD,OAAaA,IAAYrU,KAGd,cAATR,KACiB,IAAf4U,GACFF,EAAoBpS,KAAK9B,GACzBiU,EAAY3P,gBAEU,IAAlBgQ,IACFH,EAAuBvR,OAAO0R,EAAc,GAC5CL,EAAYzP,kBACwB,IAAhCyP,EAAYzP,iBACdoD,OAAO0C,SAASiK,YAIpBL,EAAoBtR,OAAOwR,EAAW,GACtCH,EAAY3P,eACqB,IAA7B2P,EAAY3P,cACdsD,OAAO0C,SAASiK,WAIT,cAAT/U,KACoB,IAAlB8U,GACFH,EAAuBrS,KAAK9B,GAC5BiU,EAAYzP,mBAEO,IAAf4P,IACFF,EAAoBtR,OAAOwR,EAAW,GACtCH,EAAY3P,eACqB,IAA7B2P,EAAY3P,cACdsD,OAAO0C,SAASiK,YAIpBJ,EAAuBvR,OAAO0R,EAAc,GAC5CL,EAAYzP,kBACwB,IAAhCyP,EAAYzP,iBACdoD,OAAO0C,SAASiK,WAMtBN,EAAY1P,eAAiB2P,EAC7BD,EAAYxP,kBAAoB0P,EA/Dd,UAgEZ/N,EAAMoM,qBAAqByB,EAAa7R,GAhE5B,4CAAH,0DAqEboS,EAAgB,uCAAG,WAAOnQ,EAASjC,EAAIqS,EAAWxS,GAA/B,qBAAAa,EAAA,yDAClBiQ,EADkB,gBACXrC,QAAM7S,MAAM,6BADD,8BAGjBoW,EAHiB,eAGE5P,GACnBqQ,EAAc,CAAED,YAAWE,KAAM5B,IACjC6B,EALiB,aAKHX,EAAYvP,kBAEtB5C,KAAK4S,GACbT,EAAYvP,gBAAkBkQ,EART,UASfxO,EAAMqM,qBAAqBwB,EAAa7R,GATzB,SAYjBsE,EAZiB,aAYLuM,IACVhR,IAAS,EACfiR,EAAWxM,GAdU,4CAAH,4DA6BhBmO,EAAgB,SAACjM,GACrBoK,EAASpK,EAAEC,cAAcC,MAAMqI,QAAQ,IAAK,SAGxC2D,EAA2B,SAACC,GAEhC,OAAe,KADJ,OAAGA,QAAH,IAAGA,OAAH,EAAGA,EAAM7S,WAAU,SAACmS,GAAD,OAAaA,IAAYrU,MAC9B,OACb,gBAOd,OAJA2H,qBAAU,WACRmM,EAAgBT,EAAQpP,KACvB,CAACA,IAGF,eAAC,IAAMiF,SAAP,UACE,uBAAKC,UAAU,iBAAf,UACE,eAACS,GAAA,EAAD,CAAYT,UAAU,eAAtB,SACE,eAACY,GAAA,EAAD,CACE3H,GAAG,eACH4S,GAAG,WACHC,KAAM,EACNjL,YAAY,sBACZC,aAAW,iBACXC,mBAAiB,eACjBC,SA7Bc,SAACvB,GACvBgK,EAAchK,EAAEC,cAAcC,MAAMqI,QAAQ,IAAK,aA+B7C,eAACtC,GAAA,QAAD,CACE1F,UAAU,kBACVuE,QAAQ,oBACR5D,QAAS,kBA5Ke,SAACzF,GAC/B,IAAKxE,EACH,OAAO6Q,QAAM7S,MAAM,6CAA8C,CAC/DgT,QAAS,cAEb,IAAK8B,EAAY,OAAOjC,QAAM7S,MAAM,+BAElC,IAAIqX,EAAgB,GACpBA,EAAc7Q,QAAUA,EACxB6Q,EAAc3C,OAASA,EACvB2C,EAAc7B,OAASA,EACvBjN,EAAMtB,WAAWoQ,GAIS3B,SAAS4B,eAAe,gBAChCrM,MAAQ,GA4JPsM,CAAwBzC,IAHzC,kBAOA,sBAAKxJ,UAAU,eAAf,SACG2K,EAAgBT,EAAQpP,GAAUoG,KAAI,SAAChG,EAASpC,GAAV,eACrC,uBAAuBkH,UAAU,gBAAjC,UACE,uBAAKA,UAAU,kBAAf,UACE,yBAAQA,UAAU,qBAAlB,SACG4K,EAAa,UAAC1P,EAAQtE,YAAT,aAAC,EAAcoC,IAAKR,KAEpC,oBAAGwH,UAAU,gBAAb,SACGuI,GAAerN,EAAQgR,iBAG5B,oBAAGjM,MAAO,CAAEkM,WAAY,OAAxB,SAAkCvE,GAAkB1M,EAAQA,QAAS8O,KACrE,uBAAKhK,UAAU,qBAAf,UACE,oBACEA,UAAS,0BAAqB2L,EAC5BzQ,EAAQE,iBAEVuF,QAAS,kBACPkK,EAAc3P,EAASA,EAAQlC,IAAK,cALxC,SAQGkC,EAAQC,eAEX,oBACE6E,UAAS,4BAAuB2L,EAC9BzQ,EAAQI,oBAEVqF,QAAS,kBACPkK,EAAc3P,EAASA,EAAQlC,IAAK,cALxC,SAQGkC,EAAQG,kBAEX,eAACqK,GAAA,QAAD,CACEnB,QAAQ,QACRW,KAAK,KACLvE,QAAS,kBAjMC,SAAC7H,GACzB,GAAKpC,EAIA,CACH,IAAI6G,EAAK,aAAOuM,GAChBvM,EAAMzE,IAAS,EACfiR,EAAWxM,QANXgK,QAAM7S,MAAM,6CAA8C,CACxDgT,QAAS,cA8LgB0E,CAAkBtT,IAHnC,sBAQDgR,EAAQhR,IACP,uBAAKkH,UAAU,iBAAf,UACE,wBACEA,UAAU,wBACVa,YAAY,iBACZC,aAAW,iBACXC,mBAAiB,eACjBC,SAAU0K,IAGZ,uBAAK1L,UAAU,yBAAf,UACE,eAAC0F,GAAA,QAAD,CACEnB,QAAQ,eACR5D,QAAS,kBAvMF,SAAC7H,GAC1B,GAAKpC,EAIA,CACH,IAAI6G,EAAK,aAAOuM,GAChBvM,EAAMzE,IAAS,EACfiR,EAAWxM,QANXgK,QAAM7S,MAAM,6CAA8C,CACxDgT,QAAS,cAoMoB2E,CAAmBvT,IAFpC,oBAMA,eAAC4M,GAAA,QAAD,CACEnB,QAAQ,oBACR5D,QAAS,kBACP0K,EAAiBnQ,EAASA,EAAQlC,IAAKnC,EAAUiC,IAHrD,wBAWN,sBACEkH,UAAU,uBACVW,QAAS,kBApHG,SAAC7H,GACzB,IAAIyE,EAAK,aAAOmM,GAChBnM,EAAMzE,IAAUyE,EAAMzE,GACtB6Q,EAAepM,GAiHY+O,CAAkBxT,IAFnC,SAIG4Q,EAAY5Q,GACX,gBAAC,IAAMiH,SAAP,WACE,oBAAGC,UAAU,kBACb,iDAGF,gBAAC,IAAMD,SAAP,WACE,oBAAGC,UAAU,oBACb,mDAKN,sBAAKA,UAAU,mBAAf,SACG0J,EAAY5Q,KAAZ,UACCoC,EAAQK,uBADT,aACC,EAAyB2F,KAAI,SAAC0I,EAAO9Q,GAAR,OAC3B,uBAAiBkH,UAAU,iBAA3B,UACE,kCAAS4J,EAAM0B,YACf,oBACEtL,UAAU,oBACVC,MAAO,CAAEkM,WAAY,OAFvB,SAIEvE,GACQgC,EAAM4B,KACNxB,OARFlR,WAvFRoC,EAAQlC,kBCnD9B,IAQe6D,uBARS,SAACC,GAAD,MAAY,CAClClC,KAAMkC,EAAMxC,MAAMC,YAClB/B,MAAOsE,EAAMtE,MAAMA,MACnBoD,OAAQkB,EAAMlB,OAAOA,OACrB/E,SAAUiG,EAAM/F,KAAKF,SACrBH,gBAAiBoG,EAAM/F,KAAKL,mBAGU,CACtCkD,aACA2S,SdxKsB,SAACvQ,GAAD,OAAW,SAACtE,EAAUC,GAC5CC,EACG7C,KAAKwD,EAAayD,EAAOnE,EAAYF,IACrCG,MAAK,SAACC,GACLL,EAAS,CACPrB,KAAMd,EAAMY,QAAQ0F,WAAWxF,KAC/BL,QAAS+B,EAAIC,UAGhBC,OAAM,SAACC,GAAD,OAASjC,QAAQC,IAAIgC,QcgK9BiE,eACA7D,iBAJauE,EA1Mf,SAAkBI,GAShB,IAAQrC,EAAwCqC,EAAxCrC,KAAMhE,EAAkCqG,EAAlCrG,KAAMgF,EAA4BqB,EAA5BrB,OAAQlF,EAAoBuG,EAApBvG,gBAC5B,EAAgC+G,mBAAS,EAAC,GAAO,IAAjD,oBAAO+O,EAAP,KAAiBC,EAAjB,KACA,EAAkChP,oBAAS,GAA3C,oBAAOiP,EAAP,KAAkBC,EAAlB,KACA,EAA8BlP,oBAAS,GAAvC,oBAAOwI,EAAP,KAAgBC,EAAhB,KAEMC,EAAQ,SAACC,GACb,OAAO,IAAIxR,SAAQ,SAACyR,GAAD,OAAaC,WAAWD,EAASD,OAGtD,SAASlH,EAASC,EAAKC,EAAGgJ,GACxB,OAAoB,IAAhBoE,EAASpE,KACD,OAAHjJ,QAAG,IAAHA,OAAA,EAAAA,EAAKE,QAASD,EAAID,EAAIG,OAAO,EAAGF,EAAI,GAAK,MACtCD,EAGd,IAAMyN,EAAmB,SAAC9T,GACxB,IAAIyE,EAAK,aAAOiP,GAChBjP,EAAMzE,IAAUyE,EAAMzE,GACtB2T,EAAYlP,IAGRsP,EAAwB,uCAAG,oCAAAlT,EAAA,sEACzBwM,EAAM,GADmB,OAE3BzP,IACE0Q,EADe,eACOxQ,GAEpBsD,EAAkBkN,EAAlBlN,cACA4S,EAJa,OAIG5S,QAJH,IAIGA,OAJH,EAIGA,EAAenB,WACnC,SAACiD,GAAD,OAAWA,EAAMvG,OAASmF,EAAKnF,QAG/BkX,GADqB,IAAnBG,GAME3S,EAAgBiN,EAAhBjN,YACA4S,EAda,OAcC5S,QAdD,IAcCA,OAdD,EAcCA,EAAapB,WAC/B,SAACiD,GAAD,OAAWA,EAAMvG,OAASmF,EAAKnF,QAG/ByQ,GADmB,IAAjB6G,IAnByB,2CAAH,qDA2B9BvO,qBAAU,cAAU,CAACkO,EAAWzG,IAChC4G,IAEA,IAAMG,EAAgB,uCAAG,WAAO/T,GAAP,2BAAAU,EAAA,yDAClBjD,EADkB,yCAEd6Q,QAAM7S,MAAM,6CAA8C,CAC/DgT,QAAS,eAHU,QAOjBuF,EAAc,IACN7D,OAASnQ,EACrBgU,EAAY/C,OAAStP,EAAK5B,IAEpBkU,EAXe,UAWLtR,EAAOuC,QACrB,SAACnC,GAAD,OAAWA,EAAMpB,KAAK5B,MAAQ4B,EAAK5B,KAAOgD,EAAMpF,KAAKoC,MAAQC,KAC7D,UAbmB,aAWL,EAEVD,IACN0T,EAAYzP,EAAMd,YAAY+Q,GAAWjQ,EAAMsP,SAASU,GAGpD7F,EAjBiB,eAiBKxQ,GACpBsD,EAAkBkN,EAAlBlN,cACFiT,EAnBiB,aAmBCjT,IAEP,KADToN,EAAQ6F,EAAYpU,WAAU,SAACiD,GAAD,OAAWA,EAAMvG,OAASmF,EAAKnF,UAEjE0X,EAAYxU,KAAKiC,GACjB+R,GAAa,GAEbpF,QAAMC,KAAK,mBAEX2F,EAAY1T,OAAO6N,EAAO,GAC1BqF,GAAa,GAEbpF,QAAME,KAAK,sBAEbL,EAAelN,cAAgBiT,EAC/BlQ,EAAMrD,WAAWwN,EAAgBnO,GAjCZ,4CAAH,sDAqChBmU,EAAqB,uCAAG,WAAOnU,GAAP,qBAAAU,EAAA,yDACvBjD,EADuB,yCAEnB6Q,QAAM7S,MAAM,6CAA8C,CAC/DgT,QAAS,eAHe,OAMtBN,EANsB,eAMAxQ,GACpBuD,EAAgBiN,EAAhBjN,YACFkN,EARsB,aAQLlN,IAEN,KADTmN,EAAQD,EAAWtO,WAAU,SAACiD,GAAD,OAAWA,EAAMvG,OAASmF,EAAKnF,UAEhE4R,EAAW1O,KAAKiC,GAChBsL,GAAW,GAEXqB,QAAMC,KAAK,0BAEXH,EAAW5N,OAAO6N,EAAO,GACzBpB,GAAW,GAEXqB,QAAME,KAAK,4BAEbL,EAAejN,YAAckN,EAC7BpK,EAAMrD,WAAWwN,EAAgBnO,GAtBP,4CAAH,sDA0B3B,OACE,eAAC,IAAM8G,SAAP,UACE,uBAAKC,UAAU,kBAAf,UACE,qBAAIA,UAAU,uBAAd,SAAsCpF,EAAKnF,OAE1CmF,EAAK0G,OACJ,sBAAKtB,UAAU,YAAf,SACE,sBACEqB,IAAG,UAAK/M,6CAAL,YAAuCsG,EAAK0G,OAC/CC,IAAK3G,EAAK0G,UAIhB,uBAAKtB,UAAU,aAAf,UACE,qBAAIA,UAAU,cAAd,SAA6BpF,EAAKnF,OAClC,sBAAIuK,UAAU,eAAd,sBAAuCpF,EAAK4G,UAC5C,sBAAIxB,UAAU,cAAd,qBAAqCpF,EAAK0K,SAC1C,sBAAItF,UAAU,kBAAd,yBAA6CpF,EAAKyS,aAClD,uBAAKrN,UAAU,iBAAf,UACE,sBAAIA,UAAU,cAAd,qBACU,oCAASpF,EAAKgK,MAAd,WAEV,uBAAK5E,UAAU,gBAAf,UACE,gBAAC0F,GAAA,QAAD,CACEnB,QAAQ,OACRvE,UAAU,WACVW,QAAS,kBAAMqM,EAAgB,OAACpW,QAAD,IAACA,OAAD,EAACA,EAAMoC,MAHxC,UAKE,oBAAGgH,UAAU,yBAEZ0M,EAAY,mBAAqB,iBAEpC,gBAAChH,GAAA,QAAD,CACEnB,QAAQ,QACRvE,UAAU,gBACVW,QAAS,kBAAMyM,EAAqB,OAACxW,QAAD,IAACA,OAAD,EAACA,EAAMoC,MAH7C,UAKE,oBAAGgH,UAAU,oBACZiG,EAAU,yBAA2B,6BAI5C,8CACA,+BACG/G,EAAStE,EAAK0S,QAAS,IAAK,GAC7B,oBACEtN,UAAU,mBACVC,MAAO,CAAEI,MAAO,OAAQuB,SAAU,OAClCjB,QAAS,kBAAMiM,EAAiB,IAHlC,SAKGJ,EAAS,GAAK,SAAW,cAI9B,+CACA,+BACGtN,EAAStE,EAAK2S,aAAc,IAAK,GAClC,oBACEvN,UAAU,mBACVC,MAAO,CAAEI,MAAO,OAAQuB,SAAU,OAClCjB,QAAS,kBAAMiM,EAAiB,IAHlC,SAKGJ,EAAS,GAAK,SAAW,yBCtJxC,IAMe3P,uBANS,SAACC,GAAD,MAAY,CAClClC,KAAMkC,EAAMxC,MAAMC,YAClB1D,SAAUiG,EAAM/F,KAAKF,SACrB2B,MAAOsE,EAAMtE,MAAMA,SAGmB,CACtCgV,SjBNsB,SAACvU,GAAD,8CAAQ,WAAOvB,GAAP,SAAAiC,EAAA,sEACxB/B,EACH9C,IADG,UACIyD,EADJ,YACmBU,EADnB,MAEHnB,MAAK,SAACC,GACLL,EAAS,CACPrB,KAAMd,EAAMY,QAAQuE,WAAWrE,KAC/BL,QAAS+B,EAAIC,KACbiB,UAGHhB,OAAM,SAACC,GAAD,OAASjC,QAAQC,IAAIgC,MAVA,2CAAR,wDiBKT2E,EAzCf,SAAsBI,GAOpB,IAAMiN,EAASjN,EAAMwQ,MAAMC,OAAOzU,GAC1B2B,EAA0BqC,EAA1BrC,KAAM/D,EAAoBoG,EAApBpG,SAAU2B,EAAUyE,EAAVzE,MACxB,EAAwBiF,mBAAS,IAAjC,oBAAO7G,EAAP,KAAagP,EAAb,KAYA,OALApH,qBAAU,WACRvB,EAAMuQ,SAAStD,GAND,WACd,IAAM1D,EAAUhO,EAAM2F,QAAO,SAACvH,GAAD,OAAUA,EAAKC,WAAaA,KACzD+O,EAAQY,EAAQ,IAKhBD,KACC,CAAC/N,IAGF,gBAAC,IAAMuH,SAAP,WACE,eAAC,GAAD,IACA,eAAC,GAAD,CAAUnF,KAAMA,EAAMhE,KAAMA,IAC5B,uBAAKoJ,UAAU,sBAAf,UACE,2CAEA,eAAC,GAAD,CAAakK,OAAQtP,EAAK5B,SAE5B,eAAC,GAAD,IARF,UC2DJ,IAIe6D,uBAJS,SAACC,GAAD,MAAY,CAClCxC,MAAOwC,EAAMxC,MAAMA,SAGmB,GAAzBuC,EAvFf,SAAS8Q,EAAW1Q,GAClB0Q,EAAWzQ,UAAY,CACrB5C,MAAO6C,KAAUI,MAAMF,YAGzB,IAAIiB,EAAUC,cAENjE,EAAU2C,EAAV3C,MACFsT,EAAQ3Q,EAAMwQ,MAAMC,OAAOE,MAC3B1P,EAAa5D,EAAM6D,QAAO,SAACvD,GAAD,OAC9BA,EAAKnF,KAAK2I,cAAcC,SAASuP,EAAMxP,kBAMnC+F,EAAe,SAAClL,GACpBqF,EAAQ3F,KAAR,iBAAuBM,KAGnB4U,EAAa,SAACpO,GAClBA,EAAER,OAAOgB,MAAMI,MAAQ,UACvBZ,EAAER,OAAOgB,MAAM6N,UAAY,eAEvBC,EAAa,SAACtO,GAClBA,EAAER,OAAOgB,MAAMI,MAAQ,QACvBZ,EAAER,OAAOgB,MAAM6N,UAAY,YAG7B,OACE,gBAAC,IAAM/N,SAAP,WACE,eAAC,GAAD,IACA,sBAAKC,UAAU,iBAAf,gBACG9B,QADH,IACGA,OADH,EACGA,EAAYgD,KAAI,SAACtG,GAAD,OACf,uBAAqBoF,UAAU,gBAA/B,UACE,uBAAKA,UAAU,cAAf,UACE,qBACEA,UAAU,+BACVC,MAAO,CAAE0B,OAAQ,UAAWqM,WAAY,iBACxCC,aAAcJ,EACdK,aAAcH,EACdpN,QAAS,kBAAMwD,EAAavJ,EAAK5B,MALnC,SAOG4B,EAAKnF,OAGR,sBACE4L,IAAG,UAAK/M,6CAAL,YAAuCsG,EAAK0G,OAC/CC,IAAK3G,EAAK0G,WAGd,uBAAKtB,UAAU,aAAf,UACE,qBACEA,UAAU,cACVC,MAAO,CAAE0B,OAAQ,UAAWqM,WAAY,iBACxCC,aAAcJ,EACdK,aAAcH,EACdpN,QAAS,kBAAMwD,EAAavJ,EAAK5B,MALnC,SAOG4B,EAAKnF,OAER,sBAAIuK,UAAU,eAAd,sBAAuCpF,EAAK4G,UAC5C,sBAAIxB,UAAU,cAAd,qBAAqCpF,EAAK0K,SAC1C,qBAAGtF,UAAU,gBAAb,UACE,iDADF,KAlDMb,EAmDkCvE,EAAK0S,QAnDlClO,EAmD2C,KAlDtD,OAAHD,QAAG,IAAHA,OAAA,EAAAA,EAAKE,QAASD,EAAID,EAAIG,OAAO,EAAGF,EAAI,GAAK,MAAQD,MAqD9C,qBAAGa,UAAU,cAAb,UACE,+CADF,IAC6BpF,EAAKgK,SAElC,qBAAG5E,UAAU,aAAb,UACE,8CADF,IAC4BpF,EAAK+J,aArC3B/J,EAAKnF,MArBvB,IAAkB0J,EAAKC,OAiEnB,eAAC,GAAD,UCqBN,IAMevC,uBANS,SAACC,GAAD,MAAY,CAClCtE,MAAOsE,EAAMtE,MAAMA,MACnB3B,SAAUiG,EAAM/F,KAAKF,SACrB+E,OAAQkB,EAAMlB,OAAOA,UAGiB,CAAEhC,aAAYuC,gBAAvCU,EAxGf,SAAgBI,GAOd,IAAQzE,EAA4ByE,EAA5BzE,MAAO3B,EAAqBoG,EAArBpG,SAAU+E,EAAWqB,EAAXrB,OAEzB,EAAwC6B,mBAAS,IAAjD,oBAAO0Q,EAAP,KAAqBC,EAArB,KAUMC,EAAe,uCAAG,WAAOxX,GAAP,mBAAA8C,EAAA,6DAChB/C,EAAO4B,EAAM2F,QAAO,SAACvH,GAAD,OAAUA,EAAKC,WAAaA,KACtDuX,EAAe,UAACxX,EAAK,UAAN,aAAC,EAASsD,eAFH,4BAGftD,EAAK,UAHU,aAGf,EAASsD,eAHM,2CAAH,sDAMrBsE,qBAAU,WACR6P,EAAgBxX,KACf,CAAC2B,EAAO2V,IAEX,IAAMnB,EAAgB,uCAAG,WAAOpS,GAAP,2BAAAjB,EAAA,sDAEjB/C,EAAO4B,EAAM2F,QAAO,SAACvH,GAAD,OAAUA,EAAKC,WAAaA,KAChDqW,EAHiB,UAGPtR,EAAOuC,QACrB,SAACnC,GAAD,aAAWA,EAAMpB,KAAK5B,MAAQ4B,EAAK5B,KAAOgD,EAAMpF,KAAKoC,OAAX,UAAmBpC,EAAK,UAAxB,aAAmB,EAASoC,QACtE,UALqB,aAGP,EAEVA,IACNiE,EAAMd,YAAY+Q,GAGd9F,EATmB,eASGxQ,EAAK,IACzBsD,EAAkBkN,EAAlBlN,cACFiT,EAXmB,aAWDjT,GAChBoN,EAAQ6F,EAAYpU,WAAU,SAACiD,GAAD,OAAWA,EAAMvG,OAASmF,EAAKnF,QACnE0X,EAAY1T,OAAO6N,EAAO,GAC1BF,EAAelN,cAAgBiT,EAC/BiB,EAAgBjB,GAChBlQ,EAAMrD,WAAWwN,EAAgBxQ,EAAK,GAAGoC,KAhBlB,4CAAH,sDAmBtB,OAA6B,KAAb,OAAZmV,QAAY,IAAZA,OAAA,EAAAA,EAAc9O,QAEd,gBAAC,IAAMU,SAAP,WACE,eAAC,GAAD,IACA,oBAAGE,MAAO,CAAEyB,UAAW,SAAvB,qCAKJ,gBAAC,IAAM3B,SAAP,WACE,eAAC,GAAD,IACA,sBAAKC,UAAU,iBAAf,gBACGmO,QADH,IACGA,OADH,EACGA,EAAcjN,KAAI,SAACtG,GAAD,OACjB,uBAAqBoF,UAAU,gBAA/B,UACE,uBAAKA,UAAU,uBAAf,UACE,qBAAIA,UAAU,+BAAd,SAA8CpF,EAAKnF,OACnD,sBACE4L,IAAG,UAAK/M,6CAAL,YAAuCsG,EAAK0G,OAC/CC,IAAK3G,EAAK0G,WAGd,uBAAKtB,UAAU,sBAAf,UACE,qBAAIA,UAAU,uBAAd,SAAsCpF,EAAKnF,OAC3C,sBAAIuK,UAAU,wBAAd,sBAAgDpF,EAAK4G,UACrD,sBAAIxB,UAAU,uBAAd,qBAA8CpF,EAAK0K,SACnD,qBAAGtF,UAAU,yBAAb,UACE,iDADF,KA9DMb,EA+DkCvE,EAAK0S,QA/DlClO,EA+D2C,KA9DtD,OAAHD,QAAG,IAAHA,OAAA,EAAAA,EAAKE,QAASD,EAAID,EAAIG,OAAO,EAAGF,EAAI,GAAK,MAAQD,MAiE9C,qBAAGa,UAAU,uBAAb,UACE,+CADF,IAC6BpF,EAAKgK,SAElC,qBAAG5E,UAAU,sBAAb,UACE,8CADF,IAC4BpF,EAAK+J,QAEjC,eAACe,GAAA,QAAD,CACEnB,QAAQ,UACRvE,UAAU,gBACVW,QAAS,kBAAMqM,EAAiBpS,IAHlC,mCAtBMA,EAAKnF,MAlDvB,IAAkB0J,EAAKC,a,uCCjBZkP,GAAW,SAACC,EAAYC,GACnC,IACQ9Z,EAAU+Z,KAAIH,SAASE,EAAUD,EADzB,CAAEG,YAAY,IACtBha,MACR,IAAKA,EAAO,OAAO,KAEnB,IALgD,EAK1CoB,EAAS,GALiC,eAM/BpB,EAAMia,SANyB,IAMhD,2BAAgC,CAAC,IAAxBC,EAAuB,QAC9B9Y,EAAO8Y,EAAKC,KAAK,IAAMD,EAAKE,SAPkB,8BAShD,OAAOhZ,GAGIiZ,GAAmB,SAACR,EAAD,GAAkC,IAAnB9Y,EAAkB,EAAlBA,KAAMkK,EAAY,EAAZA,MAC7CqP,EAAG,gBAAMvZ,EAAOkK,GAChBsP,EAAM,gBAAMxZ,EAAO8Y,EAAW9Y,IAC5Bf,EAAU+Z,KAAIH,SAASU,EAAKC,GAA5Bva,MACR,OAAOA,EAAQA,EAAMia,QAAQ,GAAGG,QAAU,MCgG5C,IAIejS,uBAJS,SAACC,GAAD,MAAY,CAClCpG,gBAAiBoG,EAAM/F,KAAKL,mBAGU,CAAEwY,MxBGrB,SAACrY,EAAUoD,GAAX,8CAAwB,WAAOvC,EAAUC,GAAjB,iBAAAgC,EAAA,6DAErCxB,EAAS,CACb9C,QAAS,CACP,eAAgB,qBAKdmW,EAAO2D,KAAKC,UAAU,CAAEvY,WAAUoD,aATG,SAWrCrC,EACH7C,KAjIe,QAiIGyW,EAAMrT,GACxBL,MAAK,SAACC,GACLL,EAAS,CAAErB,KAAMd,EAAMY,QAAQiB,aAAaf,KAAML,QAAS+B,EAAIC,UAEhEC,OAAM,SAACC,GAAS,IAAD,IACdR,EAAStB,EAAY,UAAC8B,EAAI1D,gBAAL,aAAC,EAAcwD,KAAf,UAAqBE,EAAI1D,gBAAzB,aAAqB,EAAcG,SACxDsB,QAAQC,IAAIgC,GACZR,EAAS,CAAErB,KAAMd,EAAMY,QAAQkB,UAAUhB,UAnBF,uBAsBrCuB,EACH9C,IADG,YACc+C,EAAYF,IAC7BG,MAAK,SAACC,GAAD,OACJL,EAAS,CACPrB,KAAMd,EAAMY,QAAQa,WAAWX,KAC/BL,QAAS+B,EAAIC,KACbnB,SAAUkB,EAAIC,KAAKnB,cAGtBoB,OAAM,SAACC,GAENR,EAAS,CAAErB,KAAMd,EAAMY,QAAQe,UAAUb,UAjCF,2CAAxB,0DwBHNwG,EA3Gf,SAAeI,GAMb,MAAgCQ,mBAAS,IAAzC,oBAAO5G,EAAP,KAAiBwY,EAAjB,KACA,EAAgC5R,mBAAS,IAAzC,oBAAOxD,EAAP,KAAiBqV,EAAjB,KACA,EAA4B7R,mBAAS,IAArC,oBAAO3H,EAAP,KAAeyZ,EAAf,KAEMN,EAAS,CACbpY,SAAU4X,KAAInR,SAASkS,WAAWC,MAAM,YACxCxV,SAAUwU,KAAInR,SAASkS,WAAWC,MAAM,aAcpCzO,EAAW,SAACvB,GAEhB,IAAMiQ,EAAY,eAAQ5Z,GACpBiE,EAAegV,GAAiBE,EAAQxP,EAAEC,eAE5C3F,EACF2V,EAAajQ,EAAEC,cAAcjK,MAAQsE,SAE9B2V,EAAajQ,EAAEC,cAAcjK,MAEtC8Z,EAAUG,GAGY,aAAlBjQ,EAAER,OAAOxJ,MACX4Z,EAAY5P,EAAEC,cAAcC,OAER,aAAlBF,EAAER,OAAOxJ,MACX6Z,EAAY7P,EAAEC,cAAcC,QAKhC,OAAI1C,EAAMvG,gBACD,eAAC,IAAD,CAAUyJ,GAAG,UAIpB,sBAAKH,UAAU,mBAAf,SACE,gBAACqE,GAAA,EAAD,CAAMrE,UAAU,sBAAhB,UACE,qBAAIA,UAAU,cAAd,mBACA,gBAACM,GAAA,EAAD,CAAMV,SAzCK,SAACH,GAChBA,EAAEI,iBAGF,IAAM/J,EAASwY,GAASW,EAAQ,CAAEpY,WAAUoD,aAC5CsV,EAAU,CAAEzZ,OAAQA,GAAU,KAC1BA,GAEJmH,EAAMiS,MAAMrY,EAAUoD,IAiClB,UACE,gBAACqG,GAAA,EAAKE,MAAN,CAAYR,UAAU,aAAtB,UACE,eAACM,GAAA,EAAKqP,MAAN,uBACA,eAACrP,GAAA,EAAKsP,QAAN,CACEvZ,KAAK,OACL2J,UAAU,eACVvK,KAAK,WACLuL,SAAUA,EACVrB,MAAO9I,IAERf,EAAM,UACL,sBAAKkK,UAAU,qBAAf,SAAqClK,EAAM,cAI/C,gBAACwK,GAAA,EAAKE,MAAN,CAAYR,UAAU,aAAtB,UACE,eAACM,GAAA,EAAKqP,MAAN,uBACA,eAACrP,GAAA,EAAKsP,QAAN,CACEvZ,KAAK,WACL2J,UAAU,eACVvK,KAAK,WACLuL,SAAUA,EACVrB,MAAO1F,IAERnE,EAAM,UACL,sBAAKkK,UAAU,qBAAf,SAAqClK,EAAM,cAI/C,sBAAKkK,UAAU,aAAf,SACE,eAAC0F,GAAA,QAAD,CACEmK,SAAUvB,GAASW,EAAQ,CAAEpY,WAAUoD,aACvC5D,KAAK,SACLkO,QAAQ,UAHV,qBAQF,yDACyB,eAAC,QAAD,CAAMpE,GAAG,YAAT,oCCkHnC,IAIetD,uBAJS,SAACC,GAAD,MAAY,CAClCpG,gBAAiBoG,EAAM/F,KAAKL,mBAGU,CACtCoZ,SzBvDA,SAAC,GAAD,IAAGjZ,EAAH,EAAGA,SAAUoD,EAAb,EAAaA,SAAUD,EAAvB,EAAuBA,MAAOK,EAA9B,EAA8BA,QAASD,EAAvC,EAAuCA,IAAvC,OACA,SAAC1C,GAEC,IAOM8T,EAAO2D,KAAKC,UAAU,CAAEvY,WAAUoD,WAAUD,QAAOK,UAASD,QAElExC,EACG7C,KAAK,SAAUyW,EAVH,CACbnW,QAAS,CACP,eAAgB,sBASjByC,MAAK,SAACC,GAAD,OACJL,EAAS,CACPrB,KAAMd,EAAMY,QAAQoB,gBAAgBlB,KACpCL,QAAS+B,EAAIC,UAGhBC,OAAM,SAACC,GAAS,IAAD,IACdR,EAAStB,EAAY,UAAC8B,EAAI1D,gBAAL,aAAC,EAAcwD,KAAf,UAAqBE,EAAI1D,gBAAzB,aAAqB,EAAcG,SACxD+C,EAAS,CAAErB,KAAMd,EAAMY,QAAQqB,aAAanB,YyBkClDiC,iBAFauE,EAnNf,SAAkBI,GAOhB,MAAgCQ,mBAAS,IAAzC,oBAAO5G,EAAP,KAAiBwY,EAAjB,KACA,EAA0B5R,mBAAS,IAAnC,oBAAOzD,EAAP,KAAc+V,EAAd,KACA,EAA8BtS,mBAAS,IAAvC,oBAAOpD,EAAP,KAAgB2V,EAAhB,KACA,EAAsBvS,mBAAS,IAA/B,oBAAOrD,EAAP,KAAY6V,EAAZ,KACA,EAAgCxS,mBAAS,IAAzC,oBAAOxD,EAAP,KAAiBqV,EAAjB,KACA,EAAkC7R,mBAAS,IAA3C,oBAAOyS,EAAP,KAAkBC,EAAlB,KACA,EAA4B1S,mBAAS,IAArC,oBAAO3H,EAAP,KAAeyZ,EAAf,KAEMN,EAAS,CACbpY,SAAU4X,KAAInR,SAASkS,WAAW7L,IAAI,GAAGD,IAAI,IAAI+L,MAAM,YACvDzV,MAAOyU,KAAInR,SAASkS,WAAWxV,QAAQ0J,IAAI,KAAK+L,MAAM,SACtDxV,SAAUwU,KAAInR,SAASkS,WAAW7L,IAAI,GAAGD,IAAI,KAAK+L,MAAM,YACxDS,UAAWzB,KAAInR,SAASkS,WAAW7L,IAAI,GAAGD,IAAI,KAAK+L,MAAM,aACzDrV,IAAKqU,KAAI9L,SAAS6M,WAAW7L,IAAI,GAAG8L,MAAM,OAC1CpV,QAASoU,KAAInR,SAASkS,WAAW7L,IAAI,GAAGD,IAAI,IAAI+L,MAAM,YAGxD,SAAStJ,EAAMC,GACb,OAAO,IAAIxR,SAAQ,SAACyR,GAAD,OAAaC,WAAWD,EAASD,MAGtD,IAAMxG,EAAQ,uCAAG,WAAOH,GAAP,iBAAA9F,EAAA,yDACf8F,EAAEI,iBAGI/J,EAASwY,GAASW,EAAQ,CAC9BpY,WACAoD,WACAiW,YACAlW,QACAK,UACAD,QAEFmV,EAAU,CAAEzZ,OAAQA,GAAU,MAC1BA,EAbW,oDAgBXmE,IAAaiW,EAhBF,gBAkBb3I,QAAM7S,MAAM,0BAlBC,8BAoBP0b,EAAU,CACdvZ,WACAoD,WACAD,QACAK,UACAD,OAzBW,UA4BP6C,EAAM6S,SAASM,GA5BR,yBA6BPjK,EAAM,KA7BC,4CAAH,sDAiCRnF,EAAW,SAACvB,GAEhB,IAAMiQ,EAAY,eAAQ5Z,GACpBiE,EAAegV,GAAiBE,EAAQxP,EAAEC,eAE5C3F,EACF2V,EAAajQ,EAAEC,cAAcjK,MAAQsE,SAE9B2V,EAAajQ,EAAEC,cAAcjK,MAEtC8Z,EAAUG,GAGY,aAAlBjQ,EAAER,OAAOxJ,MACX4Z,EAAY5P,EAAEC,cAAcC,OAER,UAAlBF,EAAER,OAAOxJ,MACXsa,EAAStQ,EAAEC,cAAcC,OAEL,YAAlBF,EAAER,OAAOxJ,MACXua,EAAWvQ,EAAEC,cAAcC,OAEP,QAAlBF,EAAER,OAAOxJ,MACXwa,EAAOxQ,EAAEC,cAAcC,OAEH,aAAlBF,EAAER,OAAOxJ,MACX6Z,EAAY7P,EAAEC,cAAcC,OAER,cAAlBF,EAAER,OAAOxJ,MACX0a,EAAa1Q,EAAEC,cAAcC,QAIjC,OAAI1C,EAAMvG,gBACD,eAAC,IAAD,CAAUyJ,GAAG,UAIpB,sBAAKH,UAAU,kBAAf,SACE,gBAACqE,GAAA,EAAD,CAAMrE,UAAU,sBAAhB,UACE,qBAAIA,UAAU,cAAd,sBACA,gBAACM,GAAA,EAAD,CAAMV,SAAUA,EAAhB,UACE,gBAACU,GAAA,EAAKE,MAAN,CAAYR,UAAU,aAAtB,UACE,eAACM,GAAA,EAAKqP,MAAN,uBACA,eAACrP,GAAA,EAAKsP,QAAN,CACEvZ,KAAK,OACL2J,UAAU,eACVvK,KAAK,WACLuL,SAAUA,EACVrB,MAAO9I,IAERf,EAAM,UACL,sBAAKkK,UAAU,qBAAf,SAAqClK,EAAM,cAG/C,gBAACwK,GAAA,EAAKE,MAAN,CAAYR,UAAU,aAAtB,UACE,eAACM,GAAA,EAAKqP,MAAN,oBACA,eAACrP,GAAA,EAAKsP,QAAN,CACEvZ,KAAK,QACL2J,UAAU,eACVvK,KAAK,QACLuL,SAAUA,EACVrB,MAAO3F,IAERlE,EAAM,OACL,sBAAKkK,UAAU,qBAAf,SAAqClK,EAAM,WAG/C,gBAACwK,GAAA,EAAKE,MAAN,CAAYR,UAAU,aAAtB,UACE,eAACM,GAAA,EAAKqP,MAAN,sBACA,eAACrP,GAAA,EAAKsP,QAAN,CACEvZ,KAAK,OACL2J,UAAU,eACVvK,KAAK,UACLuL,SAAUA,EACVrB,MAAOtF,IAERvE,EAAM,SACL,sBAAKkK,UAAU,qBAAf,SAAqClK,EAAM,aAG/C,gBAACwK,GAAA,EAAKE,MAAN,CAAYR,UAAU,aAAtB,UACE,eAACM,GAAA,EAAKqP,MAAN,kBACA,eAACrP,GAAA,EAAKsP,QAAN,CACEvZ,KAAK,OACL2J,UAAU,eACVvK,KAAK,MACLuL,SAAUA,EACVrB,MAAOvF,IAERtE,EAAM,KACL,sBAAKkK,UAAU,qBAAf,SAAqClK,EAAM,SAG/C,gBAACwK,GAAA,EAAKE,MAAN,CAAYR,UAAU,aAAtB,UACE,eAACM,GAAA,EAAKqP,MAAN,uBACA,eAACrP,GAAA,EAAKsP,QAAN,CACEvZ,KAAK,WACL2J,UAAU,eACVvK,KAAK,WACLuL,SAAUA,EACVrB,MAAO1F,IAERnE,EAAM,UACL,sBAAKkK,UAAU,qBAAf,SAAqClK,EAAM,cAG/C,gBAACwK,GAAA,EAAKE,MAAN,CAAYR,UAAU,aAAtB,UACE,eAACM,GAAA,EAAKqP,MAAN,+BACA,eAACrP,GAAA,EAAKsP,QAAN,CACEvZ,KAAK,WACL2J,UAAU,eACVvK,KAAK,YACLuL,SAAUA,EACVrB,MAAOuQ,IAERpa,EAAM,WACL,sBAAKkK,UAAU,qBAAf,SAAqClK,EAAM,eAI/C,sBAAKkK,UAAU,aAAf,SACE,eAAC0F,GAAA,QAAD,CACErP,KAAK,SACLkO,QAAQ,UACRsL,SAAUvB,GAASW,EAAQ,CACzBpY,WACAoD,WACAiW,YACAlW,QACAK,UACAD,QATJ,wBAeF,2DAC2B,eAAC,QAAD,CAAM+F,GAAG,SAAT,iC,OC1JtBkQ,OApDf,WACE,OACE,gBAAC,IAAMtQ,SAAP,WACE,eAAC,GAAD,IAEA,0BAASC,UAAU,2BAAnB,SACE,sBAAKA,UAAU,YAAf,SACE,uBAAKA,UAAU,8BAAf,UACE,oBAAGA,UAAU,QAAQC,MAAO,CAAEqQ,aAAc,OAAQjQ,MAAM,QAA1D,sCAGA,oBAAGL,UAAU,WAAb,gFAGA,oBAAGA,UAAU,WAAb,sGAIA,oBAAGA,UAAU,WAAb,0EAMN,uBAAKA,UAAU,eAAf,UACE,sBAAKA,UAAU,cAAf,SACE,uBAAKA,UAAU,YAAf,UACE,kGACA,oEAGJ,sBAAKA,UAAU,cAAf,SACE,uBAAKA,UAAU,YAAf,UACE,kGAEE,wBAFF,+DAIA,6EAGJ,sBAAKA,UAAU,cAAf,SACE,uBAAKA,UAAU,YAAf,UACE,qFACA,kEAIN,eAAC,GAAD,QCrDS,OAA0B,2CCoB1BuQ,OAdf,WACE,OACE,gBAAC,IAAMxQ,SAAP,WACE,eAAC,GAAD,IAEA,+BACE,sBAAKsB,IAAKmP,GAAgBjP,IAAI,qBAGhC,eAAC,GAAD,Q,wCCTOkP,GAAb,4KAME,SAAmBC,GACjB,IAE+B,QAF/B,EAAkCjG,KAAKxN,MAA/BvI,EAAR,EAAQA,MAAOoL,EAAf,EAAeA,MAAOgP,EAAtB,EAAsBA,QAElBpa,IAAUgc,EAAUhc,SACtB,UAAIA,EAAMiB,WAAV,aAAI,EAAW6L,SAEb+F,QAAM7S,MAAN,kBAAuBA,EAAMiB,IAAI6L,OAAOmP,UAE1C,UAAIjc,EAAMiB,WAAV,aAAI,EAAWib,QAEbrJ,QAAM7S,MAAN,iBAAsBA,EAAMiB,IAAIib,MAAMD,UAExC,UAAIjc,EAAMiB,WAAV,aAAI,EAAWkb,mBAEbtJ,QAAM7S,MAAMA,EAAMiB,IAAIkb,iBAAiBF,SAEzC,UAAIjc,EAAMiB,WAAV,aAAI,EAAWkB,WAEb0Q,QAAM7S,MAAMA,EAAMiB,IAAIkB,SAAS8Z,QAE7Bjc,EAAMiB,KAER4R,QAAM7S,MAAMA,EAAMiB,MAIlBmZ,IAAY4B,EAAU5B,UACpBA,EAAQzW,SAASyY,cACnBhR,EAAMiR,QAAQjC,EAAQzW,SAASyY,cAE7BhC,EAAQzW,SAAS2Y,kBACnBlR,EAAM0H,KAAKsH,EAAQzW,SAAS2Y,kBAE1BlC,EAAQzW,SAAS4Y,aACnBnR,EAAMiR,QAAQjC,EAAQzW,SAAS4Y,aAE7BnC,EAAQzW,SAAS6Y,iBACnBpR,EAAM0H,KAAKsH,EAAQzW,SAAS6Y,iBAE1BpC,EAAQzW,SAAS8Y,kBACnBrR,EAAMpL,MAAMoa,EAAQzW,SAAS8Y,qBA9CrC,oBAmDE,WACE,OAAO,eAAC,WAAD,QApDX,GAA4BC,aA6DbvU,uBALS,SAACC,GAAD,MAAY,CAClCpI,MAAOoI,EAAMhH,OACbgZ,QAAShS,EAAMzE,YAGFwE,CAAyBwU,cAAYZ,K,iDCqNpD,IAOe5T,uBAPS,SAACC,GAAD,MAAY,CAClCrG,QAASqG,EAAM/F,KAAKN,QACpB6D,MAAOwC,EAAMxC,MAAMA,MACnB9B,MAAOsE,EAAMtE,MAAMA,MACnBsC,SAAUgC,EAAMhC,SAASA,YAGa,CACtCwW,Q3BtOqB,SAAC1W,GAAD,OAAU,SAAClD,EAAUC,GAC1C,IAAIkC,EAAc,CAChBC,SAAS,EACTC,aAAc,IAiBhB,OAdAnC,EACG7C,KAAKwD,EAAaqC,EAAM/C,EAAYF,IACpCG,MAAK,SAACC,GACLL,EAAS,CACPrB,KAAMd,EAAMY,QAAQqE,UAAUnE,KAC9BL,QAAS+B,EAAIC,UAGhBC,OAAM,SAACC,GAAS,IAAD,IACdjC,QAAQC,IAAR,UAAYgC,EAAI1D,gBAAhB,aAAY,EAAcwD,MAC1B6B,EAAYC,SAAU,EACtBD,EAAYE,aAAZ,UAA2B7B,EAAI1D,gBAA/B,aAA2B,EAAcwD,QAGtC6B,I2BmNP0X,W3BhNwB,SAACtY,GAAD,OAAQ,SAACvB,EAAUC,GAC3C,IAAIkC,EAAc,CAChBC,SAAS,EACTC,aAAc,IAkBhB,OAfAnC,EACG1C,OADH,UACaqD,EADb,YAC4BU,EAD5B,KACmCpB,EAAYF,IAC5CG,MAAK,SAACC,GACLL,EAAS,CACPrB,KAAMd,EAAMY,QAAQwE,YAAYtE,KAChCL,QAAS+B,EAAIC,KACbiB,UAGHhB,OAAM,SAACC,GAAS,IAAD,IACdjC,QAAQC,IAAR,UAAYgC,EAAI1D,gBAAhB,aAAY,EAAcwD,MAC1B6B,EAAYC,SAAU,EACtBD,EAAYE,aAAZ,UAA2B7B,EAAI1D,gBAA/B,aAA2B,EAAcwD,QAGtC6B,I2B4LP8B,aACA6V,Q5BpNqB,SAAC5a,GAAD,8CAAU,WAAOc,EAAUC,GAAjB,eAAAgC,EAAA,6DAC3BE,EAAc,CAChBC,SAAS,EACTC,aAAc,IAHe,SAMzBnC,EACH7C,KAAKwD,EAAa3B,EAAMiB,EAAYF,IACpCG,MAAK,SAACC,GACLL,EAAS,CACPrB,KAAMd,EAAMY,QAAQuC,UAAUrC,KAC9BL,QAAS+B,EAAIC,UAGhBC,OAAM,SAACC,GAAS,IAAD,IACdjC,QAAQC,IAAR,UAAYgC,EAAI1D,gBAAhB,aAAY,EAAcwD,MAC1B6B,EAAYC,SAAU,EACtBD,EAAYE,aAAZ,UAA2B7B,EAAI1D,gBAA/B,aAA2B,EAAcwD,QAjBd,gCAoBxB6B,GApBwB,2CAAV,yD4BqNrBD,aACA6X,c5B/L2B,SAAC7a,EAAMqC,GAAP,8CAAc,WAAOvB,EAAUC,GAAjB,eAAAgC,EAAA,6DACrCE,EAAc,CAChBC,SAAS,EACTC,aAAc,IAHyB,SAMnCnC,EACH5C,IADG,UACIuD,EADJ,YACmBU,EADnB,KAC0BrC,EAAMiB,EAAYF,IAC/CG,MAAK,SAACC,GACLL,EAAS,CACPrB,KAAMd,EAAMY,QAAQ0C,kBAAkBxC,KACtCL,QAAS+B,EAAIC,KACbiB,UAGHhB,OAAM,SAACC,GAAS,IAAD,IACdjC,QAAQC,IAAR,UAAYgC,EAAI1D,gBAAhB,aAAY,EAAcwD,MAC1B6B,EAAYC,SAAU,EACtBD,EAAYE,aAAZ,UAA2B7B,EAAI1D,gBAA/B,aAA2B,EAAcwD,QAlBJ,gCAqBlC6B,GArBkC,2CAAd,yD4BgM3B6X,W5BzHwB,SAACzY,GAAD,8CAAQ,WAAOvB,EAAUC,GAAjB,eAAAgC,EAAA,6DAC5BE,EAAc,CAChBC,SAAS,EACTC,aAAc,IAHgB,SAM1BnC,EACH1C,OADG,UACOqD,EADP,YACsBU,EADtB,KAC6BpB,EAAYF,IAC5CG,MAAK,SAACC,GACLL,EAAS,CACPrB,KAAMd,EAAMY,QAAQqD,YAAYnD,KAChCL,QAAS+B,EAAIC,KACbiB,UAGHhB,OAAM,SAACC,GAAS,IAAD,IACdjC,QAAQC,IAAR,UAAYgC,EAAI1D,gBAAhB,aAAY,EAAcwD,MAC1B6B,EAAYC,SAAU,EACtBD,EAAYE,aAAZ,UAA2B7B,EAAI1D,gBAA/B,aAA2B,EAAcwD,QAlBb,gCAqBzB6B,GArByB,2CAAR,0D4BkHXgD,EAhRf,SAAS8U,EAAU1U,GACjB0U,EAAUzU,UAAY,CACpBzG,QAAS0G,aAAUC,KAAKC,WACxBiU,QAASnU,aAAUK,KAAKH,WACxBkU,WAAYpU,aAAUK,KAAKH,WAC3B1B,WAAYwB,aAAUK,KAAKH,WAC3BmU,QAASrU,aAAUK,KAAKH,WACxBzD,WAAYuD,aAAUK,KAAKH,WAC3BoU,cAAetU,aAAUK,KAAKH,WAC9BqU,WAAYvU,aAAUK,KAAKH,YAG7B,IACE5G,EAWEwG,EAXFxG,QACA6a,EAUErU,EAVFqU,QACAC,EASEtU,EATFsU,WACA5V,EAQEsB,EARFtB,WACA6V,EAOEvU,EAPFuU,QACA5X,EAMEqD,EANFrD,WAEA8X,GAIEzU,EALFwU,cAKExU,EAJFyU,YACApX,EAGE2C,EAHF3C,MACA9B,EAEEyE,EAFFzE,MACAsC,EACEmC,EADFnC,SAOF,OAJA0D,qBAAU,cAEP,CAAC/H,KAEY,IAAZA,EAA0B,eAAC,IAAD,CAAU0J,GAAG,UAGzC,gBAAC,IAAMJ,SAAP,WACE,eAAC,KAAD,IAEA,eAAC,KAAD,CACE/H,KAAM,CACJvC,KAAM,QACNmc,UAAU,GAAD,OAAKtd,6CAAL,KACTud,MAAOvX,EACPwX,KAAM,oBAAG9R,UAAU,gBAErB+R,gBAAiB,CACf,CACEnB,MAAO,OACPnB,MAAO,OACPpZ,KAAM,OACN2b,OAAQ,QACRpU,QAAS,aACTqU,gBAAiB,UAEnB,CACErB,MAAO,SACPnB,MAAO,SACPpZ,KAAM,OACN2b,OAAQ,QACRpU,QAAS,aACTqU,gBAAiB,UAEnB,CACErB,MAAO,UACPnB,MAAO,UACPpZ,KAAM,OACN2b,OAAQ,QACRpU,QAAS,OACTqU,gBAAiB,UAEnB,CACErB,MAAO,eACPnB,MAAO,eACPpZ,KAAM,OACN2b,OAAQ,QACRpU,QAAS,OACTqU,gBAAiB,UAEnB,CACErB,MAAO,QACPnB,MAAO,QACPpZ,KAAM,OACN2b,OAAQ,SACRpU,QAAS,cAEX,CACEgT,MAAO,YACPnB,MAAO,YACPpZ,KAAM,OACN2b,OAAQ,QACRpU,QAAS,aACTqU,gBAAiB,UAEnB,CACErB,MAAO,OACPnB,MAAO,OACPpZ,KAAM,OACN2b,OAAQ,QACRpU,QAAS,aACTqU,gBAAiB,UAEnB,CACErB,MAAO,QACPnB,MAAO,QACPpZ,KAAM,OACN2b,OAAQ,QACRpU,QAAS,aACTqU,gBAAiB,UAEnB,CACErB,MAAO,OACPnB,MAAO,OACPpZ,KAAM,OACN2b,OAAQ,QACRpU,QAAS,aACTqU,gBAAiB,UAEnB,CACErB,MAAO,QACPnB,MAAO,QACPpZ,KAAM,OACN2b,OAAQ,QACRpU,QAAS,aACT0D,OAAO,IAGX4Q,OAAO,OACPC,QAAS,CAAC,SACVC,WAAYd,EACZe,cAAed,IAGjB,eAAC,KAAD,CACEvZ,KAAM,CACJvC,KAAM,QACNoc,MAAOrZ,EACPsZ,KAAM,oBAAG9R,UAAU,iBAErB+R,gBAAiB,CACf,CACEnB,MAAO,WACPnB,MAAO,WACPpZ,KAAM,OACN2b,OAAQ,QACRpU,QAAS,aACTqU,gBAAiB,UAEnB,CACErB,MAAO,QACPnB,MAAO,QACPpZ,KAAM,QACN2b,OAAQ,QACRpU,QAAS,aACTqU,gBAAiB,UAEnB,CACErB,MAAO,WACPnB,MAAO,WACPpZ,KAAM,OACN2b,OAAQ,QACRpU,QAAS,aACTqU,gBAAiB,UAEnB,CACErB,MAAO,UACPnB,MAAO,UACPpZ,KAAM,OACN2b,OAAQ,SACRpU,QAAS,cAGX,CACEgT,MAAO,MACPnB,MAAO,MACPpZ,KAAM,OACN2b,OAAQ,QACRpU,QAAS,aACTqU,gBAAiB,UAEnB,CACErB,MAAO,UACPnB,MAAO,UACPpZ,KAAM,OACN2b,OAAQ,QACRpU,QAAS,aACTqU,gBAAiB,WAGrBE,QAAS,CAAC,WACVD,OAAO,WACPE,WAAYZ,EACZc,cAAe1Y,EACfyY,cAAeX,IAGjB,eAAC,KAAD,CACE1Z,KAAM,CACJvC,KAAM,WACNoc,MAAO/W,EACPgX,KAAM,oBAAG9R,UAAU,oBAErB+R,gBAAiB,CACf,CACEnB,MAAO,UACPnB,MAAO,UACPpZ,KAAM,OACN2b,OAAQ,QACRpU,QAAS,aACTqU,gBAAiB,UAEnB,CACErB,MAAO,gBACPnB,MAAO,WACPpZ,KAAM,OACN2b,OAAQ,OACRpU,QAAS,aACTqU,gBAAiB,SACjBM,QAAS,CACPC,UAAW,QACXvZ,GAAI,aAIR,CACE2X,MAAO,YACPnB,MAAO,OACPpZ,KAAM,OACN2b,OAAQ,OACRpU,QAAS,aACTqU,gBAAiB,SACjBM,QAAS,CACPC,UAAW,QACXvZ,GAAI,YAENwZ,gBAAiB,CACfD,UAAW,QACXE,WAAY,WACZC,SAAU,QACVtc,KAAM,QACNub,UAAU,GAAD,OAAKtd,6CAAL,OAIb,CACEsc,MAAO,eACPnB,MAAO,eACPpZ,KAAM,OACN2b,OAAQ,QACRpU,QAAS,aACTqU,gBAAiB,UAEnB,CACErB,MAAO,kBACPnB,MAAO,kBACPpZ,KAAM,OACN2b,OAAQ,QACRpU,QAAS,aACTqU,gBAAiB,WAGrBC,OAAO,UACPE,WAAYzW,U,UC1OdiX,I,iDAAe,CACnBC,QAAS,IACTC,SAAU,WAkDGC,OA/Cf,WAaE,OAZAvU,qBAAU,WAAM,4CACd,sBAAA7E,EAAA,0DACM6C,GAAM7E,WAAWZ,KAAKT,MAD5B,gCACyCkG,GAAM9E,SAASD,KADxD,uBAGQ+E,GAAM9E,SAASgC,KAHvB,uBAIQ8C,GAAM9E,SAASmD,KAJvB,uBAKQ2B,GAAM9E,SAASgE,KALvB,wBAMQc,GAAM9E,SAASwE,MANvB,6CADc,uBAAC,WAAD,wBASduK,KACC,IAGD,eAAC,IAAD,yBAAeuM,SAAUC,KAAmBL,IAA5C,aACE,uBAAK5S,UAAU,MAAf,UACE,eAAC,GAAD,IACA,eAAC,iBAAD,CACE8S,SAAS,YACTI,UAAW,IACXC,iBAAiB,EACjBC,aAAa,EACbC,cAAY,EACZC,KAAK,EACLC,kBAAgB,EAChBlQ,WAAS,EACTmQ,cAAY,IAEd,gBAAC,IAAD,WACE,eAAC,IAAD,CAAO3E,KAAK,iBAAiB4E,UAAW9F,KACxC,eAAC,IAAD,CAAOkB,KAAK,aAAa4E,UAAWC,KACpC,eAAC,IAAD,CAAO7E,KAAK,SAAS4E,UAAWE,KAChC,eAAC,IAAD,CAAO9E,KAAK,UAAU4E,UAAWG,KACjC,eAAC,IAAD,CAAO/E,KAAK,SAAS4E,UAAWI,KAChC,eAAC,IAAD,CAAOhF,KAAK,YAAY4E,UAAWK,KAClCC,qBAPH,IAOuBC,qBACrB,eAAC,IAAD,CAAOnF,KAAK,SAAS4E,UAAW9B,KAChC,eAAC,IAAD,CAAO9C,KAAK,QAAQ4E,UAAWpD,KAC/B,eAAC,IAAD,CAAOxB,KAAK,aAAa4E,UAAWlD,KACpC,eAAC,IAAD,CAAU0D,KAAK,IAAIC,OAAK,EAAC/T,GAAG,UAC5B,eAAC,IAAD,CAAUA,GAAG,yB,qBCxEvBgU,IAASC,OACP,eAAC,IAAMC,WAAP,UACE,eAAC,iBAAD,UACE,eAAC,YAAD,CAAU7X,MAAOA,GAAjB,SACE,eAAC,GAAD,UAIN4N,SAAS4B,eAAe,W","file":"static/js/main.3eef75c9.chunk.js","sourcesContent":["import axios from \"axios\";\n//import logger from \"./logService\";\n//import { toast } from \"react-toastify\";\n\naxios.defaults.baseURL = process.env.REACT_APP_API_URL;\n\naxios.interceptors.response.use(null  , (error) => {\n  const expectedError =\n    error.response &&\n    error.response.status >= 400 &&\n    error.response.status < 500;\n\n  if (!expectedError) {\n    //  logger.log(error);\n    //  toast.error(\"An unexpected error occurrred.\");\n  }\n\n  return Promise.reject(error);\n});\n\nfunction setJwt(jwt) {\n  axios.defaults.headers.common[\"x-auth-token\"] = jwt;\n}\n\n// eslint-disable-next-line import/no-anonymous-default-export\nexport default {\n  get: axios.get,\n  post: axios.post,\n  put: axios.put,\n  patch: axios.patch,\n  delete: axios.delete,\n  setJwt,\n};\n","import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nconst slice = createSlice({\r\n  name: \"errors\",\r\n  initialState: { msg: {}, status: null },\r\n  reducers: {\r\n    errorsReturned: (errors, action) => {\r\n      errors.msg = action.payload.msg;\r\n      errors.status = action.payload.status;\r\n    },\r\n  },\r\n});\r\n\r\nconsole.log(slice);\r\n\r\nexport const { errorsReturned } = slice.actions;\r\nexport default slice.reducer;\r\n\r\n// Action Creators\r\nexport const returnErrors = (msg, status) => {\r\n  return {\r\n    type: slice.actions.errorsReturned.type,\r\n    payload: { msg, status },\r\n  };\r\n};\r\n","import { createSlice } from \"@reduxjs/toolkit\";\r\nimport http from \"../services/httpService\";\r\nimport { returnErrors } from \"./errors\";\r\n\r\nconst apiEndpoint = \"/auth\";\r\n\r\nconst slice = createSlice({\r\n  name: \"auth\",\r\n  initialState: {\r\n    token: localStorage.getItem(\"token\"),\r\n    isAdmin: null,\r\n    isAuthenticated: null,\r\n    isLoading: false,\r\n    user: null,\r\n    username: localStorage.getItem(\"username\"),\r\n  },\r\n  reducers: {\r\n    userLoading: (auth, action) => {\r\n      auth.isLoading = true;\r\n    },\r\n    userLoaded: (auth, action) => {\r\n      localStorage.setItem(\"username\", action.username);\r\n      auth.isAdmin = action.payload.isAdmin;\r\n      auth.isAuthenticated = true;\r\n      auth.isLoading = false;\r\n      auth.user = action.payload;\r\n      auth.username = action.username;\r\n    },\r\n    authError: (auth, action) => {\r\n      localStorage.removeItem(\"token\");\r\n      localStorage.removeItem(\"username\");\r\n      auth.token = null;\r\n      auth.user = null;\r\n      auth.isAdmin = false;\r\n      auth.isAuthenticated = false;\r\n      auth.isLoading = false;\r\n    },\r\n    loginSuccess: (auth, action) => {\r\n      localStorage.setItem(\"token\", action.payload);\r\n      // localStorage.setItem(\"username\", action.payload.user.username);\r\n      auth.token = action.payload;\r\n      auth.isAdmin = action.payload.isAdmin;\r\n      auth.isAuthenticated = true;\r\n      auth.isLoading = false;\r\n      auth.user = action.payload.user;\r\n      // auth.username = action.payload.user.username;\r\n    },\r\n    loginFail: (auth, action) => {\r\n      localStorage.removeItem(\"token\");\r\n      localStorage.removeItem(\"username\");\r\n      auth.token = null;\r\n      auth.user = null;\r\n      auth.isAdmin = false;\r\n      auth.isAuthenticated = false;\r\n      auth.isLoading = false;\r\n    },\r\n    logoutSuccess: (auth, action) => {\r\n      localStorage.removeItem(\"token\");\r\n      localStorage.removeItem(\"username\");\r\n      auth.token = null;\r\n      auth.user = null;\r\n      auth.isAdmin = false;\r\n      auth.isAuthenticated = false;\r\n      auth.isLoading = false;\r\n    },\r\n    registerSuccess: (auth, action) => {\r\n      localStorage.setItem(\"token\", action.payload.token);\r\n      localStorage.setItem(\"username\", action.payload.username);\r\n      auth.isAdmin = false;\r\n      auth.isAuthenticated = true;\r\n      auth.isLoading = false;\r\n    },\r\n    registerFail: (auth, action) => {\r\n      localStorage.removeItem(\"token\");\r\n      localStorage.removeItem(\"username\");\r\n      auth.token = null;\r\n      auth.user = null;\r\n      auth.isAdmin = false;\r\n      auth.isAuthenticated = false;\r\n      auth.isLoading = false;\r\n    },\r\n  },\r\n});\r\n\r\nconsole.log(slice);\r\n\r\nexport const {\r\n  userLoading,\r\n  userLoaded,\r\n  authError,\r\n  loginSuccess,\r\n  loginFail,\r\n  logoutSuccess,\r\n  registerSuccess,\r\n  registerFail,\r\n} = slice.actions;\r\nexport default slice.reducer;\r\n\r\n// CHECK TOKEN & LOAD USER\r\nexport const loadUser = () => (dispatch, getState) => {\r\n  // User Loading\r\n  dispatch({\r\n    type: slice.actions.userLoading.type,\r\n  });\r\n\r\n  http\r\n    .get(\"/users/me\", tokenConfig(getState))\r\n    .then((res) =>\r\n      dispatch({\r\n        type: slice.actions.userLoaded.type,\r\n        payload: res.data,\r\n        username: res.data.username,\r\n      })\r\n    )\r\n    .catch((err) => {\r\n      dispatch(returnErrors(err.response?.data, err.response?.status));\r\n      dispatch({ type: slice.actions.authError.type });\r\n    });\r\n};\r\n\r\n// LOGIN USER\r\nexport const login = (username, password) => async (dispatch, getState) => {\r\n  // Headers\r\n  const config = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  };\r\n\r\n  // Request Body\r\n  const body = JSON.stringify({ username, password });\r\n\r\n  await http\r\n    .post(apiEndpoint, body, config)\r\n    .then((res) => {\r\n      dispatch({ type: slice.actions.loginSuccess.type, payload: res.data });\r\n    })\r\n    .catch((err) => {\r\n      dispatch(returnErrors(err.response?.data, err.response?.status));\r\n      console.log(err);\r\n      dispatch({ type: slice.actions.loginFail.type });\r\n    });\r\n\r\n  await http\r\n    .get(`/users/me`, tokenConfig(getState))\r\n    .then((res) =>\r\n      dispatch({\r\n        type: slice.actions.userLoaded.type,\r\n        payload: res.data,\r\n        username: res.data.username,\r\n      })\r\n    )\r\n    .catch((err) => {\r\n      // dispatch(returnErrors(err.response?.data, err.response?.status));\r\n      dispatch({ type: slice.actions.authError.type });\r\n    });\r\n};\r\n\r\n// LOGOUT USER\r\nexport const logout = () => (dispatch, getState) => {\r\n  try {\r\n    dispatch({ type: slice.actions.logoutSuccess.type });\r\n  } catch (err) {\r\n    console.log(err);\r\n    dispatch(returnErrors(err.response?.data, err.response?.status));\r\n  }\r\n};\r\n\r\n// REGISTER USER\r\nexport const register =\r\n  ({ username, password, email, country, age }) =>\r\n  (dispatch) => {\r\n    // Headers\r\n    const config = {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    };\r\n\r\n    // Request Body\r\n    const body = JSON.stringify({ username, password, email, country, age });\r\n\r\n    http\r\n      .post(\"/users\", body, config)\r\n      .then((res) =>\r\n        dispatch({\r\n          type: slice.actions.registerSuccess.type,\r\n          payload: res.data,\r\n        })\r\n      )\r\n      .catch((err) => {\r\n        dispatch(returnErrors(err.response?.data, err.response?.status));\r\n        dispatch({ type: slice.actions.registerFail.type });\r\n      });\r\n  };\r\n\r\n// Setup config with token - helper function\r\n\r\nexport const tokenConfig = (getState) => {\r\n  // Get token from state\r\n  const token = getState().auth.token;\r\n\r\n  // Headers\r\n  const config = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  };\r\n\r\n  // If token, add to headers config\r\n  if (token) {\r\n    config.headers[\"Authorization\"] = `Token ${token}`;\r\n    config.headers[\"x-auth-token\"] = `${token}`;\r\n  }\r\n\r\n  return config;\r\n};\r\n","import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nconst slice = createSlice({\r\n  name: \"messages\",\r\n  initialState: {},\r\n  reducers: {\r\n    messagesCreated: (messages, action) => {\r\n      messages.messages = action.payload;\r\n    },\r\n  },\r\n});\r\n\r\nconsole.log(slice);\r\n\r\nexport const { messagesCreated } = slice.actions;\r\nexport default slice.reducer;\r\n\r\n// Action Creators\r\nexport const createMessage = (msg) => {\r\n return{\r\n    type: slice.actions.messagesCreated.type,\r\n    payload: msg,\r\n  };\r\n};\r\n","import { createSlice } from \"@reduxjs/toolkit\";\r\nimport { forEach } from \"lodash\";\r\nimport http from \"../services/httpService\";\r\nimport { tokenConfig } from \"./auth\";\r\n\r\nconst apiEndpoint = \"/users\";\r\n\r\nconst slice = createSlice({\r\n  name: \"users\",\r\n  initialState: { users: [], currentUser: {} },\r\n  reducers: {\r\n    userAdded: (users, action) => {\r\n      users.users.push(action.payload);\r\n    },\r\n    usersLoaded: (users, action) => {\r\n      users.users = action.payload;\r\n    },\r\n    userLoaded: (users, action) => {\r\n      users.currentUser = action.payload;\r\n    },\r\n    userObjectUpdated: (users, action) => {\r\n      const index = users.users.findIndex((user) => user._id === action.id);\r\n      users.users[index] = action.payload;\r\n    },\r\n    userUpdated: (users, action) => {\r\n      const index = users.users.findIndex((user) => user._id === action.id);\r\n      const keys = Object.keys(action.payload.$set);\r\n      let user = { ...users.users[index] };\r\n\r\n      keys.forEach((key) => {\r\n        user[`${key}`] = action.payload.$set[`${key}`];\r\n      });\r\n\r\n      users.users[index] = user;\r\n    },\r\n    userRemoved: (users, action) => {\r\n      const index = users.users.findIndex((user) => user.id === action.id);\r\n      users.users.splice(index, 1);\r\n    },\r\n  },\r\n});\r\n\r\nconsole.log(slice);\r\n\r\nexport const {\r\n  userAdded,\r\n  usersLoaded,\r\n  userLoaded,\r\n  userObjectUpdated,\r\n  userUpdated,\r\n  userRemoved,\r\n} = slice.actions;\r\nexport default slice.reducer;\r\n\r\n// Action Creators\r\nexport const loadUsers = () => async (dispatch, getState) => {\r\n  await http\r\n    .get(apiEndpoint, tokenConfig(getState))\r\n    .then((res) => {\r\n      dispatch({\r\n        type: slice.actions.usersLoaded.type,\r\n        payload: res.data,\r\n      });\r\n    })\r\n    .catch((err) => console.log(err.response?.data));\r\n};\r\n\r\nexport const loadCurrentUser = () => async (dispatch, getState) => {\r\n  await http\r\n    .get(`${apiEndpoint}/me`, tokenConfig(getState))\r\n    .then((res) => {\r\n      dispatch({\r\n        type: slice.actions.userLoaded.type,\r\n        payload: res.data,\r\n      });\r\n    })\r\n    .catch((err) => console.log(err.response?.data));\r\n};\r\n\r\nexport const addUser = (user) => async (dispatch, getState) => {\r\n  let errorObject = {\r\n    isError: false,\r\n    errorMessage: \"\",\r\n  };\r\n\r\n  await http\r\n    .post(apiEndpoint, user, tokenConfig(getState))\r\n    .then((res) => {\r\n      dispatch({\r\n        type: slice.actions.userAdded.type,\r\n        payload: res.data,\r\n      });\r\n    })\r\n    .catch((err) => {\r\n      console.log(err.response?.data);\r\n      errorObject.isError = true;\r\n      errorObject.errorMessage = err.response?.data;\r\n    });\r\n\r\n  return errorObject;\r\n};\r\n\r\nexport const updateAllUser = (user, id) => async (dispatch, getState) => {\r\n  let errorObject = {\r\n    isError: false,\r\n    errorMessage: \"\",\r\n  };\r\n\r\n  await http\r\n    .put(`${apiEndpoint}/${id}/`, user, tokenConfig(getState))\r\n    .then((res) => {\r\n      dispatch({\r\n        type: slice.actions.userObjectUpdated.type,\r\n        payload: res.data,\r\n        id,\r\n      });\r\n    })\r\n    .catch((err) => {\r\n      console.log(err.response?.data);\r\n      errorObject.isError = true;\r\n      errorObject.errorMessage = err.response?.data;\r\n    });\r\n\r\n  return errorObject;\r\n};\r\n\r\nexport const updateUser = (user, id) => async (dispatch, getState) => {\r\n  let errorObject = {\r\n    isError: false,\r\n    errorMessage: \"\",\r\n  };\r\n\r\n  const {\r\n    username,\r\n    email,\r\n    password,\r\n    isAdmin,\r\n    ordered_books,\r\n    liked_books,\r\n    age,\r\n    country,\r\n  } = user;\r\n  await http\r\n    .patch(\r\n      `${apiEndpoint}/${id}/`,\r\n      {\r\n        username,\r\n        email,\r\n        password,\r\n        isAdmin,\r\n        ordered_books,\r\n        liked_books,\r\n        age,\r\n        country,\r\n      },\r\n      tokenConfig(getState)\r\n    )\r\n    .then((res) => {\r\n      dispatch({\r\n        type: slice.actions.userUpdated.type,\r\n        payload: res.data,\r\n        id,\r\n      });\r\n    })\r\n    .catch((err) => {\r\n      console.log(err.response?.data);\r\n      errorObject.isError = true;\r\n      errorObject.errorMessage = err.response?.data;\r\n    });\r\n\r\n  return errorObject;\r\n};\r\n\r\nexport const deleteUser = (id) => async (dispatch, getState) => {\r\n  let errorObject = {\r\n    isError: false,\r\n    errorMessage: \"\",\r\n  };\r\n\r\n  await http\r\n    .delete(`${apiEndpoint}/${id}/`, tokenConfig(getState))\r\n    .then((res) => {\r\n      dispatch({\r\n        type: slice.actions.userRemoved.type,\r\n        payload: res.data,\r\n        id,\r\n      });\r\n    })\r\n    .catch((err) => {\r\n      console.log(err.response?.data);\r\n      errorObject.isError = true;\r\n      errorObject.errorMessage = err.response?.data;\r\n    });\r\n\r\n  return errorObject;\r\n};\r\n","import { createSlice } from \"@reduxjs/toolkit\";\r\nimport http from \"../services/httpService\";\r\nimport { tokenConfig } from \"./auth\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nconst apiEndpoint = \"/books\";\r\n\r\nconst slice = createSlice({\r\n  name: \"books\",\r\n  initialState: { books: [], currentBook: {} },\r\n  reducers: {\r\n    bookAdded: (books, action) => {\r\n      books.push(action.payload);\r\n    },\r\n    booksloaded: (books, action) => {\r\n      books.books = action.payload;\r\n    },\r\n    bookloaded: (books, action) => {\r\n      books.currentBook = action.payload;\r\n    },\r\n    bookRemoved: (books, action) => {\r\n      const index = books.books.findIndex((book) => book.id === action.id);\r\n      books.splice(index, 1);\r\n    },\r\n  },\r\n});\r\n\r\nconsole.log(slice);\r\n\r\nexport const { bookAdded, bookloaded, bookRemoved } = slice.actions;\r\nexport default slice.reducer;\r\n\r\n// Action Creators\r\nexport const loadBooks = () => async (dispatch) => {\r\n  await http\r\n    .get(apiEndpoint)\r\n    .then((res) => {\r\n      dispatch({\r\n        type: slice.actions.booksloaded.type,\r\n        payload: res.data,\r\n      });\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\nexport const loadBook = (id) => async (dispatch) => {\r\n  await http\r\n    .get(`${apiEndpoint}/${id}/`)\r\n    .then((res) => {\r\n      dispatch({\r\n        type: slice.actions.bookloaded.type,\r\n        payload: res.data,\r\n        id,\r\n      });\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\nexport const addBook = (book) => (dispatch, getState) => {\r\n  let errorObject = {\r\n    isError: false,\r\n    errorMessage: \"\",\r\n  };\r\n\r\n  http\r\n    .post(apiEndpoint, book, tokenConfig(getState))\r\n    .then((res) => {\r\n      dispatch({\r\n        type: slice.actions.bookAdded.type,\r\n        payload: res.data,\r\n      });\r\n    })\r\n    .catch((err) => {\r\n      console.log(err.response?.data);\r\n      errorObject.isError = true;\r\n      errorObject.errorMessage = err.response?.data;\r\n    });\r\n\r\n  return errorObject;\r\n};\r\n\r\nexport const deleteBook = (id) => (dispatch, getState) => {\r\n  let errorObject = {\r\n    isError: false,\r\n    errorMessage: \"\",\r\n  };\r\n\r\n  http\r\n    .delete(`${apiEndpoint}/${id}/`, tokenConfig(getState))\r\n    .then((res) => {\r\n      dispatch({\r\n        type: slice.actions.bookRemoved.type,\r\n        payload: res.data,\r\n        id,\r\n      });\r\n    })\r\n    .catch((err) => {\r\n      console.log(err.response?.data);\r\n      errorObject.isError = true;\r\n      errorObject.errorMessage = err.response?.data;\r\n    });\r\n\r\n  return errorObject;\r\n};\r\n","import { createSlice } from \"@reduxjs/toolkit\";\r\nimport http from \"../services/httpService\";\r\nimport { tokenConfig } from \"./auth\";\r\n\r\nconst apiEndpoint = \"/comments\";\r\n\r\nconst slice = createSlice({\r\n  name: \"comments\",\r\n  initialState: { comments: [] },\r\n  reducers: {\r\n    commentsloaded: (comments, action) => {\r\n      comments.comments = action.payload;\r\n    },\r\n    // commentloaded: (comments, action) => {\r\n    //   const index = comments.findIndex((comment) => comment.id === action.id);\r\n    //   comments[index] = action.payload;\r\n    // },\r\n    commentAdded: (comments, action) => {\r\n      comments.comments.push(action.payload);\r\n    },\r\n    // commentRemoved: (comments, action) => {\r\n    //   const index = comments.findIndex((comment) => comment.id === action.id);\r\n    //   comments.splice(index, 1);\r\n    // },\r\n    commentUpdated: (comments, action) => {\r\n      const index = comments.comments.findIndex(\r\n        (comment) => comment._id === action.id\r\n      );\r\n      let comment = { ...comments.comments[index] };\r\n\r\n      comment.like_counter = action.payload.$set.like_counter\r\n        ? action.payload.$set.like_counter\r\n        : comment.like_counter;\r\n\r\n      comment.like_submitter = action.payload.$set.like_submitter\r\n        ? action.payload.$set.like_submitter\r\n        : comment.like_submitter;\r\n\r\n      comment.dislike_counter = action.payload.$set.dislike_counter\r\n        ? action.payload.$set.dislike_counter\r\n        : comment.dislike_counter;\r\n\r\n      comment.dislike_submitter = action.payload.$set.dislike_submitter\r\n        ? action.payload.$set.dislike_submitter\r\n        : comment.dislike_submitter;\r\n\r\n      comment.comment_replies = action.payload.$set.comment_replies\r\n        ? action.payload.$set.comment_replies\r\n        : comment.comment_replies;\r\n\r\n      comments.comments[index] = comment;\r\n    },\r\n  },\r\n});\r\n\r\nconsole.log(slice);\r\n\r\nexport const { commentAdded, commentloaded, commentRemoved } = slice.actions;\r\nexport default slice.reducer;\r\n\r\n// Action Creators\r\nexport const loadComments = () => (dispatch) => {\r\n  http\r\n    .get(apiEndpoint)\r\n    .then((res) => {\r\n      dispatch({\r\n        type: slice.actions.commentsloaded.type,\r\n        payload: res.data,\r\n      });\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\nexport const addComment = (comment) => (dispatch, getState) => {\r\n  http\r\n    .post(apiEndpoint, comment, tokenConfig(getState))\r\n    .then((res) => {\r\n      dispatch({\r\n        type: slice.actions.commentAdded.type,\r\n        payload: res.data,\r\n      });\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\nexport const updateCommentCounter = (comment, id) => (dispatch, getState) => {\r\n  const { like_counter, like_submitter, dislike_counter, dislike_submitter } =\r\n    comment;\r\n\r\n  http\r\n    .patch(\r\n      `${apiEndpoint}/${id}/`,\r\n      {\r\n        like_counter,\r\n        like_submitter,\r\n        dislike_counter,\r\n        dislike_submitter,\r\n      },\r\n      tokenConfig(getState)\r\n    )\r\n    .then((res) => {\r\n      dispatch({\r\n        type: slice.actions.commentUpdated.type,\r\n        payload: res.data,\r\n        id,\r\n      });\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\nexport const updateCommentReplies = (comment, id) => (dispatch, getState) => {\r\n  const { comment_replies } = comment;\r\n\r\n  http\r\n    .patch(\r\n      `${apiEndpoint}/${id}/`,\r\n      {\r\n        comment_replies,\r\n      },\r\n      tokenConfig(getState)\r\n    )\r\n    .then((res) => {\r\n      dispatch({\r\n        type: slice.actions.commentUpdated.type,\r\n        payload: res.data,\r\n        id,\r\n      });\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n","import { createSlice } from \"@reduxjs/toolkit\";\r\nimport http from \"../services/httpService\";\r\nimport { tokenConfig } from \"./auth\";\r\n\r\nconst apiEndpoint = \"/orders\";\r\n\r\nconst slice = createSlice({\r\n  name: \"orders\",\r\n  initialState: { orders: {} },\r\n  reducers: {\r\n    orderAdded: (orders, action) => {\r\n      orders.orders.push(action.payload);\r\n    },\r\n    ordersloaded: (orders, action) => {\r\n      orders.orders = action.payload;\r\n    },\r\n    orderloaded: (orders, action) => {\r\n      const index = orders.findIndex((order) => order._id === action.id);\r\n      orders[index] = action.payload;\r\n    },\r\n    orderRemoved: (orders, action) => {\r\n      const index = orders.orders.findIndex((order) => order._id === action.id);\r\n      orders.orders.splice(index, 1);\r\n    },\r\n  },\r\n});\r\n\r\nconsole.log(slice);\r\n\r\nexport const { orderAdded, orderloaded, orderRemoved } = slice.actions;\r\nexport default slice.reducer;\r\n\r\n// Action Creators\r\nexport const loadOrders = () => (dispatch) => {\r\n  http\r\n    .get(apiEndpoint)\r\n    .then((res) => {\r\n      dispatch({\r\n        type: slice.actions.ordersloaded.type,\r\n        payload: res.data,\r\n      });\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\nexport const addOrder = (order) => (dispatch, getState) => {\r\n  http\r\n    .post(apiEndpoint, order, tokenConfig(getState))\r\n    .then((res) => {\r\n      dispatch({\r\n        type: slice.actions.orderAdded.type,\r\n        payload: res.data,\r\n      });\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\nexport const removeOrder = (id) => (dispatch, getState) => {\r\n  http\r\n    .delete(`${apiEndpoint}/${id}`, tokenConfig(getState))\r\n    .then((res) => {\r\n      dispatch({\r\n        type: slice.actions.orderRemoved.type,\r\n        payload: res.data,\r\n      });\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n","import { combineReducers } from \"redux\";\r\nimport auth from \"./auth\";\r\nimport errors from \"./errors\";\r\nimport messages from \"./messages\";\r\nimport users from \"./users\";\r\nimport books from \"./books\";\r\nimport comments from \"./comments\";\r\nimport orders from \"./orders\";\r\nimport admin from \"react-admin-table/dist/redux/admin\";\r\n\r\nexport default combineReducers({\r\n  admin,\r\n  auth,\r\n  users,\r\n  books,\r\n  comments,\r\n  orders,\r\n  errors,\r\n  messages,\r\n});\r\n","import { createStore, applyMiddleware } from \"redux\";\r\nimport { composeWithDevTools } from \"redux-devtools-extension\";\r\nimport thunk from \"redux-thunk\";\r\nimport rootReducer from \"./redux/rootReducer\";\r\n\r\nconst initialState = {};\r\n\r\nconst middleware = [thunk];\r\n\r\nconst store = createStore(\r\n  rootReducer,\r\n  initialState,\r\n  composeWithDevTools(applyMiddleware(...middleware))\r\n);\r\n\r\nexport default store;\r\n","import React, { useState, useEffect, useRef } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { logout } from \"./../redux/auth\";\r\n\r\nimport InputGroup from \"react-bootstrap/InputGroup\";\r\nimport FormControl from \"react-bootstrap/FormControl\";\r\nimport Form from \"react-bootstrap/Form\";\r\n\r\nfunction NavBar(props) {\r\n  NavBar.prototype = {\r\n    isAdmin: PropTypes.bool.isRequired,\r\n    isAuthenticated: PropTypes.bool.isRequired,\r\n    username: PropTypes.string.isRequired,\r\n    books: PropTypes.array.isRequired,\r\n    logout: PropTypes.func.isRequired,\r\n  };\r\n\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n  const [display, setDisplay] = useState(true);\r\n  const [phoneDisplay, setPhoneDisplay] = useState(true);\r\n\r\n  const wrapperRef = useRef(null);\r\n\r\n  const { isAdmin, isAuthenticated, username, books } = props;\r\n  let searchList = books.filter((book) =>\r\n    book.name.toLowerCase().includes(searchQuery.toLowerCase())\r\n  );\r\n  searchList = searchList.slice(0, 5);\r\n\r\n  let history = useHistory();\r\n\r\n  console.log(isAdmin);\r\n\r\n  useEffect(() => {\r\n    window.addEventListener(\"mousedown\", handleClickOutside);\r\n\r\n    return () => {\r\n      window.removeEventListener(\"mousedown\", handleClickOutside);\r\n    };\r\n  });\r\n\r\n  const handleClickOutside = (event) => {\r\n    const { current: wrap } = wrapperRef;\r\n    if (wrap && !wrap.contains(event.target)) {\r\n      setPhoneDisplay(true);\r\n    }\r\n  };\r\n\r\n  function truncate(str, n) {\r\n    return str?.length > n ? str.substr(0, n - 1) + \"...\" : str;\r\n  }\r\n\r\n  const handleLogin = () => {\r\n    isAuthenticated ? props.logout() : history.push(\"/login\");\r\n  };\r\n\r\n  const handleSearch = (e) => {\r\n    setSearchQuery(e.currentTarget.value);\r\n  };\r\n\r\n  const onSubmit = (e) => {\r\n    if (!searchQuery) alert(\"The search input is empty.\");\r\n    else {\r\n      e.preventDefault();\r\n      history.push(`/search/${searchQuery}`);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className=\"bookstore_navbar\">\r\n        <div className=\"navbar_brand\" style={{ width: \"10%\" }}>\r\n          <Link to=\"/\" style={{ textDecoration: \"none\", color: \"gold\" }}>\r\n            <p>\r\n              Book <strong>Store</strong>\r\n            </p>\r\n          </Link>\r\n        </div>\r\n\r\n        {isAuthenticated && (\r\n          <div className=\"navbar_item\" style={{ width: \"10%\" }}>\r\n            <p style={{ color: \"gold\" }}>\r\n              Hello <strong style={{ color: \"gold\" }}>{username}</strong>\r\n            </p>\r\n          </div>\r\n        )}\r\n\r\n        <Form className=\"search_form\" style={{ width: \"40%\", margin: \"0 50px\" }} onSubmit={onSubmit} >\r\n          <Form.Group>\r\n            <InputGroup\r\n              className=\"mb-3\"\r\n              ref={wrapperRef}\r\n              onClick={() => {\r\n                if (display === false) setDisplay(!display);\r\n              }}\r\n            >\r\n              <FormControl\r\n                placeholder=\"Search book...\"\r\n                aria-label=\"Search book...\"\r\n                aria-describedby=\"basic-addon2\"\r\n                onChange={handleSearch}\r\n              />\r\n              <InputGroup.Append>\r\n                <i\r\n                  className=\"fa fa-search search_icon\"\r\n                  onClick={onSubmit}\r\n                ></i>\r\n              </InputGroup.Append>\r\n              {display && searchQuery && (\r\n                <div className=\"search__list\">\r\n                  {searchList?.map((book) => (\r\n                    <div\r\n                      onClick={() =>\r\n                        (window.location.href = `/books/${book._id}`)\r\n                      }\r\n                      className=\"search__list__element\"\r\n                      key={book._id}\r\n                    >\r\n                      <img\r\n                        src={`${process.env.REACT_APP_ROOT_URL}/${book.image}`}\r\n                        alt={book.image}\r\n                      />\r\n                      <div>\r\n                        <p>\r\n                          <strong>{truncate(book.name, 50)}</strong>\r\n                        </p>\r\n                        <p>by {book.author}</p>\r\n                      </div>\r\n\r\n                      <hr />\r\n                    </div>\r\n                  ))}\r\n                  <div\r\n                    onClick={() =>\r\n                      (window.location.href = `/search/${searchQuery}`)\r\n                    }\r\n                    className=\"search__all__element\"\r\n                  >\r\n                    <p>See all result for \"{searchQuery}\"</p>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </InputGroup>\r\n          </Form.Group>\r\n        </Form>\r\n\r\n        <div\r\n          className=\"navbar_menu\"\r\n          style={{\r\n            width: \"40%\",\r\n          }}\r\n        >\r\n          <div\r\n            className=\"navbar-end\"\r\n            style={{\r\n              display: \"flex\",\r\n              flexDirection: \"row\",\r\n              marginTop: \"-10px\",\r\n            }}\r\n          >\r\n            <div\r\n              onClick={handleLogin}\r\n              className=\"navbar-item\"\r\n              style={{ color: \"gold\", cursor: \"pointer\" }}\r\n            >\r\n              {isAuthenticated ? \"Logout\" : \"Login\"}\r\n            </div>\r\n            <Link to=\"/books\" className=\"navbar-item\" style={{ color: \"gold\" }}>\r\n              Books\r\n            </Link>\r\n            {isAuthenticated && isAdmin && (\r\n              <Link\r\n                to=\"/admin\"\r\n                className=\"navbar-item\"\r\n                style={{ color: \"gold\" }}\r\n              >\r\n                Admin\r\n              </Link>\r\n            )}\r\n            {isAuthenticated && (\r\n              <Link\r\n                to=\"/orders\"\r\n                className=\"navbar-item\"\r\n                style={{ color: \"gold\" }}\r\n              >\r\n                Orders\r\n              </Link>\r\n            )}\r\n\r\n            <span className=\"navbar-item\" >\r\n              <a\r\n                className=\"button is-info is-inverted github_btn\"\r\n                href=\"https://github.com/yahyaest/BookStore_App\"\r\n              >\r\n                <span className=\"icon\">\r\n                  <i className=\"fa fa-github\"></i>\r\n                </span>\r\n                <span>Download</span>\r\n              </a>\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"bookstore_navbar_android\">\r\n        <div className=\"first_nav\">\r\n          <div\r\n            className=\"navbar_brand\"\r\n            style={{ width: \"25%\", fontSize: \"10px\" }}\r\n          >\r\n            <Link to=\"/\" style={{ textDecoration: \"none\", color: \"gold\" }}>\r\n              <p>\r\n                Book <strong>Store</strong>\r\n              </p>\r\n            </Link>\r\n          </div>\r\n\r\n          {isAuthenticated && (\r\n            <div\r\n              className=\"navbar_item\"\r\n              style={{ width: \"15%\", fontSize: \"10px\" }}\r\n            >\r\n              <p style={{ color: \"gold\" }}>\r\n                Hello <strong style={{ color: \"gold\" }}>{username}</strong>\r\n              </p>\r\n            </div>\r\n          )}\r\n\r\n          <div\r\n            className=\"navbar_menu\"\r\n            style={{\r\n              width: \"60%\",\r\n            }}\r\n          >\r\n            <div\r\n              className=\"navbar-end\"\r\n              style={{\r\n                display: \"flex\",\r\n                flexDirection: \"row\",\r\n                marginTop: \"-10px\",\r\n                fontSize: \"10px\",\r\n              }}\r\n            >\r\n              <div\r\n                onClick={handleLogin}\r\n                className=\"navbar-item\"\r\n                style={{ color: \"gold\", cursor: \"pointer\" }}\r\n              >\r\n                {isAuthenticated ? \"Logout\" : \"Login\"}\r\n              </div>\r\n              <Link\r\n                to=\"/books\"\r\n                className=\"navbar-item\"\r\n                style={{ color: \"gold\" }}\r\n              >\r\n                Books\r\n              </Link>\r\n\r\n              {isAuthenticated && isAdmin && (\r\n                <Link\r\n                  to=\"/admin\"\r\n                  className=\"navbar-item\"\r\n                  style={{ color: \"gold\" }}\r\n                >\r\n                  Admin\r\n                </Link>\r\n              )}\r\n              \r\n              {isAuthenticated && (\r\n                <Link\r\n                  to=\"/orders\"\r\n                  className=\"navbar-item\"\r\n                  style={{ color: \"gold\" }}\r\n                >\r\n                  Orders\r\n                </Link>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"second_nav\">\r\n          <Form style={{ width: \"90%\" }} onSubmit={onSubmit}>\r\n            <Form.Group>\r\n              <InputGroup\r\n                className=\"mb-3\"\r\n                ref={wrapperRef}\r\n                onClick={() => {\r\n                  if (phoneDisplay === false) setPhoneDisplay(!phoneDisplay);\r\n                }}\r\n              >\r\n                <FormControl\r\n                  placeholder=\"Search book...\"\r\n                  aria-label=\"Search book...\"\r\n                  aria-describedby=\"basic-addon2\"\r\n                  onChange={handleSearch}\r\n                />\r\n                <InputGroup.Append>\r\n                  <i\r\n                    className=\"fa fa-search search_icon\"\r\n                   \r\n                    onClick={onSubmit}\r\n                  ></i>\r\n                </InputGroup.Append>\r\n                {phoneDisplay && searchQuery && (\r\n                  <div className=\"search__list\">\r\n                    {searchList?.map((book) => (\r\n                      <div\r\n                        onClick={() =>\r\n                          (window.location.href = `/books/${book._id}`)\r\n                        }\r\n                        className=\"search__list__element\"\r\n                        key={book._id}\r\n                      >\r\n                        <img\r\n                          src={`${process.env.REACT_APP_ROOT_URL}/${book.image}`}\r\n                          alt={book.image}\r\n                        />\r\n                        <div>\r\n                          <p>\r\n                            <strong>{truncate(book.name, 50)}</strong>\r\n                          </p>\r\n                          <p>by {book.author}</p>\r\n                        </div>\r\n\r\n                        <hr />\r\n                      </div>\r\n                    ))}\r\n                    <div\r\n                      onClick={() =>\r\n                        (window.location.href = `/search/${searchQuery}`)\r\n                      }\r\n                      className=\"search__all__element\"\r\n                    >\r\n                      <p>See all result for \"{searchQuery}\"</p>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </InputGroup>\r\n            </Form.Group>\r\n          </Form>\r\n        </div>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  isAdmin: state.auth.isAdmin,\r\n  isAuthenticated: state.auth.isAuthenticated,\r\n  username: state.auth.username,\r\n  books: state.books.books,\r\n});\r\n\r\nexport default connect(mapStateToProps, { logout })(NavBar);\r\n","import React from \"react\";\r\nimport { MDBCol, MDBContainer, MDBRow, MDBFooter } from \"mdbreact\";\r\n\r\nfunction Footer() {\r\n  return (\r\n    <MDBFooter color=\"red darken-1\" className=\"font-small pt-4 mt-4\">\r\n      <MDBContainer fluid className=\"text-center text-md-left\">\r\n        <MDBRow>\r\n          <MDBCol md=\"8\">\r\n            <h5 className=\"title\">Social Links</h5>\r\n            <p>CONNECT</p>\r\n            <a\r\n              className=\"footer__socialLink\"\r\n              href=\"https://www.facebook.com/Goodreads/\"\r\n            >\r\n              <img\r\n                alt=\"Facebook\"\r\n                src=\"//s.gr-assets.com/assets/site_footer/footer_facebook-ea4ab848f8e86c5f5c98311bc9495a1b.svg\"\r\n              />\r\n            </a>\r\n            <a\r\n              className=\"footer__socialLink\"\r\n              href=\"https://twitter.com/goodreads\"\r\n            >\r\n              <img\r\n                alt=\"Twitter\"\r\n                src=\"//s.gr-assets.com/assets/site_footer/footer_twitter-126b3ee80481a763f7fccb06ca03053c.svg\"\r\n              />\r\n            </a>\r\n            <a\r\n              className=\"footer__socialLink\"\r\n              href=\"https://www.instagram.com/goodreads/\"\r\n            >\r\n              <img\r\n                alt=\"Instagram\"\r\n                src=\"//s.gr-assets.com/assets/site_footer/footer_instagram-d59e3887020f12bcdb12e6c539579d85.svg\"\r\n              />\r\n            </a>\r\n            <a\r\n              className=\"footer__socialLink\"\r\n              href=\"https://www.linkedin.com/company/goodreads-com/\"\r\n            >\r\n              <img\r\n                alt=\"LinkedIn\"\r\n                src=\"//s.gr-assets.com/assets/site_footer/footer_linkedin-5b820f4703eff965672594ef4d10e33c.svg\"\r\n              />\r\n            </a>\r\n            <a\r\n              className=\"footer__socialLink\"\r\n              href=\"https://github.com/yahyaest\"\r\n            >\r\n              <img\r\n                alt=\"Github\"\r\n                src=\"https://cdn4.iconfinder.com/data/icons/iconsimple-logotypes/512/github-512.png\"\r\n                style={{ width: \"30px\", color: \"#b48484\" }}\r\n              />\r\n            </a>\r\n          </MDBCol>\r\n          <MDBCol md=\"4\">\r\n            <h5 className=\"title\">Links</h5>\r\n            <ul>\r\n              <li className=\"list-unstyled\">\r\n                <a href=\"/books\">Books</a>\r\n              </li>\r\n              <li className=\"list-unstyled\">\r\n                <a href=\"https://covid-19-tracker-44022.web.app/\">\r\n                  Covid Tracker\r\n                </a>\r\n              </li>\r\n              <li className=\"list-unstyled\">\r\n                <a href=\"https://games-api-finder.web.app/\">Game Finder</a>\r\n              </li>\r\n            </ul>\r\n          </MDBCol>\r\n        </MDBRow>\r\n      </MDBContainer>\r\n      <div className=\"footer-copyright text-center py-3\">\r\n        <MDBContainer fluid>\r\n          &copy; {new Date().getFullYear()} Copyright:{\" \"}\r\n          <a href=\"https://github.com/yahyaest/BookStore_App\">BookStore App</a>\r\n        </MDBContainer>\r\n      </div>\r\n    </MDBFooter>\r\n  );\r\n}\r\n\r\nexport default Footer;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport _ from \"lodash\";\r\nimport Pagination from \"react-bootstrap/Pagination\";\r\n\r\n\r\nconst Paginate = (props) => {\r\nPaginate.propTypes = {\r\n  itemsCounts: PropTypes.number.isRequired,\r\n  pageSize: PropTypes.number.isRequired,\r\n  currentPage: PropTypes.number.isRequired,\r\n  onPageChange: PropTypes.func.isRequired,\r\n  };\r\n  \r\n  const { itemsCounts, pageSize, currentPage, onPageChange } = props;\r\n  const pagesCount = Math.ceil(itemsCounts / pageSize); //Math.ceil convert float to integer greater then or equal to the float number\r\n  if (pagesCount === 1) return null;\r\n\r\n  let items = [];\r\n  for (let number = 1; number <= pagesCount; number++) {\r\n    items.push(\r\n      <Pagination.Item\r\n        key={number}\r\n        className={number === currentPage ? \"page-item active\" : \"page-item\"}\r\n        onClick={() => onPageChange(number)}\r\n      >\r\n        {number}\r\n      </Pagination.Item>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Pagination>{items}</Pagination>\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\n\r\nexport default Paginate;\r\n","import React from \"react\";\r\nimport _ from \"lodash\";\r\nimport Carousel from \"react-multi-carousel\";\r\nimport \"react-multi-carousel/lib/styles.css\";\r\n\r\nfunction BooksCarouselComponent(props) {\r\n  const { booksList } = props;\r\n  const responsive = {\r\n    desktop: {\r\n      breakpoint: { max: 3000, min: 1024 },\r\n      items: 5,\r\n    },\r\n    mobile: {\r\n      breakpoint: { max: 360, min: 0 },\r\n      items: 2,\r\n    },\r\n  };\r\n\r\n  const getBestBooks = () => {\r\n    let bestBooks = _.orderBy(booksList, \"rate\", \"desc\");\r\n    bestBooks = _.slice(bestBooks, [0], [10]);\r\n    return bestBooks;\r\n  };\r\n  getBestBooks();\r\n\r\n  // console.log(booksList?.length);\r\n  return (\r\n    <React.Fragment>\r\n      <div className=\"carousel__title\">\r\n        <p> Top 10 Books</p>\r\n      </div>\r\n      <Carousel\r\n        swipeable={false}\r\n        draggable={false}\r\n        showDots={true}\r\n        responsive={responsive}\r\n        focusOnSelect={true}\r\n        ssr={true} // means to render carousel on server-side.\r\n        infinite={true}\r\n        containerClass=\"carousel-container\"\r\n        dotListClass=\"custom-dot-list-style\"\r\n        itemClass=\"carousel-item-padding-20-px\"\r\n      >\r\n        {getBestBooks()?.map((book) => (\r\n          <div key={book._id}>\r\n            <img\r\n              className=\"carousel__img\"\r\n              src={`${process.env.REACT_APP_ROOT_URL}/${book.image}`}\r\n              alt={book.name}\r\n              onClick={() => props.goToBookPage(book._id)}\r\n            />\r\n          </div>\r\n        ))}\r\n      </Carousel>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default BooksCarouselComponent;\r\n","import React from \"react\";\r\nimport Card from \"react-bootstrap/Card\";\r\n\r\nfunction booksCards(props) {\r\n  const { booksList, user } = props;\r\n  return (\r\n    <div className=\"books__cards\">\r\n      {booksList?.map((book, index) => (\r\n        <Card key={book._id} className=\"book__card\" >\r\n          <Card.Img\r\n            variant=\"top\"\r\n            src={`${process.env.REACT_APP_ROOT_URL}/${book.image}`}\r\n            alt={book.name}\r\n            onClick={() => props.goToBookPage(book._id)}\r\n          />\r\n          <Card.Body>\r\n            <Card.Title>{book.name}</Card.Title>\r\n\r\n            <Card.Text>{book.author}</Card.Text>\r\n            <Card.Text>Rate : {book.rate} </Card.Text>\r\n            <Card.Text>\r\n              <strong>{book.price} $</strong>\r\n            </Card.Text>\r\n            <i\r\n              className={\r\n                props.CheckBookIsLiked(book) ? \"fa fa-heart\" : \"fa fa-heart-o\"\r\n              }\r\n              onClick={() => {\r\n                props.handleFavouriteIcon(user?._id, index, book);\r\n              }}\r\n            ></i>\r\n          </Card.Body>\r\n        </Card>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default booksCards;\r\n","import React from 'react'\r\nimport Dropdown from \"react-bootstrap/Dropdown\";\r\n\r\nfunction SortSelector(props) {\r\n return (\r\n   <div>\r\n     <Dropdown>\r\n       <Dropdown.Toggle variant=\"warning\" id=\"dropdown-basic\" size=\"sm\">\r\n         Sort By\r\n       </Dropdown.Toggle>\r\n\r\n       <Dropdown.Menu>\r\n         <Dropdown.Item onClick={() => props.onSort(\"name\")}>\r\n           Name\r\n         </Dropdown.Item>\r\n         <Dropdown.Item onClick={() => props.onSort(\"price\")}>\r\n           Price\r\n         </Dropdown.Item>\r\n         <Dropdown.Item onClick={() => props.onSort(\"rate\")}>\r\n           Rate\r\n         </Dropdown.Item>\r\n       </Dropdown.Menu>\r\n     </Dropdown>\r\n   </div>\r\n );\r\n}\r\n\r\nexport default SortSelector\r\n","import React from \"react\";\r\nimport  Dropdown  from \"react-bootstrap/Dropdown\";\r\n\r\n\r\nfunction GenreSelector(props) {\r\n  const { genre, books } = props;\r\n  return (\r\n    <div>\r\n      <Dropdown>\r\n        <Dropdown.Toggle variant=\"danger\" id=\"dropdown-basic\" size=\"sm\">\r\n          {genre}\r\n        </Dropdown.Toggle>\r\n\r\n        <Dropdown.Menu>\r\n          {props.getGenresList(books)?.map((genre) => (\r\n            <Dropdown.Item key={genre} onClick={() => props.filterByGenre(genre)}>\r\n              {genre}\r\n            </Dropdown.Item>\r\n          ))}\r\n        </Dropdown.Menu>\r\n      </Dropdown>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default GenreSelector;\r\n","import React from \"react\";\r\nimport InputGroup from \"react-bootstrap/InputGroup\";\r\nimport FormControl from \"react-bootstrap/FormControl\";\r\nimport Button from \"react-bootstrap/Button\";\r\n\r\nfunction Search(props) {\r\n  const { handleSearch } = props;\r\n\r\n  return (\r\n    <div className=\"books__search\">\r\n      <InputGroup\r\n        className=\"mb-3\"\r\n        size=\"sm\"\r\n      >\r\n        <FormControl\r\n          placeholder=\"Start search\"\r\n          aria-label=\"Start search\"\r\n          aria-describedby=\"basic-addon2\"\r\n          onChange={handleSearch}\r\n        />\r\n        <InputGroup.Append>\r\n          <Button variant=\"info\" style={{ margin: 0 }} className=\"search_btn\">\r\n            Search\r\n          </Button>\r\n        </InputGroup.Append>\r\n      </InputGroup>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Search;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport PropTypes from \"prop-types\";\r\nimport { updateUser } from \"./../redux/users\";\r\nimport { createMessage } from \"../redux/messages\";\r\n\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport _ from \"lodash\";\r\nimport { toast } from \"react-toastify\";\r\nimport NavBar from \"./../common/navbar\";\r\nimport Footer from \"./../common/footer\";\r\nimport Pagination from \"./../common/pagination\";\r\nimport BooksCarouselComponent from \"./booksCarouselComponent\";\r\nimport BooksCards from \"./booksCards\";\r\nimport SortSelector from \"./../common/sortSelector\";\r\nimport GenreSelector from \"./../common/GenreSelector\";\r\nimport Search from \"./../common/search\";\r\n\r\nfunction BooksComponentPage(props) {\r\n  BooksComponentPage.prototype = {\r\n    books: PropTypes.array.isRequired,\r\n    users: PropTypes.array.isRequired,\r\n    username: PropTypes.string.isRequired,\r\n    isAuthenticated: PropTypes.bool.isRequired,\r\n    updateUser: PropTypes.func.isRequired,\r\n    createMessage: PropTypes.func.isRequired,\r\n  };\r\n\r\n  const { books, users, username, isAuthenticated } = props;\r\n\r\n  const [user, setUser] = useState({});\r\n  const [genre, setGenre] = useState(\"Genres\");\r\n  const [sortBy, setSortBy] = useState(\"\");\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [isLiked, setIsLiked] = useState([]);\r\n\r\n  const pageSize = 8;\r\n\r\n  let history = useHistory();\r\n\r\n  const sleep = (ms) => {\r\n    return new Promise((resolve) => setTimeout(resolve, ms));\r\n  };\r\n\r\n  const getUser = () => {\r\n    const profile = users.filter((user) => user.username === username);\r\n    setUser(profile[0]);\r\n  };\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      await sleep(100);\r\n      getUser();\r\n    }\r\n    fetchData();\r\n  }, [books, users]);\r\n\r\n  const goToBookPage = (id) => {\r\n    history.push(`/books/${id}`);\r\n  };\r\n\r\n  const handleSearch = (e) => {\r\n    setCurrentPage(1);\r\n    setSearchQuery(e.currentTarget.value);\r\n  };\r\n\r\n  const getGenresList = (books) => {\r\n    let genres = [\"All\"];\r\n    books?.map((book) => {\r\n      if (genres.findIndex((genre) => book.genre === genre) === -1)\r\n        genres.push(book.genre);\r\n    });\r\n    return genres;\r\n  };\r\n\r\n  const filterByGenre = (genre) => {\r\n    if (genre === \"All\") setGenre(\"Genres\");\r\n    else setGenre(genre);\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  const onSort = (sortType) => {\r\n    setSortBy(sortType);\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  const paginate = (items, pageNumber, pageSize) => {\r\n    const startIndex = (pageNumber - 1) * pageSize;\r\n    return _(items).slice(startIndex).take(pageSize).value();\r\n  };\r\n\r\n  const handlePageChange = (page) => {\r\n    setCurrentPage(page);\r\n  };\r\n\r\n  const getBookData = (genre, sortType) => {\r\n    // 1-filter\r\n    let result = [];\r\n    if (searchQuery)\r\n      result = books.filter((book) =>\r\n        book.name.toLowerCase().startsWith(searchQuery.toLowerCase())\r\n      );\r\n    else if (genre === \"Genres\") result = books;\r\n    else result = books.filter((book) => book.genre === genre);\r\n    // 2-sort\r\n    const sorted = _.orderBy(result, sortType, \"asc\");\r\n    // 3-paginate\r\n    const booksList = paginate(sorted, currentPage, pageSize);\r\n    const count =\r\n      genre === \"Genres\" && !searchQuery ? books.length : result.length;\r\n    return { booksList, count };\r\n  };\r\n\r\n  const CheckBookIsLiked = (book) => {\r\n    if (isAuthenticated) {\r\n      const profile = users.filter((user) => user.username === username);\r\n      const user = profile[0];\r\n      let currentProfile = {\r\n        ...user,\r\n      };\r\n      let { liked_books } = currentProfile;\r\n\r\n      const found_liked = liked_books?.findIndex(\r\n        (order) => order.name === book.name\r\n      );\r\n\r\n      if (found_liked === -1) {\r\n        return false;\r\n      } else {\r\n        return true;\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleFavouriteIcon = (id, index, book) => {\r\n    if (!isAuthenticated)\r\n      toast.error(\"You need to log in to perform this action.\", {\r\n        toastId: \"notLogged\",\r\n      });\r\n    else {\r\n      let currentProfile = { ...user };\r\n      let { liked_books } = currentProfile;\r\n      let arrayLiked = [...liked_books];\r\n      const found = arrayLiked.findIndex((order) => order.name === book.name);\r\n      if (found === -1) {\r\n        arrayLiked.push(book);\r\n        let array = [...isLiked];\r\n        array[index] = true;\r\n        setIsLiked(array);\r\n        //props.createMessage({ addedToLiked: \"Added to liked books\" });\r\n        toast.info(\"Added to liked books\" );\r\n\r\n      } else {\r\n        arrayLiked.splice(found, 1);\r\n        let array = [...isLiked];\r\n        array[index] = false;\r\n        setIsLiked(array);\r\n        //props.createMessage({ removedFromLiked: \"Removed from liked books\" });\r\n        toast.warn(\"Removed from liked books\" );\r\n\r\n      }\r\n      currentProfile.liked_books = arrayLiked;\r\n      props.updateUser(currentProfile, id);\r\n    }\r\n  };\r\n\r\n  const { booksList, count } = getBookData(genre, sortBy);\r\n  return (\r\n    <React.Fragment>\r\n      <NavBar />\r\n      <div className=\"books\">\r\n        <BooksCarouselComponent\r\n          className=\"books__carousel\"\r\n          booksList={props.books}\r\n          goToBookPage={goToBookPage}\r\n        />\r\n\r\n        <div className=\"books__filters\">\r\n          <SortSelector onSort={onSort} />\r\n          <GenreSelector\r\n            genre={genre}\r\n            books={books}\r\n            getGenresList={getGenresList}\r\n            filterByGenre={filterByGenre}\r\n          />\r\n        </div>\r\n\r\n        <Search handleSearch={handleSearch} />\r\n\r\n        <BooksCards\r\n          booksList={booksList}\r\n          user={user}\r\n          goToBookPage={goToBookPage}\r\n          CheckBookIsLiked={CheckBookIsLiked}\r\n          handleFavouriteIcon={handleFavouriteIcon}\r\n        />\r\n      </div>\r\n      <Pagination\r\n        itemsCounts={count}\r\n        pageSize={pageSize}\r\n        currentPage={currentPage}\r\n        onPageChange={handlePageChange}\r\n      />\r\n      <Footer />\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  books: state.books.books,\r\n  users: state.users.users,\r\n  username: state.auth.username,\r\n  isAuthenticated: state.auth.isAuthenticated,\r\n});\r\n\r\nexport default connect(mapStateToProps, { updateUser, createMessage })(\r\n  BooksComponentPage\r\n);\r\n","export function truncate(str, n) {\r\n  return str?.length > n ? str.substr(0, n - 1) + \"...\" : str;\r\n}\r\n\r\nexport function resizeCommentText(comment, screenWidth) {\r\n  let lineSize = 0;\r\n\r\n  if (screenWidth < 1501) lineSize = 26;\r\n  if (screenWidth < 1351) lineSize = 22;\r\n  if (screenWidth < 1201) lineSize = 18;\r\n  if (screenWidth < 993) lineSize = 15;\r\n  if (screenWidth < 767) lineSize = 13;\r\n  if (screenWidth < 577) lineSize = 8;\r\n\r\n  if (lineSize > 0) {\r\n    const commentWord = comment.replace(\"\\n\",\"\").split(\" \");\r\n    const commentParts = commentWord.length / lineSize;\r\n    let resizedComment = \"\";\r\n    for (let i = 0; i < commentParts; i++) {\r\n      let part = \"\";\r\n      for (let j = 0; j < lineSize; j++) {\r\n        if (commentWord[i * lineSize + j]) {\r\n          part = part + commentWord[i * lineSize + j] + \" \";\r\n        }\r\n      }\r\n\r\n      resizedComment = resizedComment + part + \"\\n\";\r\n    }\r\n\r\n    return resizedComment;\r\n  }\r\n\r\n  return comment;\r\n}\r\n\r\nexport function getCommentDate(commentDate) {\r\n  // time Passed in milliseconds\r\n  const passdTime = Date.now() - Date.parse(commentDate);\r\n  const secondes = Math.trunc(passdTime / 1000); // secondes\r\n  const minutes = Math.trunc(passdTime / (1000 * 60)); // minutes\r\n  const hours = Math.trunc(passdTime / (1000 * 3600)); // hours\r\n  const days = Math.trunc(passdTime / (1000 * 3600 * 24)); // days\r\n  const weeks = Math.trunc(passdTime / (1000 * 3600 * 24 * 7)); // weeks\r\n  const months = Math.trunc(passdTime / (1000 * 3600 * 24 * 30)); // months\r\n  const years = Math.trunc(passdTime / (1000 * 3600 * 24 * 365)); // years\r\n\r\n  if (secondes < 60) return \"Now\";\r\n  if (minutes < 2) return `${minutes} minute ago`;\r\n  if (minutes < 60) return `${minutes} minutes ago`;\r\n  if (hours < 2) return `${hours} hour ago`;\r\n  if (hours < 24) return `${hours} hours ago`;\r\n  if (days < 2) return `${days} day ago`;\r\n  if (days < 8) return `${days} days ago`;\r\n  if (weeks < 2) return `${weeks} week ago`;\r\n  if (weeks < 4) return `${weeks} weeks ago`;\r\n  if (months < 2) return `${months} month ago`;\r\n  if (months < 12) return `${months} months ago`;\r\n  if (years < 2) return `${years} year ago`;\r\n  return `${years} years ago`;\r\n}\r\n\r\nexport function handleLikeDislikeCounter(comment, user, type) {\r\n  // Copy from comment Object with spread operator\r\n  let tempComment = { ...comment };\r\n\r\n  let submitter_like_list = [...tempComment.like_submitter];\r\n  let submitter_dislike_list = [...tempComment.dislike_submitter];\r\n\r\n  // get like and dislike submitter index\r\n  const likeIndex = submitter_like_list.findIndex(\r\n    (element) => element._id === user._id\r\n  );\r\n  const dislikeIndex = submitter_dislike_list.findIndex(\r\n    (element) => element._id === user._id\r\n  );\r\n  // Logic for increment/decrement like/dislike counter\r\n  if (type === \"increment\") {\r\n    if (likeIndex === -1) {\r\n      submitter_like_list.push({\r\n        _id: user._id,\r\n        username: user.username,\r\n        email: user.email,\r\n      });\r\n      tempComment.like_counter++;\r\n\r\n      if (dislikeIndex !== -1) {\r\n        submitter_dislike_list.splice(dislikeIndex, 1);\r\n        tempComment.dislike_counter--;\r\n        // if (tempComment.dislike_counter === 0) {\r\n        //   window.location.reload();\r\n        // }\r\n      }\r\n    } else {\r\n      submitter_like_list.splice(likeIndex, 1);\r\n      tempComment.like_counter--;\r\n      // if (tempComment.like_counter === 0) {\r\n      //   window.location.reload();\r\n      // }\r\n    }\r\n  }\r\n  if (type === \"decrement\") {\r\n    if (dislikeIndex === -1) {\r\n      submitter_dislike_list.push({\r\n        _id: user._id,\r\n        username: user.username,\r\n        email: user.email,\r\n      });\r\n      tempComment.dislike_counter++;\r\n\r\n      if (likeIndex !== -1) {\r\n        submitter_like_list.splice(likeIndex, 1);\r\n        tempComment.like_counter--;\r\n        // if (tempComment.like_counter === 0) {\r\n        //   window.location.reload();\r\n        // }\r\n      }\r\n    } else {\r\n      submitter_dislike_list.splice(dislikeIndex, 1);\r\n      tempComment.dislike_counter--;\r\n      // if (tempComment.dislike_counter === 0) {\r\n      //   window.location.reload();\r\n      // }\r\n    }\r\n  }\r\n\r\n  // Execution part\r\n  tempComment.like_submitter = submitter_like_list;\r\n  tempComment.dislike_submitter = submitter_dislike_list;\r\n\r\n  return tempComment;\r\n\r\n  // window.location.reload();\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { PropTypes } from \"prop-types\";\r\nimport { toast } from \"react-toastify\";\r\nimport {\r\n  addComment,\r\n  updateCommentCounter,\r\n  updateCommentReplies,\r\n} from \"../redux/comments\";\r\nimport InputGroup from \"react-bootstrap/InputGroup\";\r\nimport FormControl from \"react-bootstrap/FormControl\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport {getCommentDate,resizeCommentText} from \"../services/comments-utils\"\r\n\r\nfunction BookComment(props) {\r\n  BookComment.prototype = {\r\n    comments: PropTypes.array.isRequired,\r\n    users: PropTypes.array.isRequired,\r\n    isAuthenticated: PropTypes.bool.isRequired,\r\n    username: PropTypes.string.isRequired,\r\n    userId: PropTypes.number.isRequired,\r\n\r\n    addComment: PropTypes.func.isRequired,\r\n    updateCommentCounter: PropTypes.func.isRequired,\r\n    updateCommentReplies: PropTypes.func.isRequired,\r\n  };\r\n\r\n  const [newComment, setNewComment] = useState(\"\");\r\n  const [bookComments, setBookComments] = useState([]);\r\n\r\n  const [showReplies, setShowReplies] = useState([]);\r\n  const [reply, setReply] = useState(\"\");\r\n  const [isReply, setIsReply] = useState([]);\r\n   const [innerWidth, setInnerWidth] = useState(\r\n     window.innerWidth\r\n    );\r\n\r\n  const { isAuthenticated, username, bookId, userId, comments, users } = props;\r\n\r\n// Resize event listner\r\n    window.addEventListener(\"resize\", function () {\r\n        setInnerWidth(window.innerWidth);\r\n        return window.innerWidth;\r\n      });\r\n\r\n\r\n   // Textarea overflow event\r\n    var tx = document.getElementsByTagName(\"textarea\");\r\n    for (var i = 0; i < tx.length; i++) {\r\n      tx[i].setAttribute(\r\n        \"style\",\r\n        \"height:\" + tx[i].scrollHeight + \"px;overflow-y:hidden;\"\r\n      );\r\n      tx[i].addEventListener(\"input\", OnInput, false);\r\n    }\r\n  \r\n\r\n  function OnInput(e) {\r\n    this.style.height = \"auto\";\r\n    this.style.height = this.scrollHeight + \"px\";\r\n  }\r\n\r\n  //\r\n\r\n  const getBookComments = (id, comments) => {\r\n    const bookComments = comments.filter((comment) => comment.book?._id === id);\r\n    // setBookComments(bookComments);\r\n    return bookComments;\r\n  };\r\n\r\n  const mapToUserName = (userId, users) => {\r\n    const user = users.filter((user) => user._id === userId);\r\n    return user[0]?.username;\r\n  };\r\n\r\n\r\n  const handleSendCommentButton = (comment) => {\r\n    if (!isAuthenticated)\r\n      return toast.error(\"You need to log in to perform this action.\", {\r\n        toastId: \"notLogged\",\r\n      });\r\n    if (!newComment) return toast.error(\"The comment field is empty.\");\r\n    else {\r\n      let commentObject = {};\r\n      commentObject.comment = comment;\r\n      commentObject.userId = userId;\r\n      commentObject.bookId = bookId;\r\n      props.addComment(commentObject);\r\n    }\r\n\r\n     // clear textarea\r\n        const commentTextarea = document.getElementById(\"commentInput\");\r\n        commentTextarea.value = \"\";\r\n  };\r\n\r\n  const handleReplyButton = (index) => {\r\n    if (!isAuthenticated)\r\n      toast.error(\"You need to log in to perform this action.\", {\r\n        toastId: \"notLogged\",\r\n      });\r\n    else {\r\n      let array = [...isReply];\r\n      array[index] = true;\r\n      setIsReply(array);\r\n    }\r\n  };\r\n\r\n  const handleCancelButton = (index) => {\r\n    if (!isAuthenticated)\r\n      toast.error(\"You need to log in to perform this action.\", {\r\n        toastId: \"notLogged\",\r\n      });\r\n    else {\r\n      let array = [...isReply];\r\n      array[index] = false;\r\n      setIsReply(array);\r\n    }\r\n  };\r\n\r\n  const handleCounter = async (comment, id, type) => {\r\n    if (!isAuthenticated)\r\n      toast.error(\"You need to log in to perform this action.\", {\r\n        toastId: \"notLogged\",\r\n      });\r\n    else {\r\n      // Copy from comment Object with spread operator\r\n      let tempComment = { ...comment };\r\n\r\n      let submitter_like_list = [...tempComment.like_submitter];\r\n      let submitter_dislike_list = [...tempComment.dislike_submitter];\r\n\r\n      // get like and dislike submitter index\r\n      const likeIndex = submitter_like_list.findIndex(\r\n        (element) => element === username\r\n      );\r\n      const dislikeIndex = submitter_dislike_list.findIndex(\r\n        (element) => element === username\r\n      );\r\n      // Logic for increment/decrement like/dislike counter\r\n      if (type === \"increment\") {\r\n        if (likeIndex === -1) {\r\n          submitter_like_list.push(username);\r\n          tempComment.like_counter++;\r\n\r\n          if (dislikeIndex !== -1) {\r\n            submitter_dislike_list.splice(dislikeIndex, 1);\r\n            tempComment.dislike_counter--;\r\n            if (tempComment.dislike_counter === 0) {\r\n              window.location.reload();\r\n            }\r\n          }\r\n        } else {\r\n          submitter_like_list.splice(likeIndex, 1);\r\n          tempComment.like_counter--;\r\n          if (tempComment.like_counter === 0) {\r\n            window.location.reload();\r\n          }\r\n        }\r\n      }\r\n      if (type === \"decrement\") {\r\n        if (dislikeIndex === -1) {\r\n          submitter_dislike_list.push(username);\r\n          tempComment.dislike_counter++;\r\n\r\n          if (likeIndex !== -1) {\r\n            submitter_like_list.splice(likeIndex, 1);\r\n            tempComment.like_counter--;\r\n            if (tempComment.like_counter === 0) {\r\n              window.location.reload();\r\n            }\r\n          }\r\n        } else {\r\n          submitter_dislike_list.splice(dislikeIndex, 1);\r\n          tempComment.dislike_counter--;\r\n          if (tempComment.dislike_counter === 0) {\r\n            window.location.reload();\r\n          }\r\n        }\r\n      }\r\n\r\n      // Execution part\r\n      tempComment.like_submitter = submitter_like_list;\r\n      tempComment.dislike_submitter = submitter_dislike_list;\r\n      await props.updateCommentCounter(tempComment, id);\r\n    }\r\n    // window.location.reload();\r\n  };\r\n\r\n  const handleSendButton = async (comment, id, submitter, index) => {\r\n    if (!reply) toast.error(\"The reply field is empty.\");\r\n    else {\r\n      let tempComment = { ...comment };\r\n      let replyObject = { submitter, body: reply };\r\n      let replies = [...tempComment.comment_replies];\r\n\r\n      replies.push(replyObject);\r\n      tempComment.comment_replies = replies;\r\n      await props.updateCommentReplies(tempComment, id);\r\n      // Hide reply input\r\n\r\n      let array = [...isReply];\r\n      array[index] = false;\r\n      setIsReply(array);\r\n    }\r\n    // window.location.reload();\r\n  };\r\n\r\n  const handleShowReplies = (index) => {\r\n    let array = [...showReplies];\r\n    array[index] = !array[index];\r\n    setShowReplies(array);\r\n  };\r\n\r\n  const onChangeComment = (e) => {\r\n    setNewComment(e.currentTarget.value.replace(\".\", \".\\n\"));\r\n  };\r\n\r\n  const onChangeReply = (e) => {\r\n    setReply(e.currentTarget.value.replace(\".\", \".\\n\"));\r\n  };\r\n\r\n  const handleCounterButtonColor = (list) => {\r\n    const found = list?.findIndex((element) => element === username);\r\n    if (found === -1) return \"like\";\r\n    else return \"selectedLike\";\r\n  };\r\n\r\n  useEffect(() => {\r\n    getBookComments(bookId, comments);\r\n  }, [comments]);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className=\"book__comments\">\r\n        <InputGroup className=\"comment__add\">\r\n          <FormControl\r\n            id=\"commentInput\"\r\n            as=\"textarea\"\r\n            rows={4}\r\n            placeholder=\"Add your comment...\"\r\n            aria-label=\"Add your reply\"\r\n            aria-describedby=\"basic-addon2\"\r\n            onChange={onChangeComment}\r\n          />\r\n        </InputGroup>\r\n        <Button\r\n          className=\"comment__button\"\r\n          variant=\"outline-secondary\"\r\n          onClick={() => handleSendCommentButton(newComment)}\r\n        >\r\n          Send\r\n        </Button>\r\n        <div className=\"bookComments\">\r\n          {getBookComments(bookId, comments).map((comment, index) => (\r\n            <div key={comment._id} className=\"book__comment\">\r\n              <div className=\"comment__header\">\r\n                <strong className=\"comment__submitter\">\r\n                  {mapToUserName(comment.user?._id, users)}\r\n                </strong>\r\n                <p className=\"comment__date\">\r\n                  {getCommentDate(comment.created_at)}\r\n                </p>\r\n              </div>\r\n              <p style={{ whiteSpace: \"pre\" }}>{resizeCommentText(comment.comment, innerWidth)}</p>\r\n              <div className=\"comment__reactions\">\r\n                <i\r\n                  className={`fa fa-thumbs-up ${handleCounterButtonColor(\r\n                    comment.like_submitter\r\n                  )}`}\r\n                  onClick={() =>\r\n                    handleCounter(comment, comment._id, \"increment\")\r\n                  }\r\n                >\r\n                  {comment.like_counter}\r\n                </i>\r\n                <i\r\n                  className={`fa fa-thumbs-down ${handleCounterButtonColor(\r\n                    comment.dislike_submitter\r\n                  )}`}\r\n                  onClick={() =>\r\n                    handleCounter(comment, comment._id, \"decrement\")\r\n                  }\r\n                >\r\n                  {comment.dislike_counter}\r\n                </i>\r\n                <Button\r\n                  variant=\"light\"\r\n                  size=\"sm\"\r\n                  onClick={() => handleReplyButton(index)}\r\n                >\r\n                  Reply\r\n                </Button>\r\n              </div>\r\n              {isReply[index] && (\r\n                <div className=\"comment__reply\">\r\n                  <input\r\n                    className=\"comment__reply__input\"\r\n                    placeholder=\"Add your reply\"\r\n                    aria-label=\"Add your reply\"\r\n                    aria-describedby=\"basic-addon2\"\r\n                    onChange={onChangeReply}\r\n                  />\r\n\r\n                  <div className=\"comment__reply_buttons\">\r\n                    <Button\r\n                      variant=\"outline-dark\"\r\n                      onClick={() => handleCancelButton(index)}\r\n                    >\r\n                      Cancel\r\n                    </Button>\r\n                    <Button\r\n                      variant=\"outline-secondary\"\r\n                      onClick={() =>\r\n                        handleSendButton(comment, comment._id, username, index)\r\n                      }\r\n                    >\r\n                      Send\r\n                    </Button>\r\n                  </div>\r\n                </div>\r\n              )}\r\n              <div\r\n                className=\"comment__showReplies\"\r\n                onClick={() => handleShowReplies(index)}\r\n              >\r\n                {showReplies[index] ? (\r\n                  <React.Fragment>\r\n                    <i className=\"fa fa-sort-up\"></i>\r\n                    <p>Hide replies</p>\r\n                  </React.Fragment>\r\n                ) : (\r\n                  <React.Fragment>\r\n                    <i className=\"fa fa-sort-down\"></i>\r\n                    <p>Show replies</p>\r\n                  </React.Fragment>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"comment__replies\">\r\n                {showReplies[index] &&\r\n                  comment.comment_replies?.map((reply, index) => (\r\n                    <div key={index} className=\"comment__reply\">\r\n                      <strong>{reply.submitter}</strong>\r\n                      <p\r\n                        className=\"comment__reply__p\"\r\n                        style={{ whiteSpace: \"pre\" }}\r\n                      >\r\n                       {resizeCommentText(\r\n                                reply.body,\r\n                                innerWidth\r\n                              )}\r\n                      </p>\r\n                    </div>\r\n                  ))}\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  comments: state.comments.comments,\r\n  users: state.users.users,\r\n  isAuthenticated: state.auth.isAuthenticated,\r\n  username: state.auth.username,\r\n  userId: state.auth.user?._id,\r\n});\r\n\r\nexport default connect(mapStateToProps, {\r\n  addComment,\r\n  updateCommentCounter,\r\n  updateCommentReplies,\r\n})(BookComment);\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport PropTypes from \"prop-types\";\r\nimport { updateUser } from \"./../redux/users\";\r\nimport { addOrder, removeOrder } from \"../redux/orders\";\r\nimport { createMessage } from \"../redux/messages\";\r\nimport { toast } from \"react-toastify\";\r\nimport Button from \"react-bootstrap/Button\";\r\n\r\nfunction BookInfo(props) {\r\n  BookInfo.propTypes = {\r\n    isAuthenticated: PropTypes.bool,\r\n    updateUser: PropTypes.func.isRequired,\r\n    addOrder: PropTypes.func.isRequired,\r\n    removeOrder: PropTypes.func.isRequired,\r\n    createMessage: PropTypes.func.isRequired,\r\n  };\r\n\r\n  const { book, user, orders, isAuthenticated } = props;\r\n  const [isExpand, setIsExpand] = useState([false, false]);\r\n  const [isOrdered, setIsOrdered] = useState(false);\r\n  const [isLiked, setIsLiked] = useState(false);\r\n\r\n  const sleep = (ms) => {\r\n    return new Promise((resolve) => setTimeout(resolve, ms));\r\n  };\r\n\r\n  function truncate(str, n, i) {\r\n    if (isExpand[i] === false)\r\n      return str?.length > n ? str.substr(0, n - 1) + \"...\" : str;\r\n    else return str;\r\n  }\r\n\r\n  const handleTextExpand = (index) => {\r\n    let array = [...isExpand];\r\n    array[index] = !array[index];\r\n    setIsExpand(array);\r\n  };\r\n\r\n  const CheckBookIsOrdered_Liked = async () => {\r\n    await sleep(1);\r\n    if (isAuthenticated) {\r\n      let currentProfile = { ...user };\r\n      // IsOrdered\r\n      let { ordered_books } = currentProfile;\r\n      const found_ordered = ordered_books?.findIndex(\r\n        (order) => order.name === book.name\r\n      );\r\n      if (found_ordered === -1) {\r\n        setIsOrdered(false);\r\n      } else {\r\n        setIsOrdered(true);\r\n      }\r\n      // IsLiked\r\n      let { liked_books } = currentProfile;\r\n      const found_liked = liked_books?.findIndex(\r\n        (order) => order.name === book.name\r\n      );\r\n      if (found_liked === -1) {\r\n        setIsLiked(false);\r\n      } else {\r\n        setIsLiked(true);\r\n      }\r\n    }\r\n  };\r\n\r\n  useEffect(() => {}, [isOrdered, isLiked]);\r\n  CheckBookIsOrdered_Liked();\r\n\r\n  const handleCartButton = async (id) => {\r\n    if (!isAuthenticated)\r\n      return toast.error(\"You need to log in to perform this action.\", {\r\n        toastId: \"notLogged\",\r\n      });\r\n    else {\r\n      // Add order\r\n      let orderObject = {};\r\n      orderObject.userId = id;\r\n      orderObject.bookId = book._id;\r\n\r\n      const orderId = orders.filter(\r\n        (order) => order.book._id === book._id && order.user._id === id\r\n      )[0]?._id;\r\n      isOrdered ? props.removeOrder(orderId) : props.addOrder(orderObject);\r\n\r\n      // Update user ordered_books\r\n      let currentProfile = { ...user };\r\n      let { ordered_books } = currentProfile;\r\n      let arrayOrders = [...ordered_books];\r\n      const found = arrayOrders.findIndex((order) => order.name === book.name);\r\n      if (found === -1) {\r\n        arrayOrders.push(book);\r\n        setIsOrdered(true);\r\n       // props.createMessage({ addedToCart: \"Added to cart\" });\r\n        toast.info(\"Added to cart\");\r\n      } else {\r\n        arrayOrders.splice(found, 1);\r\n        setIsOrdered(false);\r\n       // props.createMessage({ removedFromCart: \"Removed from cart\" });\r\n        toast.warn(\"Removed from cart\");\r\n      }\r\n      currentProfile.ordered_books = arrayOrders;\r\n      props.updateUser(currentProfile, id);\r\n    }\r\n  };\r\n\r\n  const handleFavouriteButton = async (id) => {\r\n    if (!isAuthenticated)\r\n      return toast.error(\"You need to log in to perform this action.\", {\r\n        toastId: \"notLogged\",\r\n      });\r\n    else {\r\n      let currentProfile = { ...user };\r\n      let { liked_books } = currentProfile;\r\n      let arrayLiked = [...liked_books];\r\n      const found = arrayLiked.findIndex((order) => order.name === book.name);\r\n      if (found === -1) {\r\n        arrayLiked.push(book);\r\n        setIsLiked(true);\r\n       // props.createMessage({ addedToLiked: \"Added to liked books\" });\r\n        toast.info(\"Added to liked books\");\r\n      } else {\r\n        arrayLiked.splice(found, 1);\r\n        setIsLiked(false);\r\n      //  props.createMessage({ removedFromLiked: \"Remove from liked books\" });\r\n        toast.warn(\"Remove from liked books\");\r\n      }\r\n      currentProfile.liked_books = arrayLiked;\r\n      props.updateUser(currentProfile, id);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className=\"book__component\">\r\n        <h1 className=\"book__title__android\">{book.name}</h1>\r\n\r\n        {book.image && (\r\n          <div className=\"book__img\">\r\n            <img\r\n              src={`${process.env.REACT_APP_ROOT_URL}/${book.image}`}\r\n              alt={book.image}\r\n            />\r\n          </div>\r\n        )}\r\n        <div className=\"book__info\">\r\n          <h1 className=\"book__title\">{book.name}</h1>\r\n          <h5 className=\"book__author\">Author : {book.author}</h5>\r\n          <h6 className=\"book__genre\">Genre : {book.genre}</h6>\r\n          <h6 className=\"book__publisher\">Publisher : {book.publisher}</h6>\r\n          <div className=\"book__purshase\">\r\n            <h6 className=\"book__price\">\r\n              Price : <strong>{book.price} $</strong>\r\n            </h6>\r\n            <div className=\"book__buttons\">\r\n              <Button\r\n                variant=\"info\"\r\n                className=\"cart_btn\"\r\n                onClick={() => handleCartButton(user?._id)}\r\n              >\r\n                <i className=\"fa fa-cart-plus mx-2\"></i>\r\n\r\n                {isOrdered ? \"Remove From Cart\" : \"Add To Cart\"}\r\n              </Button>\r\n              <Button\r\n                variant=\"light\"\r\n                className=\"favourite_btn\"\r\n                onClick={() => handleFavouriteButton(user?._id)}\r\n              >\r\n                <i className=\"fa fa-star mx-2\"></i>\r\n                {isLiked ? \"Remove From Favourites\" : \"Add To Favourites\"}\r\n              </Button>\r\n            </div>\r\n          </div>\r\n          <h3>Description</h3>\r\n          <p>\r\n            {truncate(book.summary, 500, 0)}\r\n            <a\r\n              className=\"text__controller\"\r\n              style={{ color: \"blue\", fontSize: \"rem\" }}\r\n              onClick={() => handleTextExpand(0)}\r\n            >\r\n              {isExpand[0] ? \"reduce\" : \"expand\"}\r\n            </a>\r\n          </p>\r\n\r\n          <h3>About Author</h3>\r\n          <p>\r\n            {truncate(book.about_author, 200, 1)}\r\n            <a\r\n              className=\"text__controller\"\r\n              style={{ color: \"blue\", fontSize: \"rem\" }}\r\n              onClick={() => handleTextExpand(1)}\r\n            >\r\n              {isExpand[1] ? \"reduce\" : \"expand\"}\r\n            </a>\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  book: state.books.currentBook,\r\n  users: state.users.users,\r\n  orders: state.orders.orders,\r\n  username: state.auth.username,\r\n  isAuthenticated: state.auth.isAuthenticated,\r\n});\r\n\r\nexport default connect(mapStateToProps, {\r\n  updateUser,\r\n  addOrder,\r\n  removeOrder,\r\n  createMessage,\r\n})(BookInfo);\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport PropTypes from \"prop-types\";\r\nimport { loadBook } from \"./../redux/books\";\r\nimport BookComment from \"./bookComment\";\r\nimport BookInfo from \"./bookInfo\";\r\nimport NavBar from \"./../common/navbar\";\r\nimport Footer from \"./../common/footer\";\r\n\r\nfunction BookInfoPage(props) {\r\n  BookInfoPage.propTypes = {\r\n    book: PropTypes.object.isRequired,\r\n    users: PropTypes.array.isRequired,\r\n    username: PropTypes.string,\r\n    loadBook: PropTypes.func.isRequired,\r\n  };\r\n  const bookId = props.match.params.id;\r\n  const { book, username, users } = props;\r\n  const [user, setUser] = useState({});\r\n\r\n  const getUser = () => {\r\n    const profile = users.filter((user) => user.username === username);\r\n    setUser(profile[0]);\r\n  };\r\n\r\n  useEffect(() => {\r\n    props.loadBook(bookId);\r\n    getUser();\r\n  }, [users]);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <NavBar />\r\n      <BookInfo book={book} user={user} />\r\n      <div className=\"comments__component\">\r\n        <h3>Comments</h3>\r\n\r\n        <BookComment bookId={book._id} />\r\n      </div>\r\n      <Footer />;\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  book: state.books.currentBook,\r\n  username: state.auth.username,\r\n  users: state.users.users,\r\n});\r\n\r\nexport default connect(mapStateToProps, {\r\n  loadBook,\r\n})(BookInfoPage);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport PropTypes from \"prop-types\";\r\nimport NavBar from \"./../common/navbar\";\r\nimport Footer from \"./../common/footer\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nfunction SearchPage(props) {\r\n  SearchPage.prototype = {\r\n    books: PropTypes.array.isRequired,\r\n  };\r\n\r\n  let history = useHistory();\r\n\r\n  const { books } = props;\r\n  const query = props.match.params.query;\r\n  const searchList = books.filter((book) =>\r\n    book.name.toLowerCase().includes(query.toLowerCase())\r\n  );\r\n\r\n  function truncate(str, n) {\r\n    return str?.length > n ? str.substr(0, n - 1) + \"...\" : str;\r\n  }\r\n  const goToBookPage = (id) => {\r\n    history.push(`/books/${id}`);\r\n  };\r\n\r\n  const titleHover = (e) => {\r\n    e.target.style.color = \"crimson\";\r\n    e.target.style.transform = \"scale(1.05)\";\r\n  };\r\n  const titleLeave = (e) => {\r\n    e.target.style.color = \"black\";\r\n    e.target.style.transform = \"scale(1)\";\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <NavBar />\r\n      <div className=\"ordered__books\">\r\n        {searchList?.map((book) => (\r\n          <div key={book.name} className=\"ordered__book\">\r\n            <div className=\"book__cover\">\r\n              <h3\r\n                className=\"ordered__book__title_android\"\r\n                style={{ cursor: \"pointer\", transition: \"all 0.5s ease\" }}\r\n                onMouseEnter={titleHover}\r\n                onMouseLeave={titleLeave}\r\n                onClick={() => goToBookPage(book._id)}\r\n              >\r\n                {book.name}\r\n              </h3>\r\n\r\n              <img\r\n                src={`${process.env.REACT_APP_ROOT_URL}/${book.image}`}\r\n                alt={book.image}\r\n              />\r\n            </div>\r\n            <div className=\"book__info\">\r\n              <h3\r\n                className=\"book__title\"\r\n                style={{ cursor: \"pointer\", transition: \"all 0.5s ease\" }}\r\n                onMouseEnter={titleHover}\r\n                onMouseLeave={titleLeave}\r\n                onClick={() => goToBookPage(book._id)}\r\n              >\r\n                {book.name}\r\n              </h3>\r\n              <h5 className=\"book__author\">Author : {book.author}</h5>\r\n              <h6 className=\"book__genre\">Genre : {book.genre}</h6>\r\n              <p className=\"book__summary\">\r\n                <strong>Summary : </strong> {truncate(book.summary, 300)}\r\n              </p>\r\n\r\n              <p className=\"book__price\">\r\n                <strong>Price : </strong> {book.price}\r\n              </p>\r\n              <p className=\"book__rate\">\r\n                <strong>Rate : </strong> {book.rate}\r\n              </p>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      <Footer />\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  books: state.books.books,\r\n});\r\n\r\nexport default connect(mapStateToProps, {})(SearchPage);\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport PropTypes from \"prop-types\";\r\nimport { updateUser } from \"./../redux/users\";\r\nimport { removeOrder } from \"../redux/orders\";\r\nimport NavBar from \"./../common/navbar\";\r\nimport { Button } from \"react-bootstrap\";\r\n\r\nfunction Orders(props) {\r\n  Orders.propTypes = {\r\n    users: PropTypes.array.isRequired,\r\n    username: PropTypes.string,\r\n    updateUser: PropTypes.func.isRequired,\r\n    removeOrder: PropTypes.func.isRequired,\r\n  };\r\n  const { users, username, orders } = props;\r\n\r\n  const [orderedBooks, setOrderedBooks] = useState([]);\r\n\r\n  function truncate(str, n) {\r\n    return str?.length > n ? str.substr(0, n - 1) + \"...\" : str;\r\n  }\r\n\r\n  const sleep = (ms) => {\r\n    return new Promise((resolve) => setTimeout(resolve, ms));\r\n  };\r\n\r\n  const getOrderedBooks = async (username) => {\r\n    const user = users.filter((user) => user.username === username);\r\n    setOrderedBooks(user[0]?.ordered_books);\r\n    return user[0]?.ordered_books;\r\n  };\r\n\r\n  useEffect(() => {\r\n    getOrderedBooks(username);\r\n  }, [users, orderedBooks]);\r\n\r\n  const handleCartButton = async (book) => {\r\n    // Remove order\r\n    const user = users.filter((user) => user.username === username);\r\n    const orderId = orders.filter(\r\n      (order) => order.book._id === book._id && order.user._id === user[0]?._id\r\n    )[0]?._id;\r\n    props.removeOrder(orderId);\r\n\r\n    // Update User\r\n    let currentProfile = { ...user[0] };\r\n    let { ordered_books } = currentProfile;\r\n    let arrayOrders = [...ordered_books];\r\n    const found = arrayOrders.findIndex((order) => order.name === book.name);\r\n    arrayOrders.splice(found, 1);\r\n    currentProfile.ordered_books = arrayOrders;\r\n    setOrderedBooks(arrayOrders);\r\n    props.updateUser(currentProfile, user[0]._id);\r\n  };\r\n\r\n  if (orderedBooks?.length === 0)\r\n    return (\r\n      <React.Fragment>\r\n        <NavBar />\r\n        <p style={{ marginTop: \"100px\" }}> No Orders are made.</p>\r\n      </React.Fragment>\r\n    );\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <NavBar />\r\n      <div className=\"ordered__books\">\r\n        {orderedBooks?.map((book) => (\r\n          <div key={book.name} className=\"ordered__book\">\r\n            <div className=\"ordered__book__cover\">\r\n              <h3 className=\"ordered__book__title_android\">{book.name}</h3>\r\n              <img\r\n                src={`${process.env.REACT_APP_ROOT_URL}/${book.image}`}\r\n                alt={book.image}\r\n              />\r\n            </div>\r\n            <div className=\"ordered__book__info\">\r\n              <h3 className=\"ordered__book__title\">{book.name}</h3>\r\n              <h5 className=\"ordered__book__author\">Author : {book.author}</h5>\r\n              <h6 className=\"ordered__book__genre\">Genre : {book.genre}</h6>\r\n              <p className=\"ordered__book__summary\">\r\n                <strong>Summary : </strong> {truncate(book.summary, 300)}\r\n              </p>\r\n\r\n              <p className=\"ordered__book__price\">\r\n                <strong>Price : </strong> {book.price}\r\n              </p>\r\n              <p className=\"ordered__book__rate\">\r\n                <strong>Rate : </strong> {book.rate}\r\n              </p>\r\n              <Button\r\n                variant=\"warning\"\r\n                className=\"order__button\"\r\n                onClick={() => handleCartButton(book)}\r\n              >\r\n                Remove From Cart\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  users: state.users.users,\r\n  username: state.auth.username,\r\n  orders: state.orders.orders,\r\n});\r\n\r\nexport default connect(mapStateToProps, { updateUser, removeOrder })(Orders);\r\n","import Joi from \"joi-browser\";\r\n\r\nexport const validate = (formSchema, formData) => {\r\n  const options = { abortEarly: false };\r\n  const { error } = Joi.validate(formData, formSchema, options);\r\n  if (!error) return null;\r\n\r\n  const errors = {};\r\n  for (let item of error.details) {\r\n    errors[item.path[0]] = item.message;\r\n  }\r\n  return errors;\r\n};\r\n\r\nexport const validateProperty = (formSchema, { name, value }) => {\r\n  const obj = { [name]: value };\r\n  const schema = { [name]: formSchema[name] };\r\n  const { error } = Joi.validate(obj, schema);\r\n  return error ? error.details[0].message : null;\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { Link, Redirect } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport { PropTypes } from \"prop-types\";\r\nimport { login } from \"../redux/auth\";\r\nimport Joi from \"joi-browser\";\r\nimport { validate, validateProperty } from \"../services/validation\";\r\nimport Form from \"react-bootstrap/Form\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport Card from \"react-bootstrap/Card\";\r\n\r\nfunction Login(props) {\r\n  Login.propTypes = {\r\n    login: PropTypes.func.isRequired,\r\n    isAuthenticated: PropTypes.bool,\r\n  };\r\n\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [errors, setErrors] = useState({});\r\n\r\n  const schema = {\r\n    username: Joi.string().required().label(\"Username\"),\r\n    password: Joi.string().required().label(\"Password\"),\r\n  };\r\n\r\n  const onSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    // Errors\r\n    const errors = validate(schema, { username, password });\r\n    setErrors({ errors: errors || {} });\r\n    if (errors) return;\r\n\r\n    props.login(username, password);\r\n  };\r\n\r\n  const onChange = (e) => {\r\n    // Errors\r\n    const errorsObject = { ...errors };\r\n    const errorMessage = validateProperty(schema, e.currentTarget);\r\n\r\n    if (errorMessage) {\r\n      errorsObject[e.currentTarget.name] = errorMessage;\r\n    } else {\r\n      delete errorsObject[e.currentTarget.name];\r\n    }\r\n    setErrors(errorsObject);\r\n\r\n    // Inputs\r\n    if (e.target.name === \"username\") {\r\n      setUsername(e.currentTarget.value);\r\n    }\r\n    if (e.target.name === \"password\") {\r\n      setPassword(e.currentTarget.value);\r\n    }\r\n  };\r\n\r\n  // console.log(props.isAuthenticated);\r\n  if (props.isAuthenticated) {\r\n    return <Redirect to=\"/home\" />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"col-md-10 m-auto\">\r\n      <Card className=\"card card-body mt-5\">\r\n        <h2 className=\"text-center\">Login</h2>\r\n        <Form onSubmit={onSubmit}>\r\n          <Form.Group className=\"form-group\">\r\n            <Form.Label>Username</Form.Label>\r\n            <Form.Control\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              name=\"username\"\r\n              onChange={onChange}\r\n              value={username}\r\n            />\r\n            {errors[\"username\"] && (\r\n              <div className=\"alert alert-danger\">{errors[\"username\"]}</div>\r\n            )}\r\n          </Form.Group>\r\n\r\n          <Form.Group className=\"form-group\">\r\n            <Form.Label>Password</Form.Label>\r\n            <Form.Control\r\n              type=\"password\"\r\n              className=\"form-control\"\r\n              name=\"password\"\r\n              onChange={onChange}\r\n              value={password}\r\n            />\r\n            {errors[\"password\"] && (\r\n              <div className=\"alert alert-danger\">{errors[\"password\"]}</div>\r\n            )}\r\n          </Form.Group>\r\n\r\n          <div className=\"form-group\">\r\n            <Button\r\n              disabled={validate(schema, { username, password })}\r\n              type=\"submit\"\r\n              variant=\"primary\"\r\n            >\r\n              Login\r\n            </Button>\r\n          </div>\r\n          <p>\r\n            Don't have an account? <Link to=\"/register\">Register</Link>\r\n          </p>\r\n        </Form>\r\n      </Card>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  isAuthenticated: state.auth.isAuthenticated,\r\n});\r\n\r\nexport default connect(mapStateToProps, { login })(Login);\r\n","import React, { useState } from \"react\";\r\nimport { Link, Redirect } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport { PropTypes } from \"prop-types\";\r\nimport { register } from \"../redux/auth\";\r\nimport { createMessage } from \"../redux/messages\";\r\nimport Joi from \"joi-browser\";\r\nimport { validate, validateProperty } from \"../services/validation\";\r\nimport Form from \"react-bootstrap/Form\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport Card from \"react-bootstrap/Card\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nfunction Register(props) {\r\n  Register.propTypes = {\r\n    register: PropTypes.func.isRequired,\r\n    createMessage: PropTypes.func.isRequired,\r\n    isAuthenticated: PropTypes.bool,\r\n  };\r\n\r\n  const [username, setUsername] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [country, setCountry] = useState(\"\");\r\n  const [age, setAge] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [password2, setPassword2] = useState(\"\");\r\n  const [errors, setErrors] = useState({});\r\n\r\n  const schema = {\r\n    username: Joi.string().required().min(3).max(50).label(\"Username\"),\r\n    email: Joi.string().required().email().max(255).label(\"Email\"),\r\n    password: Joi.string().required().min(5).max(255).label(\"Password\"),\r\n    password2: Joi.string().required().min(5).max(255).label(\"Password2\"),\r\n    age: Joi.number().required().min(0).label(\"Age\"),\r\n    country: Joi.string().required().min(3).max(50).label(\"Country\"),\r\n  };\r\n\r\n  function sleep(ms) {\r\n    return new Promise((resolve) => setTimeout(resolve, ms));\r\n  }\r\n\r\n  const onSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    // Errors\r\n    const errors = validate(schema, {\r\n      username,\r\n      password,\r\n      password2,\r\n      email,\r\n      country,\r\n      age,\r\n    });\r\n    setErrors({ errors: errors || {} });\r\n    if (errors) return;\r\n\r\n    // Submission\r\n    if (password !== password2) {\r\n      // props.createMessage({ passwordNotMatch: \"Passwords do not match\" });\r\n      toast.error(\"Passwords do not match\");\r\n    } else {\r\n      const newUser = {\r\n        username,\r\n        password,\r\n        email,\r\n        country,\r\n        age,\r\n      };\r\n\r\n      await props.register(newUser);\r\n      await sleep(1000);\r\n    }\r\n  };\r\n\r\n  const onChange = (e) => {\r\n    // Errors\r\n    const errorsObject = { ...errors };\r\n    const errorMessage = validateProperty(schema, e.currentTarget);\r\n\r\n    if (errorMessage) {\r\n      errorsObject[e.currentTarget.name] = errorMessage;\r\n    } else {\r\n      delete errorsObject[e.currentTarget.name];\r\n    }\r\n    setErrors(errorsObject);\r\n\r\n    // Inputs\r\n    if (e.target.name === \"username\") {\r\n      setUsername(e.currentTarget.value);\r\n    }\r\n    if (e.target.name === \"email\") {\r\n      setEmail(e.currentTarget.value);\r\n    }\r\n    if (e.target.name === \"country\") {\r\n      setCountry(e.currentTarget.value);\r\n    }\r\n    if (e.target.name === \"age\") {\r\n      setAge(e.currentTarget.value);\r\n    }\r\n    if (e.target.name === \"password\") {\r\n      setPassword(e.currentTarget.value);\r\n    }\r\n    if (e.target.name === \"password2\") {\r\n      setPassword2(e.currentTarget.value);\r\n    }\r\n  };\r\n\r\n  if (props.isAuthenticated) {\r\n    return <Redirect to=\"/home\" />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"col-md-6 m-auto\">\r\n      <Card className=\"card card-body mt-5\">\r\n        <h2 className=\"text-center\">Register</h2>\r\n        <Form onSubmit={onSubmit}>\r\n          <Form.Group className=\"form-group\">\r\n            <Form.Label>Username</Form.Label>\r\n            <Form.Control\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              name=\"username\"\r\n              onChange={onChange}\r\n              value={username}\r\n            />\r\n            {errors[\"username\"] && (\r\n              <div className=\"alert alert-danger\">{errors[\"username\"]}</div>\r\n            )}\r\n          </Form.Group>\r\n          <Form.Group className=\"form-group\">\r\n            <Form.Label>Email</Form.Label>\r\n            <Form.Control\r\n              type=\"email\"\r\n              className=\"form-control\"\r\n              name=\"email\"\r\n              onChange={onChange}\r\n              value={email}\r\n            />\r\n            {errors[\"email\"] && (\r\n              <div className=\"alert alert-danger\">{errors[\"email\"]}</div>\r\n            )}\r\n          </Form.Group>\r\n          <Form.Group className=\"form-group\">\r\n            <Form.Label>Country</Form.Label>\r\n            <Form.Control\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              name=\"country\"\r\n              onChange={onChange}\r\n              value={country}\r\n            />\r\n            {errors[\"country\"] && (\r\n              <div className=\"alert alert-danger\">{errors[\"country\"]}</div>\r\n            )}\r\n          </Form.Group>\r\n          <Form.Group className=\"form-group\">\r\n            <Form.Label>Age</Form.Label>\r\n            <Form.Control\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              name=\"age\"\r\n              onChange={onChange}\r\n              value={age}\r\n            />\r\n            {errors[\"age\"] && (\r\n              <div className=\"alert alert-danger\">{errors[\"age\"]}</div>\r\n            )}\r\n          </Form.Group>\r\n          <Form.Group className=\"form-group\">\r\n            <Form.Label>Password</Form.Label>\r\n            <Form.Control\r\n              type=\"password\"\r\n              className=\"form-control\"\r\n              name=\"password\"\r\n              onChange={onChange}\r\n              value={password}\r\n            />\r\n            {errors[\"password\"] && (\r\n              <div className=\"alert alert-danger\">{errors[\"password\"]}</div>\r\n            )}\r\n          </Form.Group>\r\n          <Form.Group className=\"form-group\">\r\n            <Form.Label>Confirm Password</Form.Label>\r\n            <Form.Control\r\n              type=\"password\"\r\n              className=\"form-control\"\r\n              name=\"password2\"\r\n              onChange={onChange}\r\n              value={password2}\r\n            />\r\n            {errors[\"password2\"] && (\r\n              <div className=\"alert alert-danger\">{errors[\"password2\"]}</div>\r\n            )}\r\n          </Form.Group>\r\n\r\n          <div className=\"form-group\">\r\n            <Button\r\n              type=\"submit\"\r\n              variant=\"primary\"\r\n              disabled={validate(schema, {\r\n                username,\r\n                password,\r\n                password2,\r\n                email,\r\n                country,\r\n                age,\r\n              })}\r\n            >\r\n              Register\r\n            </Button>\r\n          </div>\r\n          <p>\r\n            Already have an account? <Link to=\"/login\">Login</Link>\r\n          </p>\r\n        </Form>\r\n      </Card>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  isAuthenticated: state.auth.isAuthenticated,\r\n});\r\n\r\nexport default connect(mapStateToProps, {\r\n  register,\r\n  createMessage,\r\n})(Register);\r\n","import React from \"react\";\r\nimport NavBar from \"./../common/navbar\";\r\nimport Footer from \"./../common/footer\";\r\n\r\nimport \"bulma/css/bulma.css\";\r\n\r\nfunction Home() {\r\n  return (\r\n    <React.Fragment>\r\n      <NavBar />\r\n\r\n      <section className=\"hero is-danger is-medium\">\r\n        <div className=\"hero-body\">\r\n          <div className=\"container has-text-centered\">\r\n            <p className=\"title\" style={{ marginBottom: \"50px\", color:\"gold\" }}>\r\n              Welcome To BookStore App\r\n            </p>\r\n            <p className=\"subtitle\">\r\n              Join our bookStore and have access to a large collection of books.\r\n            </p>\r\n            <p className=\"subtitle\">\r\n              Our shop contains diffrent books genres from politics, bussiness\r\n              to psycology and manga.\r\n            </p>\r\n            <p className=\"subtitle\">\r\n              You can review and discuss books with others readers.\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </section>\r\n      <div className=\"home__images\">\r\n        <div className=\"hero-image1\">\r\n          <div className=\"hero-text\">\r\n            <h1>A room without books is like a body without a soul.</h1>\r\n            <p>  Marcus Tullius Cicero</p>\r\n          </div>\r\n        </div>\r\n        <div className=\"hero-image2\">\r\n          <div className=\"hero-text\">\r\n            <h1>\r\n              If you only read the books that everyone else is reading,\r\n              <br /> you can only think what everyone else is thinking.\r\n            </h1>\r\n            <p> Haruki Murakami, Norwegian Wood</p>\r\n          </div>\r\n        </div>\r\n        <div className=\"hero-image3\">\r\n          <div className=\"hero-text\">\r\n            <h1>There is no friend as loyal as a book.</h1>\r\n            <p>  Ernest Hemingway</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <Footer />\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default Home;\r\n","export default __webpack_public_path__ + \"static/media/page_not_found.a3087ab8.jpg\";","import React from \"react\";\r\nimport NavBar from \"./navbar\";\r\nimport Footer from \"./footer\";\r\n\r\nimport page_not_found from \"../images/Home/page_not_found.jpg\";\r\n\r\nfunction NotFound() {\r\n  return (\r\n    <React.Fragment>\r\n      <NavBar />\r\n\r\n      <div>\r\n        <img src={page_not_found} alt=\"page_not_found\" />\r\n      </div>\r\n\r\n      <Footer />\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default NotFound;\r\n","import React, { Component, Fragment } from \"react\";\r\nimport { withAlert } from \"react-alert\";\r\nimport { connect } from \"react-redux\";\r\nimport PropTypes from \"prop-types\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nexport class Alerts extends Component {\r\n  static propTypes = {\r\n    error: PropTypes.object.isRequired,\r\n    message: PropTypes.object.isRequired,\r\n  };\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { error, alert, message } = this.props;\r\n\r\n    if (error !== prevProps.error) {\r\n      if (error.msg?.author) {\r\n        //alert.error(`Author: ${error.msg.author.join()}`);\r\n        toast.error(`Author: ${error.msg.author.join()}`);\r\n      }\r\n      if (error.msg?.title) {\r\n        //  alert.error(`Title: ${error.msg.title.join()}`);\r\n        toast.error(`Title: ${error.msg.title.join()}`);\r\n      }\r\n      if (error.msg?.non_field_errors) {\r\n        // alert.error(error.msg.non_field_errors.join());\r\n        toast.error(error.msg.non_field_errors.join());\r\n      }\r\n      if (error.msg?.username) {\r\n        // alert.error(error.msg.username.join());\r\n        toast.error(error.msg.username.join());\r\n      }\r\n      if (error.msg) {\r\n        // alert.error(error.msg);\r\n        toast.error(error.msg);\r\n      }\r\n    }\r\n\r\n    if (message !== prevProps.message) {\r\n      if (message.messages.addedToLiked) {\r\n        alert.success(message.messages.addedToLiked);\r\n      }\r\n      if (message.messages.removedFromLiked) {\r\n        alert.info(message.messages.removedFromLiked);\r\n      }\r\n      if (message.messages.addedToCart) {\r\n        alert.success(message.messages.addedToCart);\r\n      }\r\n      if (message.messages.removedFromCart) {\r\n        alert.info(message.messages.removedFromCart);\r\n      }\r\n      if (message.messages.passwordNotMatch) {\r\n        alert.error(message.messages.passwordNotMatch);\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return <Fragment />;\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  error: state.errors,\r\n  message: state.messages,\r\n});\r\n\r\nexport default connect(mapStateToProps)(withAlert()(Alerts));\r\n","import React, { useEffect } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nimport { connect } from \"react-redux\";\r\nimport { PropTypes } from \"prop-types\";\r\nimport AdminPage from \"react-admin-table/dist/adminPage\";\r\n\r\nimport ListTable from \"react-admin-table/dist/ListTable\";\r\n\r\nimport \"react-admin-table/dist/css/admin.css\";\r\n\r\nimport { addUser, updateUser, updateAllUser, deleteUser } from \"../redux/users\";\r\nimport { addBook, deleteBook } from \"../redux/books\";\r\nimport { addComment } from \"../redux/comments\";\r\n\r\nfunction AdminHome(props) {\r\n  AdminHome.prototype = {\r\n    isAdmin: PropTypes.bool.isRequired,\r\n    addBook: PropTypes.func.isRequired,\r\n    deleteBook: PropTypes.func.isRequired,\r\n    addComment: PropTypes.func.isRequired,\r\n    addUser: PropTypes.func.isRequired,\r\n    updateUser: PropTypes.func.isRequired,\r\n    updateAllUser: PropTypes.func.isRequired,\r\n    deleteUser: PropTypes.func.isRequired,\r\n  };\r\n\r\n  const {\r\n    isAdmin,\r\n    addBook,\r\n    deleteBook,\r\n    addComment,\r\n    addUser,\r\n    updateUser,\r\n    updateAllUser,\r\n    deleteUser,\r\n    books,\r\n    users,\r\n    comments,\r\n  } = props;\r\n\r\n  useEffect(() => {\r\n    \r\n  }, [isAdmin])\r\n  \r\n  if (isAdmin === false) return <Redirect to=\"/home\" />;\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <AdminPage />\r\n\r\n      <ListTable\r\n        data={{\r\n          name: \"books\",\r\n          imagesUrl: `${process.env.REACT_APP_ROOT_URL}/`,\r\n          table: books,\r\n          icon: <i className=\"fa fa-book\"></i>,\r\n        }}\r\n        tableAttributes={[\r\n          {\r\n            title: \"name\",\r\n            label: \"Name\",\r\n            type: \"text\",\r\n            format: \"input\",\r\n            display: \"table/form\",\r\n            validation_type: \"string\",\r\n          },\r\n          {\r\n            title: \"author\",\r\n            label: \"Author\",\r\n            type: \"text\",\r\n            format: \"input\",\r\n            display: \"table/form\",\r\n            validation_type: \"string\",\r\n          },\r\n          {\r\n            title: \"summary\",\r\n            label: \"Summary\",\r\n            type: \"text\",\r\n            format: \"input\",\r\n            display: \"form\",\r\n            validation_type: \"string\",\r\n          },\r\n          {\r\n            title: \"about_author\",\r\n            label: \"About author\",\r\n            type: \"text\",\r\n            format: \"input\",\r\n            display: \"form\",\r\n            validation_type: \"string\",\r\n          },\r\n          {\r\n            title: \"genre\",\r\n            label: \"Genre\",\r\n            type: \"text\",\r\n            format: \"select\",\r\n            display: \"table/form\",\r\n          },\r\n          {\r\n            title: \"publisher\",\r\n            label: \"Publisher\",\r\n            type: \"text\",\r\n            format: \"input\",\r\n            display: \"table/form\",\r\n            validation_type: \"string\",\r\n          },\r\n          {\r\n            title: \"date\",\r\n            label: \"Date\",\r\n            type: \"text\",\r\n            format: \"input\",\r\n            display: \"table/form\",\r\n            validation_type: \"string\",\r\n          },\r\n          {\r\n            title: \"price\",\r\n            label: \"Price\",\r\n            type: \"text\",\r\n            format: \"input\",\r\n            display: \"table/form\",\r\n            validation_type: \"number\",\r\n          },\r\n          {\r\n            title: \"rate\",\r\n            label: \"Rate\",\r\n            type: \"text\",\r\n            format: \"input\",\r\n            display: \"table/form\",\r\n            validation_type: \"number\",\r\n          },\r\n          {\r\n            title: \"image\",\r\n            label: \"Image\",\r\n            type: \"file\",\r\n            format: \"input\",\r\n            display: \"table/form\",\r\n            image: true,\r\n          },\r\n        ]}\r\n        search=\"name\"\r\n        filters={[\"genre\"]}\r\n        elementAdd={addBook}\r\n        elementDelete={deleteBook}\r\n      />\r\n\r\n      <ListTable\r\n        data={{\r\n          name: \"users\",\r\n          table: users,\r\n          icon: <i className=\"fa fa-users\"></i>,\r\n        }}\r\n        tableAttributes={[\r\n          {\r\n            title: \"username\",\r\n            label: \"Username\",\r\n            type: \"text\",\r\n            format: \"input\",\r\n            display: \"table/form\",\r\n            validation_type: \"string\",\r\n          },\r\n          {\r\n            title: \"email\",\r\n            label: \"Email\",\r\n            type: \"email\",\r\n            format: \"input\",\r\n            display: \"table/form\",\r\n            validation_type: \"string\",\r\n          },\r\n          {\r\n            title: \"password\",\r\n            label: \"Password\",\r\n            type: \"text\",\r\n            format: \"input\",\r\n            display: \"table/form\",\r\n            validation_type: \"string\",\r\n          },\r\n          {\r\n            title: \"isAdmin\",\r\n            label: \"IsAdmin\",\r\n            type: \"text\",\r\n            format: \"select\",\r\n            display: \"table/form\",\r\n          },\r\n\r\n          {\r\n            title: \"age\",\r\n            label: \"Age\",\r\n            type: \"text\",\r\n            format: \"input\",\r\n            display: \"table/form\",\r\n            validation_type: \"number\",\r\n          },\r\n          {\r\n            title: \"country\",\r\n            label: \"Country\",\r\n            type: \"text\",\r\n            format: \"input\",\r\n            display: \"table/form\",\r\n            validation_type: \"string\",\r\n          },\r\n        ]}\r\n        filters={[\"isAdmin\"]}\r\n        search=\"username\"\r\n        elementAdd={addUser}\r\n        elementUpdate={updateUser}\r\n        elementDelete={deleteUser}\r\n      />\r\n\r\n      <ListTable\r\n        data={{\r\n          name: \"comments\",\r\n          table: comments,\r\n          icon: <i className=\"fa fa-comments\"></i>,\r\n        }}\r\n        tableAttributes={[\r\n          {\r\n            title: \"comment\",\r\n            label: \"Comment\",\r\n            type: \"text\",\r\n            format: \"input\",\r\n            display: \"table/form\",\r\n            validation_type: \"string\",\r\n          },\r\n          {\r\n            title: \"user.username\",\r\n            label: \"Username\",\r\n            type: \"text\",\r\n            format: \"json\",\r\n            display: \"table/form\",\r\n            validation_type: \"object\",\r\n            urlForm: {\r\n              tableName: \"users\",\r\n              id: \"user._id\",\r\n            },\r\n          },\r\n\r\n          {\r\n            title: \"book.name\",\r\n            label: \"Book\",\r\n            type: \"text\",\r\n            format: \"json\",\r\n            display: \"table/form\",\r\n            validation_type: \"object\",\r\n            urlForm: {\r\n              tableName: \"books\",\r\n              id: \"book._id\",\r\n            },\r\n            relatedProperty: {\r\n              tableName: \"books\",\r\n              related_id: \"book._id\",\r\n              property: \"image\",\r\n              type: \"image\",\r\n              imagesUrl: `${process.env.REACT_APP_ROOT_URL}/`,\r\n            },\r\n          },\r\n\r\n          {\r\n            title: \"like_counter\",\r\n            label: \"Like counter\",\r\n            type: \"text\",\r\n            format: \"input\",\r\n            display: \"table/form\",\r\n            validation_type: \"number\",\r\n          },\r\n          {\r\n            title: \"dislike_counter\",\r\n            label: \"Dislike counter\",\r\n            type: \"text\",\r\n            format: \"input\",\r\n            display: \"table/form\",\r\n            validation_type: \"number\",\r\n          },\r\n        ]}\r\n        search=\"comment\"\r\n        elementAdd={addComment}\r\n      />\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  isAdmin: state.auth.isAdmin,\r\n  books: state.books.books,\r\n  users: state.users.users,\r\n  comments: state.comments.comments,\r\n});\r\n\r\nexport default connect(mapStateToProps, {\r\n  addBook,\r\n  deleteBook,\r\n  addComment,\r\n  addUser,\r\n  updateUser,\r\n  updateAllUser,\r\n  deleteUser,\r\n})(AdminHome);\r\n","import React, { useEffect } from \"react\";\nimport { Switch, Route, Redirect } from \"react-router-dom\";\nimport { Provider as AlertProvider } from \"react-alert\";\nimport AlertTemplate from \"react-alert-template-basic\";\nimport { ToastContainer } from \"react-toastify\";\n\n// Redux Store\nimport store from \"./store\";\nimport { loadUser } from \"./redux/auth\";\nimport { loadUsers, loadCurrentUser } from \"./redux/users\";\nimport { loadBooks } from \"./redux/books\";\nimport { loadComments } from \"./redux/comments\";\nimport { loadOrders } from \"./redux/orders\";\n\n// Components\nimport BooksMainComponent from \"./components/booksMainComponent\";\nimport BookInfoPage from \"./components/bookInfoPage\";\nimport SearchPage from \"./components/searchPage\";\nimport Orders from \"./components/orders\";\nimport Login from \"./common/login\";\nimport Register from \"./common/register\";\nimport Home from \"./components/home\";\nimport NotFound from \"./common/notFound\";\nimport Alerts from \"./common/alerts\";\nimport AdminHome from \"./components/adminHome\";\nimport {\n  AdminUpdateRoutes,\n  AdminCreateRoutes,\n} from \"react-admin-table/dist/routes/adminRoutes\";\n\n// CSS\nimport \"react-toastify/dist/ReactToastify.css\";\nimport \"./App.css\";\nimport \"./css/home.css\";\nimport \"./css/books.css\";\nimport \"./css/comments.css\";\nimport \"./css/orders.css\";\nimport \"./css/navbar.css\";\n\n// Alert Options\nconst alertOptions = {\n  timeout: 3000,\n  position: \"middle\",\n};\n\nfunction App() {\n  useEffect(() => {\n    async function fetchData() {\n      if (store.getState().auth.token) await store.dispatch(loadUser());\n      //  if (store.getState().auth.token) await store.dispatch(loadCurrentUser());\n      await store.dispatch(loadUsers());\n      await store.dispatch(loadBooks());\n      await store.dispatch(loadComments());\n      await store.dispatch(loadOrders());\n    }\n    fetchData();\n  }, []);\n\n  return (\n    <AlertProvider template={AlertTemplate} {...alertOptions}>\n      <div className=\"App\">\n        <Alerts />\n        <ToastContainer\n          position=\"top-right\"\n          autoClose={3000}\n          hideProgressBar={false}\n          newestOnTop={false}\n          closeOnClick\n          rtl={false}\n          pauseOnFocusLoss\n          draggable\n          pauseOnHover\n        />\n        <Switch>\n          <Route path=\"/search/:query\" component={SearchPage}></Route>\n          <Route path=\"/books/:id\" component={BookInfoPage}></Route>\n          <Route path=\"/books\" component={BooksMainComponent}></Route>\n          <Route path=\"/orders\" component={Orders}></Route>\n          <Route path=\"/login\" component={Login}></Route>\n          <Route path=\"/register\" component={Register}></Route>\n          {AdminUpdateRoutes} {AdminCreateRoutes}\n          <Route path=\"/admin\" component={AdminHome}></Route>\n          <Route path=\"/home\" component={Home}></Route>\n          <Route path=\"/not-found\" component={NotFound} />\n          <Redirect from=\"/\" exact to=\"/home\"></Redirect>\n          <Redirect to=\"/not-found\" />\n        </Switch>\n      </div>\n    </AlertProvider>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport store from \"./store\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport { Provider } from \"react-redux\";\n\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"font-awesome/css/font-awesome.css\";\nimport \"mdbreact/dist/css/mdb.css\";\nimport \"bulma/css/bulma.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <Provider store={store}>\n        <App />\n      </Provider>\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}